{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "awayjs-stagegl/lib/StageGL.ts",
    "awayjs-stagegl.js",
    "awayjs-stagegl/lib/aglsl/AGALTokenizer.ts",
    "awayjs-stagegl/lib/aglsl/AGLSLParser.ts",
    "awayjs-stagegl/lib/aglsl/Description.ts",
    "awayjs-stagegl/lib/aglsl/Destination.ts",
    "awayjs-stagegl/lib/aglsl/Header.ts",
    "awayjs-stagegl/lib/aglsl/Mapping.ts",
    "awayjs-stagegl/lib/aglsl/OpLUT.ts",
    "awayjs-stagegl/lib/aglsl/Sampler.ts",
    "awayjs-stagegl/lib/aglsl/Token.ts",
    "awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler.ts",
    "awayjs-stagegl/lib/aglsl/assembler/FS.ts",
    "awayjs-stagegl/lib/aglsl/assembler/Flags.ts",
    "awayjs-stagegl/lib/aglsl/assembler/OpcodeMap.ts",
    "awayjs-stagegl/lib/aglsl/assembler/Opcode.ts",
    "awayjs-stagegl/lib/aglsl/assembler/Part.ts",
    "awayjs-stagegl/lib/aglsl/assembler/RegMap.ts",
    "awayjs-stagegl/lib/aglsl/assembler/SamplerMap.ts",
    "awayjs-stagegl/lib/aglsl/assembler/Sampler.ts",
    "awayjs-stagegl/lib/attributes/GL_AttributesBuffer.ts",
    "awayjs-stagegl/lib/base/ContextGLBlendFactor.ts",
    "awayjs-stagegl/lib/base/ContextGLClearMask.ts",
    "awayjs-stagegl/lib/base/ContextGLCompareMode.ts",
    "awayjs-stagegl/lib/base/ContextGLDrawMode.ts",
    "awayjs-stagegl/lib/base/ContextGLMipFilter.ts",
    "awayjs-stagegl/lib/base/ContextGLProfile.ts",
    "awayjs-stagegl/lib/base/ContextGLProgramType.ts",
    "awayjs-stagegl/lib/base/ContextGLStencilAction.ts",
    "awayjs-stagegl/lib/base/ContextGLTextureFilter.ts",
    "awayjs-stagegl/lib/base/ContextGLTextureFormat.ts",
    "awayjs-stagegl/lib/base/ContextGLTriangleFace.ts",
    "awayjs-stagegl/lib/base/ContextGLVertexBufferFormat.ts",
    "awayjs-stagegl/lib/base/ContextGLWrapMode.ts",
    "awayjs-stagegl/lib/base/ContextMode.ts",
    "awayjs-stagegl/lib/base/ContextSoftware.ts",
    "awayjs-stagegl/lib/base/ContextStage3D.ts",
    "awayjs-stagegl/lib/base/ContextWebGL.ts",
    "awayjs-stagegl/lib/base/CubeTextureFlash.ts",
    "awayjs-stagegl/lib/base/CubeTextureWebGL.ts",
    "awayjs-stagegl/lib/base/IndexBufferFlash.ts",
    "awayjs-stagegl/lib/base/IndexBufferSoftware.ts",
    "awayjs-stagegl/lib/base/IndexBufferWebGL.ts",
    "awayjs-stagegl/lib/base/OpCodes.ts",
    "awayjs-stagegl/lib/base/ProgramFlash.ts",
    "awayjs-stagegl/lib/base/ProgramSoftware.ts",
    "awayjs-stagegl/lib/base/ProgramVOSoftware.ts",
    "awayjs-stagegl/lib/base/ProgramWebGL.ts",
    "awayjs-stagegl/lib/base/ResourceBaseFlash.ts",
    "awayjs-stagegl/lib/base/SamplerState.ts",
    "awayjs-stagegl/lib/base/SoftwareSamplerState.ts",
    "awayjs-stagegl/lib/base/Stage.ts",
    "awayjs-stagegl/lib/base/TextureBaseWebGL.ts",
    "awayjs-stagegl/lib/base/TextureFlash.ts",
    "awayjs-stagegl/lib/base/TextureSoftware.ts",
    "awayjs-stagegl/lib/base/TextureWebGL.ts",
    "awayjs-stagegl/lib/base/VertexBufferFlash.ts",
    "awayjs-stagegl/lib/base/VertexBufferSoftware.ts",
    "awayjs-stagegl/lib/base/VertexBufferWebGL.ts",
    "awayjs-stagegl/lib/events/StageEvent.ts",
    "awayjs-stagegl/lib/image/GL_BitmapImage2D.ts",
    "awayjs-stagegl/lib/image/GL_BitmapImageCube.ts",
    "awayjs-stagegl/lib/image/GL_Image2D.ts",
    "awayjs-stagegl/lib/image/GL_ImageBase.ts",
    "awayjs-stagegl/lib/image/GL_ImageCube.ts",
    "awayjs-stagegl/lib/image/GL_RenderImage2D.ts",
    "awayjs-stagegl/lib/image/GL_RenderImageCube.ts",
    "awayjs-stagegl/lib/image/GL_SpecularImage2D.ts",
    "awayjs-stagegl/lib/image/ProgramDataPool.ts",
    "awayjs-stagegl/lib/image/ProgramData.ts",
    "awayjs-stagegl/lib/managers/StageManager.ts"
  ],
  "names": [
    "require",
    "e",
    "t",
    "n",
    "r",
    "s",
    "o",
    "u",
    "a",
    "i",
    "f",
    "Error",
    "code",
    "l",
    "exports",
    "call",
    "length",
    "awayjs-stagegl/lib/StageGL",
    "module",
    "AttributesBuffer",
    "BitmapImage2D",
    "BitmapImageCube",
    "Image2D",
    "ImageCube",
    "SpecularImage2D",
    "Stage",
    "GL_AttributesBuffer",
    "GL_BitmapImage2D",
    "GL_BitmapImageCube",
    "GL_RenderImage2D",
    "GL_RenderImageCube",
    "GL_SpecularImage2D",
    "registerAbstraction",
    "stagegl",
    "window",
    "awayjs-core/lib/attributes/AttributesBuffer",
    "undefined",
    "awayjs-core/lib/image/BitmapImage2D",
    "awayjs-core/lib/image/BitmapImageCube",
    "awayjs-core/lib/image/Image2D",
    "awayjs-core/lib/image/ImageCube",
    "awayjs-core/lib/image/SpecularImage2D",
    "awayjs-stagegl/lib/attributes/GL_AttributesBuffer",
    "awayjs-stagegl/lib/base/Stage",
    "awayjs-stagegl/lib/image/GL_BitmapImage2D",
    "awayjs-stagegl/lib/image/GL_BitmapImageCube",
    "awayjs-stagegl/lib/image/GL_RenderImage2D",
    "awayjs-stagegl/lib/image/GL_RenderImageCube",
    "awayjs-stagegl/lib/image/GL_SpecularImage2D",
    "awayjs-stagegl/lib/aglsl/AGALTokenizer",
    "Description",
    "Header",
    "Mapping",
    "Token",
    "AGALTokenizer",
    "prototype",
    "decribeAGALByteArray",
    "bytes",
    "header",
    "readUnsignedByte",
    "version",
    "readUnsignedInt",
    "progid",
    "type",
    "desc",
    "tokens",
    "position",
    "token",
    "opcode",
    "lutentry",
    "agal2glsllut",
    "matrixheight",
    "hasmatrix",
    "dest",
    "regnum",
    "readUnsignedShort",
    "mask",
    "regtype",
    "regwrite",
    "this",
    "readReg",
    "b",
    "push",
    "mh",
    "indexoffset",
    "readByte",
    "swizzle",
    "regread",
    "lodbiad",
    "readmode",
    "dim",
    "special",
    "wrap",
    "mipmap",
    "filter",
    "samplers",
    "indexregtype",
    "indexselect",
    "indirectflag",
    "hasindirect",
    "mhi",
    "awayjs-stagegl/lib/aglsl/Description",
    "awayjs-stagegl/lib/aglsl/Header",
    "awayjs-stagegl/lib/aglsl/Mapping",
    "awayjs-stagegl/lib/aglsl/Token",
    "awayjs-stagegl/lib/aglsl/AGLSLParser",
    "ContextStage3D",
    "AGLSLParser",
    "parse",
    "body",
    "tag",
    "maxvertexconstants",
    "samptype",
    "writedepth",
    "derivatives",
    "indexOf",
    "sublines",
    "sl",
    "line",
    "destregstring",
    "regtostring",
    "destcaststring",
    "destmaskstring",
    "ndest",
    "replace",
    "dwm",
    "ndwm",
    "sourcetostring",
    "scalar",
    "texdim",
    "texsize",
    "texlod",
    "subline",
    "isscalar",
    "swiz",
    "realofs",
    "toString",
    "awayjs-stagegl/lib/base/ContextStage3D",
    "awayjs-stagegl/lib/aglsl/Destination",
    "Destination",
    "OpLUT",
    "include",
    "awayjs-stagegl/lib/aglsl/OpLUT",
    "flags",
    "matrixwidth",
    "scaler",
    "dm",
    "lod",
    "awayjs-stagegl/lib/aglsl/Sampler",
    "Sampler",
    "lodbias",
    "awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler",
    "OpcodeMap",
    "Part",
    "RegMap",
    "SamplerMap",
    "AGALMiniAssembler",
    "cur",
    "assemble",
    "source",
    "ext_part",
    "ext_version",
    "addHeader",
    "lines",
    "split",
    "processLine",
    "linenr",
    "startcomment",
    "search",
    "slice",
    "optsi",
    "opts",
    "match",
    "console",
    "log",
    "Number",
    "data",
    "name",
    "op",
    "map",
    "emitOpcode",
    "ti",
    "emitDest",
    "emitZeroDword",
    "format",
    "emitSource",
    "emitZeroQword",
    "emitSampler",
    "emitHeader",
    "pr",
    "writeUnsignedByte",
    "writeUnsignedInt",
    "opdest",
    "reg",
    "em",
    "num",
    "stringToMask",
    "writeUnsignedShort",
    "stringToSwizzle",
    "chartoindex",
    "x",
    "y",
    "z",
    "w",
    "sw",
    "charAt",
    "opsrc",
    "parseInt",
    "samplerbits",
    "sampleroptset",
    "toLowerCase",
    "shift",
    "value",
    "indexed",
    "selindex",
    "select",
    "offset",
    "writeByte",
    "partname",
    "awayjs-stagegl/lib/aglsl/assembler/OpcodeMap",
    "awayjs-stagegl/lib/aglsl/assembler/Part",
    "awayjs-stagegl/lib/aglsl/assembler/RegMap",
    "awayjs-stagegl/lib/aglsl/assembler/SamplerMap",
    "awayjs-stagegl/lib/aglsl/assembler/FS",
    "FS",
    "awayjs-stagegl/lib/aglsl/assembler/Flags",
    "Flags",
    "Opcode",
    "Object",
    "defineProperty",
    "get",
    "_map",
    "Array",
    "enumerable",
    "configurable",
    "awayjs-stagegl/lib/aglsl/assembler/Opcode",
    "aformat",
    "asize",
    "bformat",
    "bsize",
    "simple",
    "horizontal",
    "fragonly",
    "matrix",
    "size",
    "ByteArray",
    "awayjs-core/lib/utils/ByteArray",
    "Reg",
    "awayjs-stagegl/lib/aglsl/assembler/Sampler",
    "__extends",
    "d",
    "p",
    "hasOwnProperty",
    "__",
    "constructor",
    "AbstractionBase",
    "_super",
    "attributesBuffer",
    "stage",
    "_stage",
    "_attributesBuffer",
    "onClear",
    "event",
    "_indexBuffer",
    "dispose",
    "_vertexBuffer",
    "activate",
    "index",
    "dimensions",
    "setVertexBuffer",
    "_getVertexBuffer",
    "draw",
    "mode",
    "firstIndex",
    "numIndices",
    "context",
    "drawIndices",
    "_getIndexBuffer",
    "_invalid",
    "createIndexBuffer",
    "count",
    "stride",
    "uploadFromByteArray",
    "buffer",
    "createVertexBuffer",
    "awayjs-core/lib/library/AbstractionBase",
    "awayjs-stagegl/lib/base/ContextGLBlendFactor",
    "ContextGLBlendFactor",
    "DESTINATION_ALPHA",
    "DESTINATION_COLOR",
    "ONE",
    "ONE_MINUS_DESTINATION_ALPHA",
    "ONE_MINUS_DESTINATION_COLOR",
    "ONE_MINUS_SOURCE_ALPHA",
    "ONE_MINUS_SOURCE_COLOR",
    "SOURCE_ALPHA",
    "SOURCE_COLOR",
    "ZERO",
    "awayjs-stagegl/lib/base/ContextGLClearMask",
    "ContextGLClearMask",
    "COLOR",
    "DEPTH",
    "STENCIL",
    "ALL",
    "awayjs-stagegl/lib/base/ContextGLCompareMode",
    "ContextGLCompareMode",
    "ALWAYS",
    "EQUAL",
    "GREATER",
    "GREATER_EQUAL",
    "LESS",
    "LESS_EQUAL",
    "NEVER",
    "NOT_EQUAL",
    "awayjs-stagegl/lib/base/ContextGLDrawMode",
    "ContextGLDrawMode",
    "TRIANGLES",
    "LINES",
    "awayjs-stagegl/lib/base/ContextGLMipFilter",
    "ContextGLMipFilter",
    "MIPLINEAR",
    "MIPNEAREST",
    "MIPNONE",
    "awayjs-stagegl/lib/base/ContextGLProfile",
    "ContextGLProfile",
    "BASELINE",
    "BASELINE_CONSTRAINED",
    "BASELINE_EXTENDED",
    "awayjs-stagegl/lib/base/ContextGLProgramType",
    "ContextGLProgramType",
    "FRAGMENT",
    "SAMPLER",
    "VERTEX",
    "awayjs-stagegl/lib/base/ContextGLStencilAction",
    "ContextGLStencilAction",
    "DECREMENT_SATURATE",
    "DECREMENT_WRAP",
    "INCREMENT_SATURATE",
    "INCREMENT_WRAP",
    "INVERT",
    "KEEP",
    "SET",
    "awayjs-stagegl/lib/base/ContextGLTextureFilter",
    "ContextGLTextureFilter",
    "LINEAR",
    "NEAREST",
    "awayjs-stagegl/lib/base/ContextGLTextureFormat",
    "ContextGLTextureFormat",
    "BGRA",
    "BGRA_PACKED",
    "BGR_PACKED",
    "COMPRESSED",
    "COMPRESSED_ALPHA",
    "awayjs-stagegl/lib/base/ContextGLTriangleFace",
    "ContextGLTriangleFace",
    "BACK",
    "FRONT",
    "FRONT_AND_BACK",
    "NONE",
    "awayjs-stagegl/lib/base/ContextGLVertexBufferFormat",
    "ContextGLVertexBufferFormat",
    "BYTES_4",
    "FLOAT_1",
    "FLOAT_2",
    "FLOAT_3",
    "FLOAT_4",
    "awayjs-stagegl/lib/base/ContextGLWrapMode",
    "ContextGLWrapMode",
    "CLAMP",
    "REPEAT",
    "awayjs-stagegl/lib/base/ContextMode",
    "ContextMode",
    "AUTO",
    "WEBGL",
    "FLASH",
    "NATIVE",
    "SOFTWARE",
    "awayjs-stagegl/lib/base/ContextSoftware",
    "Matrix3D",
    "Matrix",
    "Point",
    "Vector3D",
    "Rectangle",
    "ColorUtils",
    "Matrix3DUtils",
    "IndexBufferSoftware",
    "VertexBufferSoftware",
    "TextureSoftware",
    "ProgramSoftware",
    "SoftwareSamplerState",
    "ContextSoftware",
    "canvas",
    "_backBufferRect",
    "_backBufferWidth",
    "_backBufferHeight",
    "_zbuffer",
    "_cullingMode",
    "_blendSource",
    "_blendDestination",
    "_colorMaskR",
    "_colorMaskG",
    "_colorMaskB",
    "_colorMaskA",
    "_writeDepth",
    "_depthCompareMode",
    "_screenMatrix",
    "_frontBufferMatrix",
    "_bboxMin",
    "_bboxMax",
    "_clamp",
    "_samplerStates",
    "_textures",
    "_vertexBuffers",
    "_vertexBufferOffsets",
    "_vertexBufferFormats",
    "_fragmentConstants",
    "_vertexConstants",
    "_antialias",
    "_canvas",
    "_backBufferColor",
    "_frontBuffer",
    "document",
    "appendChild",
    "getCanvas",
    "clear",
    "red",
    "green",
    "blue",
    "alpha",
    "depth",
    "stencil",
    "fillRect",
    "ARGBtoFloat32",
    "len",
    "configureBackBuffer",
    "width",
    "height",
    "antiAlias",
    "enableDepthAndStencil",
    "Math",
    "floor",
    "_setSize",
    "raw",
    "rawData",
    "transpose",
    "scale",
    "createCubeTexture",
    "optimizeForRenderToTexture",
    "streamingLevels",
    "createProgram",
    "createTexture",
    "numVertices",
    "dataPerVertex",
    "setBlendFactors",
    "sourceFactor",
    "destinationFactor",
    "setColorMask",
    "setStencilActions",
    "triangleFace",
    "compareMode",
    "actionOnBothPass",
    "actionOnDepthFail",
    "actionOnDepthPassStencilFail",
    "coordinateSystem",
    "setStencilReferenceValue",
    "referenceValue",
    "readMask",
    "writeMask",
    "setCulling",
    "triangleFaceToCull",
    "setDepthTest",
    "depthMask",
    "passCompareMode",
    "setProgram",
    "program",
    "_program",
    "setProgramConstantsFromMatrix",
    "programType",
    "firstRegister",
    "transposedMatrix",
    "RAW_DATA_CONTAINER",
    "setProgramConstantsFromArray",
    "numRegisters",
    "target",
    "k",
    "setTextureAt",
    "sampler",
    "texture",
    "setVertexBufferAt",
    "bufferOffset",
    "present",
    "rect",
    "drawToBitmapImage2D",
    "destination",
    "indexBuffer",
    "lock",
    "index0",
    "index1",
    "index2",
    "vo0",
    "vo1",
    "vo2",
    "startOffset",
    "vertex",
    "triangle",
    "unlock",
    "drawVertices",
    "firstVertex",
    "setScissorRectangle",
    "rectangle",
    "setSamplerStateAt",
    "mipfilter",
    "state",
    "setRenderToTexture",
    "surfaceSelector",
    "setRenderToBackBuffer",
    "putPixel",
    "color",
    "float32ColorToARGB",
    "getPixel32",
    "destModified",
    "applyBlendMode",
    "sourceModified",
    "g",
    "max",
    "min",
    "setPixel32",
    "argb",
    "blend",
    "result",
    "clamp",
    "interpolate",
    "gradient",
    "p0",
    "outputPosition",
    "isNaN",
    "error",
    "p1",
    "p2",
    "scaleBy",
    "project",
    "transformVector",
    "calcPixel",
    "screen",
    "barycentric",
    "screenRight",
    "screenBottom",
    "clip",
    "clipRight",
    "clipBottom",
    "fragDepth",
    "currentDepth",
    "passDepthTest",
    "fragmentVO",
    "fragment",
    "discard",
    "outputColor",
    "c",
    "sx",
    "sy",
    "crossProduct",
    "MAX_SAMPLERS",
    "VertexBufferProperties",
    "normalized",
    "awayjs-core/lib/geom/Matrix",
    "awayjs-core/lib/geom/Matrix3D",
    "awayjs-core/lib/geom/Matrix3DUtils",
    "awayjs-core/lib/geom/Point",
    "awayjs-core/lib/geom/Rectangle",
    "awayjs-core/lib/geom/Vector3D",
    "awayjs-core/lib/utils/ColorUtils",
    "awayjs-stagegl/lib/base/IndexBufferSoftware",
    "awayjs-stagegl/lib/base/ProgramSoftware",
    "awayjs-stagegl/lib/base/SoftwareSamplerState",
    "awayjs-stagegl/lib/base/TextureSoftware",
    "awayjs-stagegl/lib/base/VertexBufferSoftware",
    "CubeTextureFlash",
    "IndexBufferFlash",
    "OpCodes",
    "ProgramFlash",
    "TextureFlash",
    "VertexBufferFlash",
    "container",
    "callback",
    "_cmdStream",
    "_resources",
    "swfVersionStr",
    "flashvars",
    "id",
    "params",
    "quality",
    "bgcolor",
    "allowscriptaccess",
    "allowfullscreen",
    "wmode",
    "_errorCheckingEnabled",
    "_iDriverInfo",
    "attributes",
    "salign",
    "_oldCanvas",
    "cloneNode",
    "_oldParent",
    "parentNode",
    "context3dObj",
    "contexts",
    "callbackSWFObject",
    "callbackInfo",
    "success",
    "_container",
    "ref",
    "_iCallback",
    "set",
    "addStream",
    "String",
    "fromCharCode",
    "enableErrorChecking",
    "trueValue",
    "falseValue",
    "execute",
    "_iAddResource",
    "resource",
    "_iRemoveResource",
    "splice",
    "clearTextureAt",
    "debug",
    "intMask",
    "drawTriangles",
    "startIndex",
    "setProgramConstant",
    "data32PerVertex",
    "_width",
    "_height",
    "clearVertexBufferAt",
    "clearRenderToTexture",
    "setScissorRect",
    "clearScissorRect",
    "disposeContext",
    "stream",
    "logStream",
    "maxfragconstants",
    "maxtemp",
    "maxstreams",
    "maxtextures",
    "defaultsampler",
    "mountain_js_context_available",
    "driverInfo",
    "ctx",
    "timeOutId",
    "setTimeout",
    "clearTimeout",
    "awayjs-stagegl/lib/base/CubeTextureFlash",
    "awayjs-stagegl/lib/base/IndexBufferFlash",
    "awayjs-stagegl/lib/base/OpCodes",
    "awayjs-stagegl/lib/base/ProgramFlash",
    "awayjs-stagegl/lib/base/TextureFlash",
    "awayjs-stagegl/lib/base/VertexBufferFlash",
    "awayjs-stagegl/lib/base/ContextWebGL",
    "CubeTextureWebGL",
    "IndexBufferWebGL",
    "ProgramWebGL",
    "TextureWebGL",
    "SamplerState",
    "VertexBufferWebGL",
    "ContextWebGL",
    "_blendFactorDictionary",
    "_drawModeDictionary",
    "_compareModeDictionary",
    "_stencilActionDictionary",
    "_textureIndexDictionary",
    "_textureTypeDictionary",
    "_wrapDictionary",
    "_filterDictionary",
    "_mipmapFilterDictionary",
    "_vertexBufferPropertiesDictionary",
    "_stencilReferenceValue",
    "_stencilReadMask",
    "_separateStencil",
    "_gl",
    "getContext",
    "premultipliedAlpha",
    "getExtension",
    "_standardDerivatives",
    "DST_ALPHA",
    "DST_COLOR",
    "ONE_MINUS_DST_ALPHA",
    "ONE_MINUS_DST_COLOR",
    "ONE_MINUS_SRC_ALPHA",
    "ONE_MINUS_SRC_COLOR",
    "SRC_ALPHA",
    "SRC_COLOR",
    "GEQUAL",
    "LEQUAL",
    "NOTEQUAL",
    "DECR",
    "DECR_WRAP",
    "INCR",
    "INCR_WRAP",
    "REPLACE",
    "TEXTURE0",
    "TEXTURE1",
    "TEXTURE2",
    "TEXTURE3",
    "TEXTURE4",
    "TEXTURE5",
    "TEXTURE6",
    "TEXTURE7",
    "TEXTURE_2D",
    "TEXTURE_CUBE_MAP",
    "CLAMP_TO_EDGE",
    "LINEAR_MIPMAP_NEAREST",
    "LINEAR_MIPMAP_LINEAR",
    "NEAREST_MIPMAP_NEAREST",
    "NEAREST_MIPMAP_LINEAR",
    "FLOAT",
    "UNSIGNED_BYTE",
    "_stencilCompareMode",
    "_stencilCompareModeBack",
    "_stencilCompareModeFront",
    "alert",
    "gl",
    "_drawing",
    "updateBlendStatus",
    "glmask",
    "COLOR_BUFFER_BIT",
    "STENCIL_BUFFER_BIT",
    "DEPTH_BUFFER_BIT",
    "clearColor",
    "clearDepth",
    "clearStencil",
    "enable",
    "STENCIL_TEST",
    "DEPTH_TEST",
    "viewport",
    "arrayBuffer",
    "ArrayBuffer",
    "readPixels",
    "RGBA",
    "Uint8Array",
    "byteArray",
    "setArrayBuffer",
    "setPixels",
    "bindBuffer",
    "ELEMENT_ARRAY_BUFFER",
    "glBuffer",
    "drawElements",
    "UNSIGNED_SHORT",
    "drawArrays",
    "_blendEnabled",
    "_blendSourceFactor",
    "_blendDestinationFactor",
    "colorMask",
    "disable",
    "CULL_FACE",
    "cullFace",
    "translateTriangleFace",
    "depthFunc",
    "compareModeGL",
    "fail",
    "zFail",
    "pass",
    "stencilFunc",
    "stencilOp",
    "stencilFuncSeparate",
    "stencilOpSeparate",
    "stencilMask",
    "_currentProgram",
    "focusProgram",
    "uniform4f",
    "getUniformLocation",
    "SCISSOR_TEST",
    "scissor",
    "samplerState",
    "_activeTexture",
    "activeTexture",
    "bindTexture",
    "textureType",
    "glTexture",
    "uniform1i",
    "texParameteri",
    "TEXTURE_WRAP_S",
    "TEXTURE_WRAP_T",
    "TEXTURE_MAG_FILTER",
    "TEXTURE_MIN_FILTER",
    "location",
    "getAttribLocation",
    "disableVertexAttribArray",
    "_currentArrayBuffer",
    "ARRAY_BUFFER",
    "properties",
    "enableVertexAttribArray",
    "vertexAttribPointer",
    "frameBuffer",
    "bindFramebuffer",
    "FRAMEBUFFER",
    "BLEND",
    "blendEquation",
    "FUNC_ADD",
    "blendFunc",
    "_float4",
    "Float32Array",
    "modulo",
    "awayjs-stagegl/lib/base/CubeTextureWebGL",
    "awayjs-stagegl/lib/base/IndexBufferWebGL",
    "awayjs-stagegl/lib/base/ProgramWebGL",
    "awayjs-stagegl/lib/base/SamplerState",
    "awayjs-stagegl/lib/base/TextureWebGL",
    "awayjs-stagegl/lib/base/VertexBufferWebGL",
    "ByteArrayBase",
    "ResourceBaseFlash",
    "forRTT",
    "streaming",
    "_context",
    "_size",
    "initCubeTexture",
    "_pId",
    "disposeCubeTexture",
    "uploadFromData",
    "side",
    "miplevel",
    "HTMLImageElement",
    "can",
    "createElement",
    "h",
    "drawImage",
    "getImageData",
    "pos",
    "internalGetBase64String",
    "uploadBytesCubeTexture",
    "uploadCompressedTextureFromByteArray",
    "byteArrayOffset",
    "async",
    "awayjs-core/lib/utils/ByteArrayBase",
    "awayjs-stagegl/lib/base/ResourceBaseFlash",
    "TextureBaseWebGL",
    "_textureSelectorDictionary",
    "_texture",
    "TEXTURE_CUBE_MAP_POSITIVE_X",
    "TEXTURE_CUBE_MAP_NEGATIVE_X",
    "TEXTURE_CUBE_MAP_POSITIVE_Y",
    "TEXTURE_CUBE_MAP_NEGATIVE_Y",
    "TEXTURE_CUBE_MAP_POSITIVE_Z",
    "TEXTURE_CUBE_MAP_NEGATIVE_Z",
    "deleteTexture",
    "texImage2D",
    "awayjs-stagegl/lib/base/TextureBaseWebGL",
    "awayjs-stagegl/lib/base/IContextGL",
    "awayjs-stagegl/lib/base/ICubeTexture",
    "awayjs-stagegl/lib/base/IIndexBuffer",
    "awayjs-stagegl/lib/base/IProgram",
    "awayjs-stagegl/lib/base/ITextureBase",
    "awayjs-stagegl/lib/base/ITexture",
    "awayjs-stagegl/lib/base/IVertexBuffer",
    "_numIndices",
    "initIndexBuffer",
    "uploadFromArray",
    "uploadArrayIndexBuffer",
    "join",
    "disposeIndexBuffer",
    "_startOffset",
    "_data",
    "Uint16Array",
    "_buffer",
    "createBuffer",
    "bufferSubData",
    "bufferData",
    "STATIC_DRAW",
    "deleteBuffer",
    "initProgram",
    "initVertexBuffer",
    "uploadArrayVertexBuffer",
    "uploadAGALBytesProgram",
    "uploadBytesIndexBuffer",
    "uploadBytesVertexBuffer",
    "disposeProgram",
    "disposeVertexBuffer",
    "initTexture",
    "uploadBytesTexture",
    "disposeTexture",
    "upload",
    "vertexProgram",
    "fragmentProgram",
    "readBase64String",
    "ProgramVOSoftware",
    "_vertexDescr",
    "_tokenizer",
    "_fragmentDescr",
    "contextSoftware",
    "vertexIndex",
    "vo",
    "attribute",
    "attributesPerVertex",
    "uintData",
    "_opCodeFunc",
    "outputDepth",
    "varying",
    "varying0",
    "varying1",
    "varying2",
    "derivativeX",
    "derivativeY",
    "getDestTarget",
    "targetType",
    "temp",
    "targetIndex",
    "getSourceTargetType",
    "getSourceTargetByIndex",
    "getSourceTarget",
    "mov",
    "source1",
    "source2",
    "source1Target",
    "m44",
    "source2Type",
    "source2Target0",
    "source2Target1",
    "source2Target2",
    "source2Target3",
    "sample",
    "v",
    "textureIndex",
    "dux",
    "dvx",
    "duy",
    "dvy",
    "_defaultSamplerState",
    "repeat",
    "abs",
    "lambda",
    "sqrt",
    "LN2",
    "miplevelLow",
    "miplevelHigh",
    "ceil",
    "maxmiplevel",
    "mipblend",
    "resultLow",
    "resultHigh",
    "dataLow",
    "getData",
    "dataLowWidth",
    "pow",
    "dataLowHeight",
    "dataHigh",
    "dataHighWidth",
    "dataHighHeight",
    "sampleBilinear",
    "sampleNearest",
    "interpolateColor",
    "textureData",
    "textureWidth",
    "textureHeight",
    "texelSizeX",
    "texelSizeY",
    "color00",
    "color10",
    "color01",
    "color11",
    "interColor0",
    "interColor1",
    "tex",
    "add",
    "source2Target",
    "sub",
    "mul",
    "div",
    "rcp",
    "frc",
    "sqt",
    "rsq",
    "exp",
    "nrm",
    "sin",
    "cos",
    "crs",
    "source1TargetX",
    "source1TargetY",
    "source1TargetZ",
    "source2TargetX",
    "source2TargetY",
    "source2TargetZ",
    "dp3",
    "dp4",
    "source1TargetW",
    "source2TargetW",
    "neg",
    "sat",
    "m33",
    "m34",
    "ddx",
    "ddy",
    "sge",
    "slt",
    "seq",
    "sne",
    "sgn",
    "kil",
    "awayjs-stagegl/lib/base/ProgramVOSoftware",
    "_uniforms",
    "_attribs",
    "vertexString",
    "_aglslParser",
    "fragmentString",
    "_vertexShader",
    "createShader",
    "VERTEX_SHADER",
    "_fragmentShader",
    "FRAGMENT_SHADER",
    "shaderSource",
    "compileShader",
    "getShaderParameter",
    "COMPILE_STATUS",
    "getShaderInfoLog",
    "attachShader",
    "linkProgram",
    "getProgramParameter",
    "LINK_STATUS",
    "getProgramInfoLog",
    "_uniformLocationNameDictionary",
    "deleteProgram",
    "useProgram",
    "EventDispatcher",
    "CSS",
    "StageEvent",
    "ProgramDataPool",
    "stageIndex",
    "stageManager",
    "forceSoftware",
    "profile",
    "_this",
    "_abstractionPool",
    "_programData",
    "_x",
    "_y",
    "_stageIndex",
    "_antiAlias",
    "_renderTarget",
    "_renderSurfaceSelector",
    "_initialised",
    "_bufferFormatDictionary",
    "_programDataPool",
    "addEventListener",
    "onContextLost",
    "onContextRestored",
    "_stageManager",
    "_viewPort",
    "_enableDepthAndStencil",
    "setElementX",
    "setElementY",
    "visible",
    "getProgramData",
    "getItem",
    "setRenderTarget",
    "getAbstraction",
    "_getTexture",
    "asset",
    "_abstractionClassPool",
    "assetType",
    "clearAbstraction",
    "gl_assetClass",
    "assetClass",
    "requestContext",
    "_usesSoftwareRendering",
    "_profile",
    "_callback",
    "dispatchEvent",
    "STAGE_ERROR",
    "val",
    "setElementWidth",
    "_backBufferDirty",
    "notifyViewportUpdated",
    "setElementHeight",
    "getElementVisibility",
    "setElementVisibility",
    "_viewportDirty",
    "VIEWPORT_UPDATED",
    "iRemoveStage",
    "freeContext",
    "backBufferWidth",
    "backBufferHeight",
    "_color",
    "_bufferClear",
    "_scissorRect",
    "newBufferClear",
    "registerProgram",
    "programData",
    "unRegisterProgram",
    "CONTEXT_DISPOSED",
    "recoverFromDisposal",
    "CONTEXT_RECREATED",
    "CONTEXT_CREATED",
    "setSamplerState",
    "smooth",
    "awayjs-core/lib/events/EventDispatcher",
    "awayjs-core/lib/utils/CSS",
    "awayjs-stagegl/lib/events/StageEvent",
    "awayjs-stagegl/lib/image/ProgramDataPool",
    "AbstractMethodError",
    "awayjs-core/lib/errors/AbstractMethodError",
    "_mipLevels",
    "_glTexture",
    "_frameBuffer",
    "createFramebuffer",
    "renderBuffer",
    "createRenderbuffer",
    "bindRenderbuffer",
    "RENDERBUFFER",
    "renderbufferStorage",
    "DEPTH_STENCIL",
    "framebufferTexture2D",
    "COLOR_ATTACHMENT0",
    "framebufferRenderbuffer",
    "DEPTH_STENCIL_ATTACHMENT",
    "ext",
    "generateMipmaps",
    "_numVertices",
    "_dataPerVertex",
    "startVertex",
    "vertices",
    "_floatData",
    "_uintData",
    "EventBase",
    "clone",
    "awayjs-core/lib/events/EventBase",
    "MipmapGenerator",
    "GL_Image2D",
    "apply",
    "arguments",
    "_mipmap",
    "mipmapData",
    "_mipmapData",
    "_asset",
    "_generateMipMaps",
    "_freeMipMapHolder",
    "awayjs-core/lib/utils/MipmapGenerator",
    "awayjs-stagegl/lib/image/GL_Image2D",
    "GL_ImageCube",
    "_mipmapDataArray",
    "j",
    "awayjs-stagegl/lib/image/GL_ImageCube",
    "GL_ImageBase",
    "awayjs-stagegl/lib/image/GL_ImageBase",
    "usages",
    "GL_RenderIimage2D",
    "ProgramData",
    "_pool",
    "key",
    "disposeItem",
    "awayjs-stagegl/lib/image/ProgramData",
    "pool",
    "PROGRAMDATA_ID_COUNT",
    "awayjs-stagegl/lib/library/GL_IAssetClass",
    "awayjs-stagegl/lib/managers/StageManager",
    "ArgumentError",
    "StageManager",
    "_stages",
    "STAGE_MAX_QUANTITY",
    "_onContextCreatedDelegate",
    "onContextCreated",
    "getInstance",
    "_instance",
    "getStageAt",
    "_numStages",
    "removeEventListener",
    "getFreeStage",
    "awayjs-core/lib/errors/ArgumentError"
  ],
  "mappings": "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",
  "file": "awayjs-stagegl.min.js",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import AttributesBuffer\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\nimport BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport BitmapImageCube\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImageCube\");\nimport Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\nimport ImageCube\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageCube\");\nimport SpecularImage2D\t\t\t\t= require(\"awayjs-core/lib/image/SpecularImage2D\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport GL_AttributesBuffer\t\t\t= require(\"awayjs-stagegl/lib/attributes/GL_AttributesBuffer\");\nimport GL_BitmapImage2D\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_BitmapImage2D\");\nimport GL_BitmapImageCube\t\t\t= require(\"awayjs-stagegl/lib/image/GL_BitmapImageCube\");\nimport GL_RenderImage2D\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_RenderImage2D\");\nimport GL_RenderImageCube\t\t\t= require(\"awayjs-stagegl/lib/image/GL_RenderImageCube\");\nimport GL_SpecularImage2D\t\t\t= require(\"awayjs-stagegl/lib/image/GL_SpecularImage2D\");\n\nStage.registerAbstraction(GL_AttributesBuffer, AttributesBuffer);\nStage.registerAbstraction(GL_RenderImage2D, Image2D);\nStage.registerAbstraction(GL_RenderImageCube, ImageCube);\nStage.registerAbstraction(GL_BitmapImage2D, BitmapImage2D);\nStage.registerAbstraction(GL_BitmapImageCube, BitmapImageCube);\nStage.registerAbstraction(GL_SpecularImage2D, SpecularImage2D);\n\n/**\n *\n * static shim\n */\nvar stagegl =\n{\n\tStage:Stage\n};\n\nwindow[\"stagegl\"] = stagegl;\n\nexport = stagegl;",
    null,
    "import ByteArray\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport Description\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Description\");\nimport Header\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Header\");\nimport Mapping\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Mapping\");\nimport Token\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Token\");\n\nclass AGALTokenizer\n{\n\tconstructor()\n\t{\n\t}\n\n\tpublic decribeAGALByteArray(bytes:ByteArray)\n\t{\n\t\tvar header:Header = new Header();\n\n\t\tif (bytes.readUnsignedByte() != 0xa0) {\n\t\t\tthrow \"Bad AGAL: Missing 0xa0 magic byte.\";\n\t\t}\n\n\t\theader.version = bytes.readUnsignedInt();\n\t\tif (header.version >= 0x10) {\n\t\t\tbytes.readUnsignedByte();\n\t\t\theader.version >>= 1;\n\t\t}\n\t\tif (bytes.readUnsignedByte() != 0xa1) {\n\t\t\tthrow \"Bad AGAL: Missing 0xa1 magic byte.\";\n\t\t}\n\n\t\theader.progid = bytes.readUnsignedByte();\n\t\tswitch (header.progid) {\n\t\t\tcase 1:\n\t\t\t\theader.type = \"fragment\";\n\t\t\t\tbreak;\n\t\t\tcase 0:\n\t\t\t\theader.type = \"vertex\";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\theader.type = \"cpu\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\theader.type = \"\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tvar desc:Description = new Description();\n\t\tvar tokens:Token[] = [];\n\t\twhile (bytes.position < bytes.length) {\n\t\t\tvar token:Token = new Token();\n\n\t\t\ttoken.opcode = bytes.readUnsignedInt();\n\t\t\tvar lutentry = Mapping.agal2glsllut[token.opcode];\n\t\t\tif (!lutentry) {\n\t\t\t\tthrow \"Opcode not valid or not implemented yet: \" + token.opcode;\n\t\t\t}\n\t\t\tif (lutentry.matrixheight) {\n\t\t\t\tdesc.hasmatrix = true;\n\t\t\t}\n\t\t\tif (lutentry.dest) {\n\t\t\t\ttoken.dest.regnum = bytes.readUnsignedShort();\n\t\t\t\ttoken.dest.mask = bytes.readUnsignedByte();\n\t\t\t\ttoken.dest.regtype = bytes.readUnsignedByte();\n\t\t\t\tdesc.regwrite[token.dest.regtype][token.dest.regnum] |= token.dest.mask;\n\t\t\t} else {\n\t\t\t\ttoken.dest = null;\n\t\t\t\tbytes.readUnsignedInt();\n\t\t\t}\n\t\t\tif (lutentry.a) {\n\t\t\t\tthis.readReg(token.a, 1, desc, bytes);\n\t\t\t} else {\n\t\t\t\ttoken.a = null;\n\t\t\t\tbytes.readUnsignedInt();\n\t\t\t\tbytes.readUnsignedInt();\n\t\t\t}\n\t\t\tif (lutentry.b) {\n\t\t\t\tthis.readReg(token.b, lutentry.matrixheight | 0, desc, bytes);\n\t\t\t} else {\n\t\t\t\ttoken.b = null;\n\t\t\t\tbytes.readUnsignedInt();\n\t\t\t\tbytes.readUnsignedInt();\n\t\t\t}\n\t\t\ttokens.push(token);\n\t\t}\n\t\tdesc.header = header;\n\t\tdesc.tokens = tokens;\n\n\t\treturn desc;\n\t}\n\n\tpublic readReg(s, mh, desc, bytes)\n\t{\n\t\ts.regnum = bytes.readUnsignedShort();\n\t\ts.indexoffset = bytes.readByte();\n\t\ts.swizzle = bytes.readUnsignedByte();\n\t\ts.regtype = bytes.readUnsignedByte();\n\t\tdesc.regread[s.regtype][s.regnum] = 0xf; // sould be swizzle to mask? should be |=                                                 \n\t\tif (s.regtype == 0x5) {\n\t\t\t// sampler\n\t\t\ts.lodbiad = s.indexoffset;\n\t\t\ts.indexoffset = undefined;\n\t\t\ts.swizzle = undefined;\n\n\t\t\t// sampler \n\t\t\ts.readmode = bytes.readUnsignedByte();\n\t\t\ts.dim = s.readmode >> 4;\n\t\t\ts.readmode &= 0xf;\n\t\t\ts.special = bytes.readUnsignedByte();\n\t\t\ts.wrap = s.special >> 4;\n\t\t\ts.special &= 0xf;\n\t\t\ts.mipmap = bytes.readUnsignedByte();\n\t\t\ts.filter = s.mipmap >> 4;\n\t\t\ts.mipmap &= 0xf;\n\t\t\tdesc.samplers[s.regnum] = s;\n\t\t} else {\n\t\t\ts.indexregtype = bytes.readUnsignedByte();\n\t\t\ts.indexselect = bytes.readUnsignedByte();\n\t\t\ts.indirectflag = bytes.readUnsignedByte();\n\t\t}\n\t\tif (s.indirectflag) {\n\t\t\tdesc.hasindirect = true;\n\t\t}\n\t\tif (!s.indirectflag && mh) {\n\t\t\tfor (var mhi:number = 0; mhi < mh; mhi++) //TODO wrong, should be |=\n\t\t\t{\n\t\t\t\tdesc.regread[s.regtype][s.regnum + mhi] = desc.regread[s.regtype][s.regnum];\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport = AGALTokenizer;",
    "import Description\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Description\");\nimport Mapping\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Mapping\");\nimport ContextStage3D\t\t\t= require(\"awayjs-stagegl/lib/base/ContextStage3D\");\n\nclass AGLSLParser\n{\n\tpublic parse(desc:Description)\n\t{\n\t\tvar header:string = \"\";\n\t\tvar body:string = \"\";\n\n\t\theader += \"precision highp float;\\n\";\n\t\tvar tag = desc.header.type[0]; //TODO\n\n\t\t// declare uniforms\n\t\tif (desc.header.type == \"vertex\") {\n\t\t\theader += \"uniform float yflip;\\n\";\n\t\t}\n\t\tif (!desc.hasindirect) {\n\t\t\tfor (var i:number = 0; i < desc.regread[0x1].length; i++) {\n\t\t\t\tif (desc.regread[0x1][i]) {\n\t\t\t\t\theader += \"uniform vec4 \" + tag + \"c\" + i + \";\\n\";\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\theader += \"uniform vec4 \" + tag + \"carrr[\" + ContextStage3D.maxvertexconstants + \"];\\n\";                // use max const count instead\n\t\t}\n\n\t\t// declare temps\n\t\tfor (var i = 0; i < desc.regread[0x2].length || i < desc.regwrite[0x2].length; i++) {\n\t\t\tif (desc.regread[0x2][i] || desc.regwrite[0x2][i]) // duh, have to check write only also...\n\t\t\t{\n\t\t\t\theader += \"vec4 \" + tag + \"t\" + i + \";\\n\";\n\t\t\t}\n\t\t}\n\n\t\t// declare streams\n\t\tfor (var i:number = 0; i < desc.regread[0x0].length; i++) {\n\t\t\tif (desc.regread[0x0][i]) {\n\t\t\t\theader += \"attribute vec4 va\" + i + \";\\n\";\n\t\t\t}\n\t\t}\n\n\t\t// declare interpolated\n\t\tfor (var i:number = 0; i < desc.regread[0x4].length || i < desc.regwrite[0x4].length; i++) {\n\t\t\tif (desc.regread[0x4][i] || desc.regwrite[0x4][i]) {\n\t\t\t\theader += \"varying vec4 vi\" + i + \";\\n\";\n\t\t\t}\n\t\t}\n\n\t\t// declare samplers\n\t\tvar samptype:Array<string> = [\"2D\", \"Cube\", \"3D\", \"\"];\n\t\tfor (var i:number = 0; i < desc.samplers.length; i++) {\n\t\t\tif (desc.samplers[i]) {\n\t\t\t\theader += \"uniform sampler\" + samptype[ desc.samplers[i].dim & 3 ] + \" fs\" + i + \";\\n\";\n\t\t\t}\n\t\t}\n\n\t\t// extra gl fluff: setup position and depth adjust temps\n\t\tif (desc.header.type == \"vertex\") {\n\t\t\theader += \"vec4 outpos;\\n\";\n\t\t}\n\t\tif (desc.writedepth) {\n\t\t\theader += \"vec4 tmp_FragDepth;\\n\";\n\t\t}\n\t\t//if ( desc.hasmatrix ) \n\t\t//    header += \"vec4 tmp_matrix;\\n\";\n\n\t\tvar derivatives:boolean = false;\n\n\t\t// start body of code\n\t\tbody += \"void main() {\\n\";\n\n\t\tfor (var i:number = 0; i < desc.tokens.length; i++) {\n\n\t\t\tvar lutentry = Mapping.agal2glsllut[desc.tokens[i].opcode];\n\n\t\t\tif(lutentry.s.indexOf(\"dFdx\") != -1 || lutentry.s.indexOf(\"dFdy\") != -1) derivatives = true;\n\t\t\tif (!lutentry) {\n\t\t\t\tthrow \"Opcode not valid or not implemented yet: \"\n\t\t\t\t/*+token.opcode;*/\n\t\t\t}\n\t\t\tvar sublines = lutentry.matrixheight || 1;\n\n\t\t\tfor (var sl:number = 0; sl < sublines; sl++) {\n\t\t\t\tvar line:string = \"  \" + lutentry.s;\n\t\t\t\tif (desc.tokens[i].dest) {\n\t\t\t\t\tif (lutentry.matrixheight) {\n\t\t\t\t\t\tif (((desc.tokens[i].dest.mask >> sl) & 1) != 1) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar destregstring:string = this.regtostring(desc.tokens[i].dest.regtype, desc.tokens[i].dest.regnum, desc, tag);\n\t\t\t\t\t\tvar destcaststring:string = \"float\";\n\t\t\t\t\t\tvar destmaskstring = [\"x\", \"y\", \"z\", \"w\"][sl];\n\t\t\t\t\t\tdestregstring += \".\" + destmaskstring;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar destregstring:string = this.regtostring(desc.tokens[i].dest.regtype, desc.tokens[i].dest.regnum, desc, tag);\n\t\t\t\t\t\tvar destcaststring:string;\n\t\t\t\t\t\tvar destmaskstring:string;\n\t\t\t\t\t\tif (desc.tokens[i].dest.mask != 0xf) {\n\t\t\t\t\t\t\tvar ndest:number = 0;\n\t\t\t\t\t\t\tdestmaskstring = \"\";\n\t\t\t\t\t\t\tif (desc.tokens[i].dest.mask & 1) {\n\t\t\t\t\t\t\t\tndest++;\n\t\t\t\t\t\t\t\tdestmaskstring += \"x\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (desc.tokens[i].dest.mask & 2) {\n\t\t\t\t\t\t\t\tndest++;\n\t\t\t\t\t\t\t\tdestmaskstring += \"y\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (desc.tokens[i].dest.mask & 4) {\n\t\t\t\t\t\t\t\tndest++;\n\t\t\t\t\t\t\t\tdestmaskstring += \"z\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (desc.tokens[i].dest.mask & 8) {\n\t\t\t\t\t\t\t\tndest++;\n\t\t\t\t\t\t\t\tdestmaskstring += \"w\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdestregstring += \".\" + destmaskstring;\n\t\t\t\t\t\t\tswitch (ndest) {\n\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\tdestcaststring = \"float\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\tdestcaststring = \"vec2\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\tdestcaststring = \"vec3\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tthrow \"Unexpected destination mask\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdestcaststring = \"vec4\";\n\t\t\t\t\t\t\tdestmaskstring = \"xyzw\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tline = line.replace(\"%dest\", destregstring);\n\t\t\t\t\tline = line.replace(\"%cast\", destcaststring);\n\t\t\t\t\tline = line.replace(\"%dm\", destmaskstring);\n\t\t\t\t}\n\t\t\t\tvar dwm:number = 0xf;\n\t\t\t\tif (!lutentry.ndwm && lutentry.dest && desc.tokens[i].dest) {\n\t\t\t\t\tdwm = desc.tokens[i].dest.mask;\n\t\t\t\t}\n\t\t\t\tif (desc.tokens[i].a) {\n\t\t\t\t\tline = line.replace(\"%a\", this.sourcetostring(desc.tokens[i].a, 0, dwm, lutentry.scalar, desc, tag));\n\t\t\t\t}\n\t\t\t\tif (desc.tokens[i].b) {\n\t\t\t\t\tline = line.replace(\"%b\", this.sourcetostring(desc.tokens[i].b, sl, dwm, lutentry.scalar, desc, tag));\n\t\t\t\t\tif (desc.tokens[i].b.regtype == 0x5) {\n\t\t\t\t\t\t// sampler dim\n\t\t\t\t\t\tvar texdim = [\"2D\", \"Cube\", \"3D\"][desc.tokens[i].b.dim];\n\t\t\t\t\t\tvar texsize = [\"vec2\", \"vec3\", \"vec3\"][desc.tokens[i].b.dim];\n\t\t\t\t\t\tline = line.replace(\"%texdim\", texdim);\n\t\t\t\t\t\tline = line.replace(\"%texsize\", texsize);\n\t\t\t\t\t\tvar texlod:string = \"\";\n\t\t\t\t\t\tline = line.replace(\"%lod\", texlod);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbody += line;\n\t\t\t}\n\t\t}\n\n\t\t// adjust z from opengl range of -1..1 to 0..1 as in d3d, this also enforces a left handed coordinate system\n\t\tif (desc.header.type == \"vertex\") {\n\t\t\tbody += \"  gl_Position = vec4(outpos.x, outpos.y, outpos.z*2.0 - outpos.w, outpos.w);\\n\";\n\t\t}\n\n\t\t//flag based switch\n\t\tif (derivatives && desc.header.type == \"fragment\") {\n\t\t\theader = \"#extension GL_OES_standard_derivatives : enable\\n\" + header;\n\t\t}\n\n\t\t// clamp fragment depth\n\t\tif (desc.writedepth) {\n\t\t\tbody += \"  gl_FragDepth = clamp(tmp_FragDepth,0.0,1.0);\\n\";\n\t\t}\n\n\t\t// close main\n\t\tbody += \"}\\n\";\n\n\t\treturn header + body;\n\t}\n\n\tpublic regtostring(regtype:number, regnum:number, desc:Description, tag)\n\t{\n\t\tswitch (regtype) {\n\t\t\tcase 0x0:\n\t\t\t\treturn \"va\" + regnum;\n\t\t\tcase 0x1:\n\t\t\t\tif (desc.hasindirect && desc.header.type == \"vertex\") {\n\t\t\t\t\treturn \"vcarrr[\" + regnum + \"]\";\n\t\t\t\t} else {\n\t\t\t\t\treturn tag + \"c\" + regnum;\n\t\t\t\t}\n\t\t\tcase 0x2:\n\t\t\t\treturn tag + \"t\" + regnum;\n\t\t\tcase 0x3:\n\t\t\t\treturn desc.header.type == \"vertex\"? \"outpos\" : \"gl_FragColor\";\n\t\t\tcase 0x4:\n\t\t\t\treturn \"vi\" + regnum;\n\t\t\tcase 0x5:\n\t\t\t\treturn \"fs\" + regnum;\n\t\t\tcase 0x6:\n\t\t\t\treturn \"tmp_FragDepth\";\n\t\t\tdefault:\n\t\t\t\tthrow \"Unknown register type\";\n\t\t}\n\t}\n\n\tpublic sourcetostring(s, subline, dwm, isscalar, desc, tag):string\n\t{\n\t\tvar swiz = [ \"x\", \"y\", \"z\", \"w\" ];\n\t\tvar r;\n\n\t\tif (s.indirectflag) {\n\t\t\tr = \"vcarrr[int(\" + this.regtostring(s.indexregtype, s.regnum, desc, tag) + \".\" + swiz[s.indexselect] + \")\";\n\t\t\tvar realofs = subline + s.indexoffset;\n\t\t\tif (realofs < 0) r += realofs.toString();\n\t\t\tif (realofs > 0) r += \"+\" + realofs.toString();\n\t\t\tr += \"]\";\n\t\t} else {\n\t\t\tr = this.regtostring(s.regtype, s.regnum + subline, desc, tag);\n\t\t}\n\n\t\t// samplers never add swizzle        \n\t\tif (s.regtype == 0x5) {\n\t\t\treturn r;\n\t\t}\n\n\t\t// scalar, first component only\n\t\tif (isscalar) {\n\t\t\treturn r + \".\" + swiz[(s.swizzle >> 0) & 3];\n\t\t}\n\n\t\t// identity\n\t\tif (s.swizzle == 0xe4 && dwm == 0xf) {\n\t\t\treturn r;\n\t\t}\n\n\t\t// with destination write mask folded in\n\t\tr += \".\";\n\t\tif (dwm & 1) r += swiz[(s.swizzle >> 0) & 3];\n\t\tif (dwm & 2) r += swiz[(s.swizzle >> 2) & 3];\n\t\tif (dwm & 4) r += swiz[(s.swizzle >> 4) & 3];\n\t\tif (dwm & 8) r += swiz[(s.swizzle >> 6) & 3];\n\t\treturn r;\n\t}\n}\n\nexport = AGLSLParser;",
    "import Header\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Header\");\nimport Token\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Token\");\n\nclass Description\n{\n\tpublic regread:any[] = [\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[]\n\t];\n\tpublic regwrite:any[] = [\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[]\n\t];\n\tpublic hasindirect:boolean = false;\n\tpublic writedepth:boolean = false;\n\tpublic hasmatrix:boolean = false;\n\tpublic samplers:any[] = [];\n\n\t// added due to dynamic assignment 3*0xFFFFFFuuuu\n\tpublic tokens:Token[] = [];\n\tpublic header:Header = new Header();\n\n\tconstructor()\n\t{\n\t}\n}\n\nexport = Description;",
    "class Destination\n{\n\tpublic mask:number = 0;\n\tpublic regnum:number = 0;\n\tpublic regtype:number = 0;\n\tpublic dim:number = 0;\n\n\tpublic indexoffset:number = 0;\n\tpublic swizzle:number = 0;\n\tpublic lodbiad:number = 0;\n\tpublic readmode:number = 0;\n\tpublic special:number = 0;\n\tpublic wrap:number = 0;\n\tpublic filter:number = 0;\n\n\tpublic indexregtype:number = 0;\n\tpublic indexselect:number = 0;\n\tpublic indirectflag:number = 0;\n\n\tconstructor()\n\t{\n\t}\n}\n\nexport = Destination;",
    "class Header\n{\n\tpublic progid:number = 0;\n\tpublic version:number = 0;\n\tpublic type:string = \"\";\n\n\tconstructor()\n\t{\n\t}\n}\n\nexport = Header;",
    "import OpLUT\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/OpLUT\");\n\nclass Mapping\n{\n\tstatic agal2glsllut:Array<OpLUT> = [\n\n\t\t//         s \t\t\t\t\t\t\t\t\t\t\t\tflags   dest    a     b \t    mw \t  mh    ndwm  scale dm\t  lod\n\t\tnew OpLUT(\"%dest = %cast(%a);\\n\", 0, true, true, false, null, null, null, null, null, null), //mov                          //0\n\t\tnew OpLUT(\"%dest = %cast(%a + %b);\\n\", 0, true, true, true, null, null, null, null, null, null), //add                      //1\n\t\tnew OpLUT(\"%dest = %cast(%a - %b);\\n\", 0, true, true, true, null, null, null, null, null, null), //sub                      //2\n\t\tnew OpLUT(\"%dest = %cast(%a * %b);\\n\", 0, true, true, true, null, null, null, null, null, null), //mul                      //3\n\t\tnew OpLUT(\"%dest = %cast(%a / %b);\\n\", 0, true, true, true, null, null, null, null, null, null), //div                      //4\n\t\tnew OpLUT(\"%dest = %cast(1.0) / %a;\\n\", 0, true, true, false, null, null, null, null, null, null), //rcp                    //5\n\t\tnew OpLUT(\"%dest = %cast(min(%a,%b));\\n\", 0, true, true, true, null, null, null, null, null, null), //min                   //6\n\t\tnew OpLUT(\"%dest = %cast(max(%a,%b));\\n\", 0, true, true, true, null, null, null, null, null, null), //max                   //7\n\t\tnew OpLUT(\"%dest = %cast(fract(%a));\\n\", 0, true, true, false, null, null, null, null, null, null), //frc                   //8\n\t\tnew OpLUT(\"%dest = %cast(sqrt(abs(%a)));\\n\", 0, true, true, false, null, null, null, null, null, null), //sqt               //9\n\t\tnew OpLUT(\"%dest = %cast(inversesqrt(abs(%a)));\\n\", 0, true, true, false, null, null, null, null, null, null), //rsq        //10\n\t\tnew OpLUT(\"%dest = %cast(pow(abs(%a),%b));\\n\", 0, true, true, true, null, null, null, null, null, null), //pow              //11\n\t\tnew OpLUT(\"%dest = %cast(log2(abs(%a)));\\n\", 0, true, true, false, null, null, null, null, null, null), //log               //12\n\t\tnew OpLUT(\"%dest = %cast(exp2(%a));\\n\", 0, true, true, false, null, null, null, null, null, null), //exp                    //13\n\n\t\t//         s \t\t\t\t\t\t\t\t\t\t\t\tflags  \tdest    a     b \t    mw \t  mh    ndwm  scale dm\t  lod\n\t\tnew OpLUT(\"%dest = %cast(normalize(vec3( %a ) ));\\n\", 0, true, true, false, null, null, true, null, null, null), //nrm      //14\n\t\tnew OpLUT(\"%dest = %cast(sin(%a));\\n\", 0, true, true, false, null, null, null, null, null, null), //sin                     //15\n\t\tnew OpLUT(\"%dest = %cast(cos(%a));\\n\", 0, true, true, false, null, null, null, null, null, null), //cos                     //16\n\t\tnew OpLUT(\"%dest = %cast(cross(vec3(%a),vec3(%b)));\\n\", 0, true, true, true, null, null, true, null, null, null), //crs     //17\n\t\tnew OpLUT(\"%dest = %cast(dot(vec3(%a),vec3(%b)));\\n\", 0, true, true, true, null, null, true, null, null, null), //dp3       //18\n\t\tnew OpLUT(\"%dest = %cast(dot(vec4(%a),vec4(%b)));\\n\", 0, true, true, true, null, null, true, null, null, null), //dp4       //19\n\t\tnew OpLUT(\"%dest = %cast(abs(%a));\\n\", 0, true, true, false, null, null, null, null, null, null), //abs                     //20\n\t\tnew OpLUT(\"%dest = %cast(%a * -1.0);\\n\", 0, true, true, false, null, null, null, null, null, null), //neg                   //21\n\t\tnew OpLUT(\"%dest = %cast(clamp(%a,0.0,1.0));\\n\", 0, true, true, false, null, null, null, null, null, null), //sat           //22\n\t\tnew OpLUT(\"%dest = %cast(dot(vec3(%a),vec3(%b)));\\n\", null, true, true, true, 3, 3, true, null, null, null), //m33          //23\n\t\tnew OpLUT(\"%dest = %cast(dot(vec4(%a),vec4(%b)));\\n\", null, true, true, true, 4, 4, true, null, null, null), //m44          //24\n\t\tnew OpLUT(\"%dest = %cast(dot(vec4(%a),vec4(%b)));\\n\", null, true, true, true, 4, 3, true, null, null, null), //m43          //25\n\t\t//s:string, flags:number, dest:boolean, a:boolean, b:boolean, matrixwidth:number, matrixheight:number, ndwm:boolean, scaler:boolean, dm:boolean, lod:boolean\n\t\tnew OpLUT(\"%dest = %cast(dFdx(%a));\\n\", 0, true, true, false, null, null, null, null, null, null), //dFdx                   //26\n\t\tnew OpLUT(\"%dest = %cast(dFdy(%a));\\n\", 0, true, true, false, null, null, null, null, null, null), //dFdy                   //27\n\t\tnew OpLUT(\"if (float(%a)==float(%b)) {;\\n\", 0, false, true, true, null, null, null, true, null, null), new OpLUT(\"if (float(%a)!=float(%b)) {;\\n\", 0, false, true, true, null, null, null, true, null, null), new OpLUT(\"if (float(%a)>=float(%b)) {;\\n\", 0, false, true, true, null, null, null, true, null, null), new OpLUT(\"if (float(%a)<float(%b)) {;\\n\", 0, false, true, true, null, null, null, true, null, null), new OpLUT(\"} else {;\\n\", 0, false, false, false, null, null, null, null, null, null), new OpLUT(\"};\\n\", 0, false, false, false, null, null, null, null, null, null), new OpLUT(null, null, null, null, false, null, null, null, null, null, null), new OpLUT(null, null, null, null, false, null, null, null, null, null, null), new OpLUT(null, null, null, null, false, null, null, null, null, null, null), new OpLUT(null, null, null, null, false, null, null, null, null, null, null),\n\n\t\t//         s \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflags  \tdest    a     b \t    mw \t  mh    ndwm  scale dm\t  lod\n\t\tnew OpLUT(\"%dest = %cast(texture%texdimLod(%b,%texsize(%a)).%dm);\\n\", null, true, true, true, null, null, null, null, true, null), new OpLUT(\"if ( float(%a)<0.0 ) discard;\\n\", null, false, true, false, null, null, null, true, null, null), new OpLUT(\"%dest = %cast(texture%texdim(%b,%texsize(%a)%lod).%dm);\\n\", null, true, true, true, null, null, true, null, true, true), new OpLUT(\"%dest = %cast(greaterThanEqual(%a,%b).%dm);\\n\", 0, true, true, true, null, null, true, null, true, null), new OpLUT(\"%dest = %cast(lessThan(%a,%b).%dm);\\n\", 0, true, true, true, null, null, true, null, true, null), new OpLUT(\"%dest = %cast(sign(%a));\\n\", 0, true, true, false, null, null, null, null, null, null), new OpLUT(\"%dest = %cast(equal(%a,%b).%dm);\\n\", 0, true, true, true, null, null, true, null, true, null), new OpLUT(\"%dest = %cast(notEqual(%a,%b).%dm);\\n\", 0, true, true, true, null, null, true, null, true, null)\n\n\t];\n\n\t//TODO: get rid of hack that fixes including definition file\n\tconstructor(include?:OpLUT)\n\t{\n\n\t}\n}\n\nexport = Mapping;",
    "class OpLUT\n{\n\n\tpublic s:string;\n\tpublic flags:number;\n\tpublic dest:boolean;\n\tpublic a:boolean;\n\tpublic b:boolean;\n\tpublic matrixwidth:number;\n\tpublic matrixheight:number;\n\tpublic ndwm:boolean;\n\tpublic scalar:boolean;\n\tpublic dm:boolean;\n\tpublic lod:boolean;\n\n\tconstructor(s:string, flags:number, dest:boolean, a:boolean, b:boolean, matrixwidth:number, matrixheight:number, ndwm:boolean, scaler:boolean, dm:boolean, lod:boolean)\n\t{\n\t\tthis.s = s;\n\t\tthis.flags = flags;\n\t\tthis.dest = dest;\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.matrixwidth = matrixwidth;\n\t\tthis.matrixheight = matrixheight;\n\t\tthis.ndwm = ndwm;\n\t\tthis.scalar = scaler;\n\t\tthis.dm = dm;\n\t\tthis.lod = lod;\n\t}\n}\n\nexport = OpLUT;",
    "class Sampler\n{\n\tpublic lodbias:number = 0;\n\tpublic dim:number = 0;\n\tpublic readmode:number = 0;\n\tpublic special:number = 0;\n\tpublic wrap:number = 0;\n\tpublic mipmap:number = 0;\n\tpublic filter:number = 0;\n\n\tconstructor()\n\t{\n\t}\n}\n\nexport = Sampler;",
    "import Destination\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Destination\");\n\nclass Token\n{\n\tpublic dest:Destination = new Destination();\n\tpublic opcode:number = 0;\n\tpublic a:Destination = new Destination();\n\tpublic b:Destination = new Destination();\n\n\tconstructor()\n\t{\n\t}\n}\n\nexport = Token;",
    "import Sampler\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/Sampler\");\nimport Opcode\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/Opcode\");\nimport OpcodeMap\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/OpcodeMap\");\nimport Part\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/Part\");\nimport RegMap\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/RegMap\");\nimport SamplerMap\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/SamplerMap\");\n\n\nclass AGALMiniAssembler\n{\n\tpublic r:Object;\n\tpublic cur:Part;\n\n\tconstructor()\n\t{\n\t\tthis.r = {};\n\t\tthis.cur = new Part();\n\t}\n\n\tpublic assemble(source:string, ext_part = null, ext_version = null)\n\t{\n\t\tif (!ext_version) {\n\t\t\text_version = 1;\n\t\t}\n\n\t\tif (ext_part) {\n\t\t\tthis.addHeader(ext_part, ext_version);\n\t\t}\n\n\t\tvar lines = source.replace(/[\\f\\n\\r\\v]+/g, \"\\n\").split(\"\\n\"); // handle breaks, then split into lines\n\n\t\tfor (var i in lines) {\n\t\t\tthis.processLine(lines[i], i);\n\t\t}\n\n\t\treturn this.r;\n\t}\n\n\tprivate processLine(line, linenr)\n\t{\n\t\tvar startcomment:number = line.search(\"//\");  // remove comments\n\t\tif (startcomment != -1) {\n\t\t\tline = line.slice(0, startcomment);\n\t\t}\n\t\tline = line.replace(/^\\s+|\\s+$/g, \"\"); // remove outer space\n\t\tif (!(line.length > 0 )) {\n\t\t\treturn;\n\t\t}\n\t\tvar optsi:number = line.search(/<.*>/g); // split of options part <*> if there\n\t\tvar opts:string[] = null;\n\t\tif (optsi != -1) {\n\t\t\topts = line.slice(optsi).match(/([\\w\\.\\-\\+]+)/gi);\n\t\t\tline = line.slice(0, optsi);\n\t\t}\n\n\t\t// get opcode/command\t\t\t\t            \n\t\tvar tokens = line.match(/([\\w\\.\\+\\[\\]]+)/gi); // get tokens in line\n\t\tif (!tokens || tokens.length < 1) {\n\t\t\tif (line.length >= 3) {\n\t\t\t\tconsole.log(\"Warning: bad line \" + linenr + \": \" + line);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t//console.log ( linenr, line, cur, tokens ); \n\t\tswitch (tokens[0]) {\n\t\t\tcase \"part\":\n\t\t\t\tthis.addHeader(tokens[1], Number(tokens[2]));\n\t\t\t\tbreak;\n\t\t\tcase \"endpart\":\n\t\t\t\tif (!this.cur) {\n\t\t\t\t\tthrow \"Unexpected endpart\";\n\t\t\t\t}\n\t\t\t\tthis.cur.data.position = 0;\n\t\t\t\tthis.cur = null;\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\tif (!this.cur) {\n\t\t\t\t\tconsole.log(\"Warning: bad line \" + linenr + \": \" + line + \" (Outside of any part definition)\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this.cur.name == \"comment\") {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar op:Opcode = <Opcode> OpcodeMap.map[tokens[0]];\n\t\t\t\tif (!op) {\n\t\t\t\t\tthrow \"Bad opcode \" + tokens[0] + \" \" + linenr + \": \" + line;\n\t\t\t\t}\n\t\t\t\t// console.log( 'AGALMiniAssembler' , 'op' , op );\n\n\t\t\t\tthis.emitOpcode(this.cur, op.opcode);\n\t\t\t\tvar ti:number = 1;\n\t\t\t\tif (op.dest && op.dest != \"none\") {\n\t\t\t\t\tif (!this.emitDest(this.cur, tokens[ti++], op.dest)) {\n\t\t\t\t\t\tthrow \"Bad destination register \" + tokens[ti - 1] + \" \" + linenr + \": \" + line;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.emitZeroDword(this.cur);\n\t\t\t\t}\n\n\t\t\t\tif (op.a && op.a.format != \"none\") {\n\t\t\t\t\tif (!this.emitSource(this.cur, tokens[ti++], op.a)) throw \"Bad source register \" + tokens[ti - 1] + \" \" + linenr + \": \" + line;\n\t\t\t\t} else {\n\t\t\t\t\tthis.emitZeroQword(this.cur);\n\t\t\t\t}\n\n\t\t\t\tif (op.b && op.b.format != \"none\") {\n\t\t\t\t\tif (op.b.format == \"sampler\") {\n\t\t\t\t\t\tif (!this.emitSampler(this.cur, tokens[ti++], op.b, opts)) {\n\t\t\t\t\t\t\tthrow \"Bad sampler register \" + tokens[ti - 1] + \" \" + linenr + \": \" + line;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!this.emitSource(this.cur, tokens[ti++], op.b)) {\n\t\t\t\t\t\t\tthrow \"Bad source register \" + tokens[ti - 1] + \" \" + linenr + \": \" + line;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.emitZeroQword(this.cur);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpublic emitHeader(pr:Part)\n\t{\n\t\tpr.data.writeUnsignedByte(0xa0); \t// tag version\n\t\tpr.data.writeUnsignedInt(pr.version);\n\t\tif (pr.version >= 0x10) {\n\t\t\tpr.data.writeUnsignedByte(0); // align, for higher versions\n\t\t}\n\t\tpr.data.writeUnsignedByte(0xa1);\t\t// tag program id\n\t\tswitch (pr.name) {\n\t\t\tcase \"fragment\" :\n\t\t\t\tpr.data.writeUnsignedByte(1);\n\t\t\t\tbreak;\n\t\t\tcase \"vertex\" :\n\t\t\t\tpr.data.writeUnsignedByte(0);\n\t\t\t\tbreak;\n\t\t\tcase \"cpu\" :\n\t\t\t\tpr.data.writeUnsignedByte(2);\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tpr.data.writeUnsignedByte(0xff);\n\t\t\t\tbreak; // unknown/comment\n\t\t}\n\t}\n\n\tpublic emitOpcode(pr:Part, opcode)\n\t{\n\t\tpr.data.writeUnsignedInt(opcode);\n\t\t//console.log ( \"Emit opcode: \", opcode ); \n\t}\n\n\tpublic emitZeroDword(pr:Part)\n\t{\n\t\tpr.data.writeUnsignedInt(0);\n\t}\n\n\tpublic emitZeroQword(pr)\n\t{\n\t\tpr.data.writeUnsignedInt(0);\n\t\tpr.data.writeUnsignedInt(0);\n\t}\n\n\tpublic emitDest(pr, token, opdest)\n\t{\n\n\t\t//console.log( 'AGALMiniAssembler' , 'emitDest' , 'RegMap.map' , RegMap.map);\n\t\tvar reg = token.match(/([fov]?[tpocidavs])(\\d*)(\\.[xyzw]{1,4})?/i); // g1: regname, g2:regnum, g3:mask\n\n\t\t// console.log( 'AGALMiniAssembler' , 'emitDest' , 'reg' , reg , reg[1] , RegMap.map[reg[1]] );\n\t\t// console.log( 'AGALMiniAssembler' , 'emitDest' , 'RegMap.map[reg[1]]' , RegMap.map[reg[1]] , 'bool' , !RegMap.map[reg[1]] ) ;\n\n\t\tif (!RegMap.map[reg[1]]) return false;\n\t\tvar em = { num:reg[2]? reg[2] : 0, code:RegMap.map[reg[1]].code, mask:this.stringToMask(reg[3]) };\n\t\tpr.data.writeUnsignedShort(em.num);\n\t\tpr.data.writeUnsignedByte(em.mask);\n\t\tpr.data.writeUnsignedByte(em.code);\n\t\t//console.log ( \"  Emit dest: \", em );\n\t\treturn true;\n\t}\n\n\tpublic stringToMask(s:string):number\n\t{\n\t\tif (!s) return 0xf;\n\t\tvar r = 0;\n\t\tif (s.indexOf(\"x\") != -1) r |= 1;\n\t\tif (s.indexOf(\"y\") != -1) r |= 2;\n\t\tif (s.indexOf(\"z\") != -1) r |= 4;\n\t\tif (s.indexOf(\"w\") != -1) r |= 8;\n\t\treturn r;\n\t}\n\n\tpublic stringToSwizzle(s)\n\t{\n\t\tif (!s) {\n\t\t\treturn 0xe4;\n\t\t}\n\t\tvar chartoindex = { x:0, y:1, z:2, w:3 };\n\t\tvar sw = 0;\n\n\t\tif (s.charAt(0) != \".\") {\n\t\t\tthrow \"Missing . for swizzle\";\n\t\t}\n\n\t\tif (s.length > 1) {\n\t\t\tsw |= chartoindex[s.charAt(1)];\n\t\t}\n\n\t\tif (s.length > 2) {\n\t\t\tsw |= chartoindex[s.charAt(2)] << 2;\n\t\t} else {\n\t\t\tsw |= (sw & 3) << 2;\n\t\t}\n\n\t\tif (s.length > 3) {\n\t\t\tsw |= chartoindex[s.charAt(3)] << 4;\n\t\t} else {\n\t\t\tsw |= (sw & (3 << 2)) << 2;\n\t\t}\n\n\t\tif (s.length > 4) {\n\t\t\tsw |= chartoindex[s.charAt(4)] << 6;\n\t\t} else {\n\t\t\tsw |= (sw & (3 << 4)) << 2;\n\t\t}\n\n\t\treturn sw;\n\t}\n\n\tpublic emitSampler(pr:Part, token, opsrc, opts)\n\t{\n\t\tvar reg:string[] = token.match(/fs(\\d*)/i); // g1:regnum\n\t\tif (!reg || !reg[1]) {\n\t\t\treturn false;\n\t\t}\n\t\tpr.data.writeUnsignedShort(parseInt(reg[1]));\n\t\tpr.data.writeUnsignedByte(0);   // bias\n\t\tpr.data.writeUnsignedByte(0);\n\t\t/*\n\t\t pr.data.writeUnsignedByte ( 0x5 );\n\t\t pr.data.writeUnsignedByte ( 0 );   // readmode, dim\n\t\t pr.data.writeUnsignedByte ( 0 );   // special, wrap\n\t\t pr.data.writeUnsignedByte ( 0 );   // mip, filter\n\t\t */\n\t\tvar samplerbits:number = 0x5;\n\t\tvar sampleroptset:number = 0;\n\t\tfor (var i:number = 0; i < opts.length; i++) {\n\t\t\tvar o:Sampler = <Sampler> SamplerMap.map[ opts[i].toLowerCase() ];\n\n\t\t\t//console.log( 'AGALMiniAssembler' , 'emitSampler' , 'SampleMap opt:' , o , '<-------- WATCH FOR THIS');\n\n\t\t\tif (o) {\n\t\t\t\tif (((sampleroptset >> o.shift) & o.mask) != 0) {\n\t\t\t\t\tconsole.log(\"Warning, duplicate sampler option\");\n\t\t\t\t}\n\t\t\t\tsampleroptset |= o.mask << o.shift;\n\t\t\t\tsamplerbits &= ~(o.mask << o.shift);\n\t\t\t\tsamplerbits |= o.value << o.shift;\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Warning, unknown sampler option: \", opts[i]);\n\t\t\t\t// todo bias\n\t\t\t}\n\t\t}\n\t\tpr.data.writeUnsignedInt(samplerbits);\n\t\treturn true;\n\t}\n\n\tpublic emitSource(pr, token, opsrc)\n\t{\n\t\tvar indexed = token.match(/vc\\[(v[tcai])(\\d+)\\.([xyzw])([\\+\\-]\\d+)?\\](\\.[xyzw]{1,4})?/i); // g1: indexregname, g2:indexregnum, g3:select, [g4:offset], [g5:swizzle]\n\t\tvar reg;\n\t\tif (indexed) {\n\t\t\tif (!RegMap.map[indexed[1]]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar selindex = { x:0, y:1, z:2, w:3 };\n\t\t\tvar em:any = { num:indexed[2] | 0, code:RegMap.map[indexed[1]].code, swizzle:this.stringToSwizzle(indexed[5]), select:selindex[indexed[3]], offset:indexed[4] | 0 };\n\t\t\tpr.data.writeUnsignedShort(em.num);\n\t\t\tpr.data.writeByte(em.offset);\n\t\t\tpr.data.writeUnsignedByte(em.swizzle);\n\t\t\tpr.data.writeUnsignedByte(0x1); // constant reg\n\t\t\tpr.data.writeUnsignedByte(em.code);\n\t\t\tpr.data.writeUnsignedByte(em.select);\n\t\t\tpr.data.writeUnsignedByte(1 << 7);\n\t\t} else {\n\t\t\treg = token.match(/([fov]?[tpocidavs])(\\d*)(\\.[xyzw]{1,4})?/i); // g1: regname, g2:regnum, g3:swizzle\n\t\t\tif (!RegMap.map[reg[1]]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar em:any = { num:reg[2] | 0, code:RegMap.map[reg[1]].code, swizzle:this.stringToSwizzle(reg[3]) };\n\t\t\tpr.data.writeUnsignedShort(em.num);\n\t\t\tpr.data.writeUnsignedByte(0);\n\t\t\tpr.data.writeUnsignedByte(em.swizzle);\n\t\t\tpr.data.writeUnsignedByte(em.code);\n\t\t\tpr.data.writeUnsignedByte(0);\n\t\t\tpr.data.writeUnsignedByte(0);\n\t\t\tpr.data.writeUnsignedByte(0);\n\t\t\t//console.log ( \"  Emit source: \", em, pr.data.length );\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic addHeader(partname, version)\n\t{\n\t\tif (!version) {\n\t\t\tversion = 1;\n\t\t}\n\t\tif (this.r[partname] == undefined) {\n\t\t\tthis.r[partname] = new Part(partname, version);\n\t\t\tthis.emitHeader(this.r[ partname ]);\n\t\t} else if (this.r[partname].version != version) {\n\t\t\tthrow \"Multiple versions for part \" + partname;\n\t\t}\n\t\tthis.cur = this.r[partname];\n\t}\n}\n\nexport = AGALMiniAssembler;",
    "class FS\n{\n\tpublic format:string;\n\tpublic size:number;\n}\n\nexport = FS;\n",
    "class Flags\n{\n\tpublic simple:boolean;\n\tpublic horizontal:boolean;\n\tpublic fragonly:boolean;\n\tpublic matrix:boolean;\n}\n\nexport = Flags;\n",
    "import Opcode\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/Opcode\");\n\nclass OpcodeMap\n{\n\t// dest:\t\t\t\t\t  \t\t\t\t\t   string,  aformat, asize, bformat,   bsize, opcode, simple, horizontal, fragonly   matrix\n\t/*\n\t public static mov:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x00,   true,   null,       null,      null );\n\t public static add:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x01,   true,   null,       null,      null );\n\n\t public static sub:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x02,   true,   null,       null,      null );\n\t public static mul:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x03,   true,   null,       null,      null );\n\t public static div:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x04,   true,   null,       null,      null );\n\t public static rcp:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x05,   true,   null,       null,      null );\n\t public static min:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x06,   true,   null,       null,      null );\n\t public static max:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x07,   true,   null,       null,      null );\n\t public static frc:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x08,   true,   null,       null,      null );\n\t public static sqt:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x09,   true,   null,       null,      null );\n\t public static rsq:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x0a,   true,   null,       null,      null );\n\t public static pow:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x0b,   true,   null,       null,      null );\n\t public static log:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x0c,   true,   null,       null,      null );\n\t public static exp:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x0d,   true,   null,       null,      null );\n\t public static nrm:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x0e,   true,   null,       null,      null );\n\t public static sin:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x0f,   true,   null,       null,      null );\n\t public static cos:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x10,   true,   null,       null,      null );\n\t public static crs:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x11,   true,   true,       null,      null );\n\t public static dp3:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x12,   true,   true,       null,      null );\n\t public static dp4:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x13,   true,   true,       null,      null );\n\t public static abs:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x14,   true,   null,       null,      null );\n\t public static neg:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x15,   true,   null,       null,      null );\n\t public static sat:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"none\",    0,     0x16,   true,   null,       null,      null );\n\n\t public static ted:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"sampler\", 1,     0x26,   true,   null,       true,      null );\n\t public static kil:Opcode = new Opcode( \"none\",   \"scalar\", 1,    \"none\",    0,     0x27,   true,   null,       true,      null );\n\t public static tex:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"sampler\", 1,     0x28,   true,   null,       true,      null );\n\n\t public static m33:Opcode = new Opcode( \"vector\", \"matrix\", 3,    \"vector\",  3,     0x17,   true,   null,       null,      true );\n\t public static m44:Opcode = new Opcode( \"vector\", \"matrix\", 4,    \"vector\",  4,     0x18,   true,   null,       null,      true );\n\t public static m43:Opcode = new Opcode( \"vector\", \"matrix\", 3,    \"vector\",  4,     0x19,   true,   null,       null,      true );\n\n\t public static sge:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x29,   true,   null,       null,      null );\n\t public static slt:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x2a,   true,   null,       null,      null );\n\t public static sgn:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x2b,   true,   null,       null,      null );\n\t public static seq:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x2c,   true,   null,       null,      null );\n\t public static sne:Opcode = new Opcode( \"vector\", \"vector\", 4,    \"vector\",  4,     0x2d,   true,   null,       null,      null );\n\t */\n\n\n\tprivate static _map:Object[];\n\n\tpublic static get map():Object[]\n\t{\n\n\t\tif (!OpcodeMap._map) {\n\n\t\t\tOpcodeMap._map = new Array<Object>();\n\t\t\tOpcodeMap._map['mov'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x00, true, null, null, null);     //0\n\t\t\tOpcodeMap._map['add'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x01, true, null, null, null);   //1\n\t\t\tOpcodeMap._map['sub'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x02, true, null, null, null);   //2\n\t\t\tOpcodeMap._map['mul'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x03, true, null, null, null);   //3\n\t\t\tOpcodeMap._map['div'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x04, true, null, null, null);   //4\n\t\t\tOpcodeMap._map['rcp'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x05, true, null, null, null);     //5\n\t\t\tOpcodeMap._map['min'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x06, true, null, null, null);   //6\n\t\t\tOpcodeMap._map['max'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x07, true, null, null, null);   //7\n\t\t\tOpcodeMap._map['frc'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x08, true, null, null, null);     //8\n\t\t\tOpcodeMap._map['sqt'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x09, true, null, null, null);     //9\n\t\t\tOpcodeMap._map['rsq'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x0a, true, null, null, null);     //10\n\t\t\tOpcodeMap._map['pow'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x0b, true, null, null, null);   //11\n\t\t\tOpcodeMap._map['log'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x0c, true, null, null, null);     //12\n\t\t\tOpcodeMap._map['exp'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x0d, true, null, null, null);     //13\n\t\t\tOpcodeMap._map['nrm'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x0e, true, null, null, null);     //14\n\t\t\tOpcodeMap._map['sin'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x0f, true, null, null, null);     //15\n\t\t\tOpcodeMap._map['cos'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x10, true, null, null, null);     //16\n\t\t\tOpcodeMap._map['crs'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x11, true, true, null, null);   //17\n\t\t\tOpcodeMap._map['dp3'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x12, true, true, null, null);   //18\n\t\t\tOpcodeMap._map['dp4'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x13, true, true, null, null);   //19\n\t\t\tOpcodeMap._map['abs'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x14, true, null, null, null);     //20\n\t\t\tOpcodeMap._map['neg'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x15, true, null, null, null);     //21\n\t\t\tOpcodeMap._map['sat'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x16, true, null, null, null);     //22\n\n\t\t\tOpcodeMap._map['ted'] = new Opcode(\"vector\", \"vector\", 4, \"sampler\", 1, 0x26, true, null, true, null);  //38\n\t\t\tOpcodeMap._map['kil'] = new Opcode(\"none\", \"scalar\", 1, \"none\", 0, 0x27, true, null, true, null);       //39\n\t\t\tOpcodeMap._map['tex'] = new Opcode(\"vector\", \"vector\", 4, \"sampler\", 1, 0x28, true, null, true, null);  //40\n\n\t\t\tOpcodeMap._map['m33'] = new Opcode(\"vector\", \"matrix\", 3, \"vector\", 3, 0x17, true, null, null, true);   //23\n\t\t\tOpcodeMap._map['m44'] = new Opcode(\"vector\", \"matrix\", 4, \"vector\", 4, 0x18, true, null, null, true);   //24\n\t\t\tOpcodeMap._map['m43'] = new Opcode(\"vector\", \"matrix\", 3, \"vector\", 4, 0x19, true, null, null, true);   //25\n\n            OpcodeMap._map['ddx'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x1a, true, null, true, null);   //26\n            OpcodeMap._map['ddy'] = new Opcode(\"vector\", \"vector\", 4, \"none\", 0, 0x1b, true, null, true, null);   //27\n\n\t\t\tOpcodeMap._map['sge'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x29, true, null, null, null);   //41\n\t\t\tOpcodeMap._map['slt'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x2a, true, null, null, null);   //42\n\t\t\tOpcodeMap._map['sgn'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x2b, true, null, null, null);   //43\n\t\t\tOpcodeMap._map['seq'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x2c, true, null, null, null);   //44\n\t\t\tOpcodeMap._map['sne'] = new Opcode(\"vector\", \"vector\", 4, \"vector\", 4, 0x2d, true, null, null, null);   //45\n\n\n\t\t}\n\n\t\treturn OpcodeMap._map;\n\n\t}\n\n\n\tconstructor()\n\t{\n\t}\n}\n\nexport = OpcodeMap;",
    "import Flags\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/Flags\");\nimport FS\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/FS\");\n\n/**\n *\n */\nclass Opcode\n{\n\tpublic dest:string;\n\tpublic a:FS;\n\tpublic b:FS;\n\tpublic opcode:number;\n\tpublic flags:Flags;\n\n\tconstructor(dest:string, aformat:string, asize:number, bformat:string, bsize:number, opcode:number, simple:boolean, horizontal:boolean, fragonly:boolean, matrix:boolean)\n\t{\n\t\tthis.a = new FS();\n\t\tthis.b = new FS();\n\t\tthis.flags = new Flags();\n\n\t\tthis.dest = dest;\n\t\tthis.a.format = aformat;\n\t\tthis.a.size = asize;\n\t\tthis.b.format = bformat;\n\t\tthis.b.size = bsize;\n\t\tthis.opcode = opcode;\n\t\tthis.flags.simple = simple;\n\t\tthis.flags.horizontal = horizontal;\n\t\tthis.flags.fragonly = fragonly;\n\t\tthis.flags.matrix = matrix;\n\t}\n}\n\nexport = Opcode;\n",
    "import ByteArray\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nclass Part\n{\n\tpublic name:string = \"\";\n\tpublic version:number = 0;\n\tpublic data:ByteArray;\n\n\tconstructor(name:string = null, version:number = null)\n\t{\n\t\tthis.name = name;\n\t\tthis.version = version;\n\t\tthis.data = new ByteArray();\n\t}\n}\n\nexport = Part;",
    "\nclass Reg\n{\n\n\tpublic code:number;\n\tpublic desc:string;\n\n\tconstructor(code:number, desc:string)\n\t{\n\t\tthis.code = code;\n\t\tthis.desc = desc;\n\t}\n}\n\nclass RegMap\n{\n\n\t/*\n\t public static map = [ new Reg( 0x00, \"vertex attribute\" ),\n\t new Reg( 0x01, \"fragment constant\" ),\n\t new Reg( 0x01, \"vertex constant\" ),\n\t new Reg( 0x02, \"fragment temporary\" ),\n\t new Reg( 0x02, \"vertex temporary\" ),\n\t new Reg( 0x03, \"vertex output\" ),\n\t new Reg( 0x03, \"vertex output\" ),\n\t new Reg( 0x03, \"fragment depth output\" ),\n\t new Reg( 0x03, \"fragment output\" ),\n\t new Reg( 0x03, \"fragment output\" ),\n\t new Reg( 0x04, \"varying\" ),\n\t new Reg( 0x04, \"varying output\" ),\n\t new Reg( 0x04, \"varying input\" ),\n\t new Reg( 0x05, \"sampler\" ) ];\n\t */\n\n\tprivate static _map:any[];\n\tpublic static get map():any[]\n\t{\n\n\t\tif (!RegMap._map) {\n\n\t\t\tRegMap._map = new Array<Object>();\n\t\t\tRegMap._map['va'] = new Reg(0x00, \"vertex attribute\");\n\t\t\tRegMap._map['fc'] = new Reg(0x01, \"fragment constant\");\n\t\t\tRegMap._map['vc'] = new Reg(0x01, \"vertex constant\")\n\t\t\tRegMap._map['ft'] = new Reg(0x02, \"fragment temporary\");\n\t\t\tRegMap._map['vt'] = new Reg(0x02, \"vertex temporary\");\n\t\t\tRegMap._map['vo'] = new Reg(0x03, \"vertex output\");\n\t\t\tRegMap._map['op'] = new Reg(0x03, \"vertex output\");\n\t\t\tRegMap._map['fd'] = new Reg(0x03, \"fragment depth output\");\n\t\t\tRegMap._map['fo'] = new Reg(0x03, \"fragment output\");\n\t\t\tRegMap._map['oc'] = new Reg(0x03, \"fragment output\");\n\t\t\tRegMap._map['v'] = new Reg(0x04, \"varying\")\n\t\t\tRegMap._map['vi'] = new Reg(0x04, \"varying output\");\n\t\t\tRegMap._map['fi'] = new Reg(0x04, \"varying input\");\n\t\t\tRegMap._map['fs'] = new Reg(0x05, \"sampler\");\n\n\n\t\t}\n\n\t\treturn RegMap._map;\n\n\t}\n\n\t/*\n\t public static va:Reg = new Reg( 0x00, \"vertex attribute\" );\n\t public static fc:Reg = new Reg( 0x01, \"fragment constant\" );\n\t public static vc:Reg = new Reg( 0x01, \"vertex constant\" );\n\t public static ft:Reg = new Reg( 0x02, \"fragment temporary\" );\n\t public static vt:Reg = new Reg( 0x02, \"vertex temporary\" );\n\t public static vo:Reg = new Reg( 0x03, \"vertex output\" );\n\t public static op:Reg = new Reg( 0x03, \"vertex output\" );\n\t public static fd:Reg = new Reg( 0x03, \"fragment depth output\" );\n\t public static fo:Reg = new Reg( 0x03, \"fragment output\" );\n\t public static oc:Reg = new Reg( 0x03, \"fragment output\" );\n\t public static v: Reg = new Reg( 0x04, \"varying\" );\n\t public static vi:Reg = new Reg( 0x04, \"varying output\" );\n\t public static fi:Reg = new Reg( 0x04, \"varying input\" );\n\t public static fs:Reg = new Reg( 0x05, \"sampler\" );\n\t */\n\tconstructor()\n\t{\n\t}\n}\n\nexport = RegMap;",
    "import Sampler\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/assembler/Sampler\");\n\nclass SamplerMap\n{\n\n\tprivate static _map:Object[];\n\n\tpublic static get map():Object[]\n\t{\n\n\t\tif (!SamplerMap._map) {\n\n\t\t\tSamplerMap._map = new Array<Object>();\n\t\t\tSamplerMap._map['rgba'] = new Sampler(8, 0xf, 0);\n\t\t\tSamplerMap._map['rg'] = new Sampler(8, 0xf, 5);\n\t\t\tSamplerMap._map['r'] = new Sampler(8, 0xf, 4);\n\t\t\tSamplerMap._map['compressed'] = new Sampler(8, 0xf, 1);\n\t\t\tSamplerMap._map['compressed_alpha'] = new Sampler(8, 0xf, 2);\n\t\t\tSamplerMap._map['dxt1'] = new Sampler(8, 0xf, 1);\n\t\t\tSamplerMap._map['dxt5'] = new Sampler(8, 0xf, 2);\n\n\t\t\t// dimension\n\t\t\tSamplerMap._map['2d'] = new Sampler(12, 0xf, 0);\n\t\t\tSamplerMap._map['cube'] = new Sampler(12, 0xf, 1);\n\t\t\tSamplerMap._map['3d'] = new Sampler(12, 0xf, 2);\n\n\t\t\t// special\n\t\t\tSamplerMap._map['centroid'] = new Sampler(16, 1, 1);\n\t\t\tSamplerMap._map['ignoresampler'] = new Sampler(16, 4, 4);\n\n\t\t\t// repeat\n\t\t\tSamplerMap._map['clamp'] = new Sampler(20, 0xf, 0);\n\t\t\tSamplerMap._map['repeat'] = new Sampler(20, 0xf, 1);\n\t\t\tSamplerMap._map['wrap'] = new Sampler(20, 0xf, 1);\n\n\t\t\t// mip\n\t\t\tSamplerMap._map['nomip'] = new Sampler(24, 0xf, 0);\n\t\t\tSamplerMap._map['mipnone'] = new Sampler(24, 0xf, 0);\n\t\t\tSamplerMap._map['mipnearest'] = new Sampler(24, 0xf, 1);\n\t\t\tSamplerMap._map['miplinear'] = new Sampler(24, 0xf, 2);\n\n\t\t\t// filter\n\t\t\tSamplerMap._map['nearest'] = new Sampler(28, 0xf, 0);\n\t\t\tSamplerMap._map['linear'] = new Sampler(28, 0xf, 1);\n\n\t\t}\n\n\t\treturn SamplerMap._map;\n\n\t}\n\n\t/*\n\t public static map =     [ new Sampler( 8, 0xf, 0 ),\n\t new Sampler( 8, 0xf, 5 ),\n\t new Sampler( 8, 0xf, 4 ),\n\t new Sampler( 8, 0xf, 1 ),\n\t new Sampler( 8, 0xf, 2 ),\n\t new Sampler( 8, 0xf, 1 ),\n\t new Sampler( 8, 0xf, 2 ),\n\n\t // dimension\n\t new Sampler( 12, 0xf, 0 ),\n\t new Sampler( 12, 0xf, 1 ),\n\t new Sampler( 12, 0xf, 2 ),\n\n\t // special\n\t new Sampler( 16, 1, 1 ),\n\t new Sampler( 16, 4, 4 ),\n\n\t // repeat\n\t new Sampler( 20, 0xf, 0 ),\n\t new Sampler( 20, 0xf, 1 ),\n\t new Sampler( 20, 0xf, 1 ),\n\n\t // mip\n\t new Sampler( 24, 0xf, 0 ),\n\t new Sampler( 24, 0xf, 0 ),\n\t new Sampler( 24, 0xf, 1 ),\n\t new Sampler( 24, 0xf, 2 ),\n\n\t // filter\n\t new Sampler( 28, 0xf, 0 ),\n\t new Sampler( 28, 0xf, 1 ) ]\n\t */\n\t/*\n\t public static rgba: Sampler = new Sampler( 8, 0xf, 0 );\n\t public static rg: Sampler = new Sampler( 8, 0xf, 5 );\n\t public static r: Sampler = new Sampler( 8, 0xf, 4 );\n\t public static compressed: Sampler = new Sampler( 8, 0xf, 1 );\n\t public static compressed_alpha: Sampler = new Sampler( 8, 0xf, 2 );\n\t public static dxt1: Sampler = new Sampler( 8, 0xf, 1 );\n\t public static dxt5: Sampler = new Sampler( 8, 0xf, 2 );\n\n\t // dimension\n\t public static sampler2d: Sampler = new Sampler( 12, 0xf, 0 );\n\t public static cube: Sampler = new Sampler( 12, 0xf, 1 );\n\t public static sampler3d: Sampler = new Sampler( 12, 0xf, 2 );\n\n\t // special\n\t public static centroid: Sampler = new Sampler( 16, 1, 1 );\n\t public static ignoresampler: Sampler = new Sampler( 16, 4, 4 );\n\n\t // repeat\n\t public static clamp: Sampler = new Sampler( 20, 0xf, 0 );\n\t public static repeat: Sampler = new Sampler( 20, 0xf, 1 );\n\t public static wrap: Sampler = new Sampler( 20, 0xf, 1 );\n\n\t // mip\n\t public static nomip: Sampler = new Sampler( 24, 0xf, 0 );\n\t public static mipnone: Sampler = new Sampler( 24, 0xf, 0 );\n\t public static mipnearest: Sampler = new Sampler( 24, 0xf, 1 );\n\t public static miplinear: Sampler = new Sampler( 24, 0xf, 2 );\n\n\t // filter\n\t public static nearest: Sampler = new Sampler( 28, 0xf, 0 );\n\t public static linear: Sampler = new Sampler( 28, 0xf, 1 );\n\t */\n\tconstructor()\n\t{\n\t}\n}\n\nexport = SamplerMap;",
    "class Sampler\n{\n\tpublic shift:number;\n\tpublic mask:number;\n\tpublic value:number;\n\n\tconstructor(shift:number, mask:number, value:number)\n\t{\n\t\tthis.shift = shift;\n\t\tthis.mask = mask;\n\t\tthis.value = value;\n\t}\n}\n\nexport = Sampler;",
    "import AttributesBuffer\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport AbstractionBase\t\t\t\t= require(\"awayjs-core/lib/library/AbstractionBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IIndexBuffer\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IIndexBuffer\");\nimport IVertexBuffer\t\t\t\t= require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\n\n/**\n *\n * @class away.pool.GL_AttributesBuffer\n */\nclass GL_AttributesBuffer extends AbstractionBase\n{\n\tpublic _indexBuffer:IIndexBuffer;\n\n\tpublic _vertexBuffer:IVertexBuffer;\n\n\tpublic _stage:Stage;\n\n\tpublic _attributesBuffer:AttributesBuffer;\n\n\tpublic _mipmap:boolean;\n\n\tpublic _invalid:boolean;\n\n\tconstructor(attributesBuffer:AttributesBuffer, stage:Stage)\n\t{\n\t\tsuper(attributesBuffer, stage);\n\n\t\tthis._stage = stage;\n\n\t\tthis._attributesBuffer = attributesBuffer;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tthis._attributesBuffer = null;\n\n\t\tif (this._indexBuffer) {\n\t\t\tthis._indexBuffer.dispose();\n\t\t\tthis._indexBuffer = null;\n\t\t}\n\n\t\tif (this._vertexBuffer) {\n\t\t\tthis._vertexBuffer.dispose();\n\t\t\tthis._vertexBuffer = null;\n\t\t}\n\t}\n\n\tpublic activate(index:number, size:number, dimensions:number, offset:number)\n\t{\n\t\tthis._stage.setVertexBuffer(index, this._getVertexBuffer(), size, dimensions, offset);\n\t}\n\n\tpublic draw(mode:string, firstIndex:number, numIndices:number)\n\t{\n\t\tthis._stage.context.drawIndices(mode, this._getIndexBuffer(), firstIndex, numIndices);\n\t}\n\n\tpublic _getIndexBuffer():IIndexBuffer\n\t{\n\t\tif (!this._indexBuffer) {\n\t\t\tthis._invalid = true;\n\t\t\tthis._indexBuffer = this._stage.context.createIndexBuffer(this._attributesBuffer.count*this._attributesBuffer.stride/2); //hardcoded assuming UintArray\n\t\t}\n\n\t\tif (this._invalid) {\n\t\t\tthis._invalid = false;\n\t\t\tthis._indexBuffer.uploadFromByteArray(this._attributesBuffer.buffer, 0, this._attributesBuffer.length);\n\t\t}\n\n\t\treturn this._indexBuffer;\n\t}\n\n\tpublic _getVertexBuffer():IVertexBuffer\n\t{\n\t\tif (!this._vertexBuffer) {\n\t\t\tthis._invalid = true;\n\t\t\tthis._vertexBuffer = this._stage.context.createVertexBuffer(this._attributesBuffer.count, this._attributesBuffer.stride);\n\t\t}\n\n\t\tif (this._invalid) {\n\t\t\tthis._invalid = false;\n\t\t\tthis._vertexBuffer.uploadFromByteArray(this._attributesBuffer.buffer, 0, this._attributesBuffer.count);\n\t\t}\n\n\t\treturn this._vertexBuffer;\n\t}\n}\n\nexport = GL_AttributesBuffer;",
    "class ContextGLBlendFactor\n{\n\tpublic static DESTINATION_ALPHA:string = \"destinationAlpha\";\n\tpublic static DESTINATION_COLOR:string = \"destinationColor\";\n\tpublic static ONE:string = \"one\";\n\tpublic static ONE_MINUS_DESTINATION_ALPHA:string = \"oneMinusDestinationAlpha\";\n\tpublic static ONE_MINUS_DESTINATION_COLOR:string = \"oneMinusDestinationColor\";\n\tpublic static ONE_MINUS_SOURCE_ALPHA:string = \"oneMinusSourceAlpha\";\n\tpublic static ONE_MINUS_SOURCE_COLOR:string = \"oneMinusSourceColor\";\n\tpublic static SOURCE_ALPHA:string = \"sourceAlpha\";\n\tpublic static SOURCE_COLOR:string = \"sourceColor\";\n\tpublic static ZERO:string = \"zero\";\n}\n\nexport = ContextGLBlendFactor;",
    "class ContextGLClearMask\n{\n\tstatic COLOR:number = 1;\n\tstatic DEPTH:number = 2;\n\tstatic STENCIL:number = 4;\n\tstatic ALL:number = ContextGLClearMask.COLOR | ContextGLClearMask.DEPTH | ContextGLClearMask.STENCIL;\n}\n\nexport = ContextGLClearMask;",
    "class ContextGLCompareMode\n{\n\tpublic static ALWAYS:string = \"always\";\n\tpublic static EQUAL:string = \"equal\";\n\tpublic static GREATER:string = \"greater\";\n\tpublic static GREATER_EQUAL:string = \"greaterEqual\";\n\tpublic static LESS:string = \"less\";\n\tpublic static LESS_EQUAL:string = \"lessEqual\";\n\tpublic static NEVER:string = \"never\";\n\tpublic static NOT_EQUAL:string = \"notEqual\";\n}\n\nexport = ContextGLCompareMode;",
    "class ContextGLDrawMode\n{\n\tpublic static TRIANGLES:string = \"triangles\";\n\tpublic static LINES:string = \"lines\";\n}\n\nexport = ContextGLDrawMode;",
    "class ContextGLMipFilter\n{\n\tpublic static MIPLINEAR:string = \"miplinear\";\n\tpublic static MIPNEAREST:string = \"mipnearest\";\n\tpublic static MIPNONE:string = \"mipnone\";\n}\n\nexport = ContextGLMipFilter;",
    "class ContextGLProfile\n{\n\tpublic static BASELINE:string = \"baseline\";\n\tpublic static BASELINE_CONSTRAINED:string = \"baselineConstrained\";\n\tpublic static BASELINE_EXTENDED:string = \"baselineExtended\";\n}\nexport = ContextGLProfile;",
    "class ContextGLProgramType\n{\n\tstatic FRAGMENT:number = 0;\n\tstatic SAMPLER:number = 1;\n\tstatic VERTEX:number = 2;\n}\n\nexport = ContextGLProgramType;",
    "class ContextGLStencilAction\n{\n\tpublic static DECREMENT_SATURATE:string = \"decrementSaturate\";\n\tpublic static DECREMENT_WRAP:string = \"decrementWrap\";\n\tpublic static INCREMENT_SATURATE:string = \"incrementSaturate\";\n\tpublic static INCREMENT_WRAP:string = \"incrementWrap\";\n\tpublic static INVERT:string = \"invert\";\n\tpublic static KEEP:string = \"keep\";\n\tpublic static SET:string = \"set\";\n\tpublic static ZERO:string = \"zero\";\n}\n\nexport = ContextGLStencilAction;",
    "class ContextGLTextureFilter\n{\n\tpublic static LINEAR:string = \"linear\";\n\tpublic static NEAREST:string = \"nearest\";\n}\n\nexport = ContextGLTextureFilter;",
    "class ContextGLTextureFormat\n{\n\tstatic BGRA:string = \"bgra\";\n\tstatic BGRA_PACKED:string = \"bgraPacked4444\";\n\tstatic BGR_PACKED:string = \"bgrPacked565\";\n\tstatic COMPRESSED:string = \"compressed\";\n\tstatic COMPRESSED_ALPHA:string = \"compressedAlpha\";\n}\n\nexport = ContextGLTextureFormat;",
    "class ContextGLTriangleFace\n{\n\tstatic BACK:string = \"back\";\n\tstatic FRONT:string = \"front\";\n\tstatic FRONT_AND_BACK:string = \"frontAndBack\";\n\tstatic NONE:string = \"none\";\n}\n\nexport = ContextGLTriangleFace;",
    "class ContextGLVertexBufferFormat\n{\n\tstatic BYTES_4:number = 0;\n\tstatic FLOAT_1:number = 1;\n\tstatic FLOAT_2:number = 2;\n\tstatic FLOAT_3:number = 3;\n\tstatic FLOAT_4:number = 4;\n}\n\nexport = ContextGLVertexBufferFormat;",
    "class ContextGLWrapMode\n{\n\tpublic static CLAMP:string = \"clamp\";\n\tpublic static REPEAT:string = \"repeat\";\n}\n\nexport = ContextGLWrapMode;",
    "class ContextMode\n{\n\tstatic AUTO:string = \"auto\";\n\tstatic WEBGL:string = \"webgl\";\n\tstatic FLASH:string = \"flash\";\n\tstatic NATIVE:string = \"native\";\n\tstatic SOFTWARE:string = \"software\";\n}\n\nexport = ContextMode;",
    "import BitmapImage2D                = require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport Matrix3D                        = require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix                        = require(\"awayjs-core/lib/geom/Matrix\");\nimport Point                        = require(\"awayjs-core/lib/geom/Point\");\nimport Vector3D                        = require(\"awayjs-core/lib/geom/Vector3D\");\nimport Rectangle                    = require(\"awayjs-core/lib/geom/Rectangle\");\nimport ByteArray                    = require(\"awayjs-core/lib/utils/ByteArray\");\nimport ColorUtils                    = require(\"awayjs-core/lib/utils/ColorUtils\");\n\nimport Matrix3DUtils                = require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport ContextGLBlendFactor            = require(\"awayjs-stagegl/lib/base/ContextGLBlendFactor\");\nimport ContextGLDrawMode            = require(\"awayjs-stagegl/lib/base/ContextGLDrawMode\");\nimport ContextGLClearMask            = require(\"awayjs-stagegl/lib/base/ContextGLClearMask\");\nimport ContextGLCompareMode            = require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport ContextGLMipFilter            = require(\"awayjs-stagegl/lib/base/ContextGLMipFilter\");\nimport ContextGLProgramType            = require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport ContextGLStencilAction        = require(\"awayjs-stagegl/lib/base/ContextGLStencilAction\");\nimport ContextGLTextureFilter        = require(\"awayjs-stagegl/lib/base/ContextGLTextureFilter\");\nimport ContextGLTriangleFace        = require(\"awayjs-stagegl/lib/base/ContextGLTriangleFace\");\nimport ContextGLVertexBufferFormat    = require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\nimport ContextGLWrapMode            = require(\"awayjs-stagegl/lib/base/ContextGLWrapMode\");\nimport CubeTextureWebGL                = require(\"awayjs-stagegl/lib/base/CubeTextureWebGL\");\nimport IContextGL                    = require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IIndexBuffer                    = require(\"awayjs-stagegl/lib/base/IIndexBuffer\");\nimport ICubeTexture                    = require(\"awayjs-stagegl/lib/base/ICubeTexture\");\nimport ITexture                        = require(\"awayjs-stagegl/lib/base/ITexture\");\nimport IVertexBuffer                = require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\nimport IProgram                        = require(\"awayjs-stagegl/lib/base/IProgram\");\nimport ITextureBase                    = require(\"awayjs-stagegl/lib/base/ITextureBase\");\nimport IndexBufferSoftware                    = require(\"awayjs-stagegl/lib/base/IndexBufferSoftware\");\nimport VertexBufferSoftware                    = require(\"awayjs-stagegl/lib/base/VertexBufferSoftware\");\nimport TextureSoftware                    = require(\"awayjs-stagegl/lib/base/TextureSoftware\");\nimport ProgramSoftware                    = require(\"awayjs-stagegl/lib/base/ProgramSoftware\");\nimport ProgramVOSoftware                        = require(\"awayjs-stagegl/lib/base/ProgramVOSoftware\");\nimport SoftwareSamplerState                     = require(\"awayjs-stagegl/lib/base/SoftwareSamplerState\");\n\nclass ContextSoftware implements IContextGL {\n\n    private _canvas:HTMLCanvasElement;\n\n    public static MAX_SAMPLERS:number = 8;\n\n    private _backBufferRect:Rectangle = new Rectangle();\n    private _backBufferWidth:number = 100;\n    private _backBufferHeight:number = 100;\n    private _backBufferColor:BitmapImage2D;\n    private _frontBuffer:BitmapImage2D;\n\n    private _zbuffer:number[] = [];\n    private _cullingMode:string = ContextGLTriangleFace.BACK;\n    private _blendSource:string = ContextGLBlendFactor.ONE;\n    private _blendDestination:string = ContextGLBlendFactor.ZERO;\n    private _colorMaskR:boolean = true;\n    private _colorMaskG:boolean = true;\n    private _colorMaskB:boolean = true;\n    private _colorMaskA:boolean = true;\n    private _writeDepth:boolean = true;\n    private _depthCompareMode:string = ContextGLCompareMode.LESS;\n    private _program:ProgramSoftware;\n\n    private _screenMatrix:Matrix3D = new Matrix3D();\n    private _frontBufferMatrix:Matrix = new Matrix();\n\n    private _bboxMin:Point = new Point();\n    private _bboxMax:Point = new Point();\n    private _clamp:Point = new Point();\n\n    public _samplerStates:SoftwareSamplerState[] = [];\n    public _textures:Array<TextureSoftware> = [];\n    public _vertexBuffers:Array<VertexBufferSoftware> = [];\n    public _vertexBufferOffsets:Array<number> = [];\n    public _vertexBufferFormats:Array<number> = [];\n\n    public _fragmentConstants:Array<Vector3D> = [];\n    public _vertexConstants:Array<Vector3D> = [];\n\n    //public static _drawCallback:Function = null;\n\n    private _antialias:number = 0;\n\n    constructor(canvas:HTMLCanvasElement) {\n        this._canvas = canvas;\n\n        this._backBufferColor = new BitmapImage2D(this._backBufferWidth, this._backBufferHeight, false, 0, false);\n        this._frontBuffer = new BitmapImage2D(this._backBufferWidth, this._backBufferHeight, true, 0, false);\n\n        if (document && document.body) {\n            document.body.appendChild(this._frontBuffer.getCanvas());\n        }\n    }\n\n    public get frontBuffer():BitmapImage2D {\n        return this._frontBuffer;\n    }\n\n    public get container():HTMLElement {\n        return this._canvas;\n    }\n\n    public clear(red:number = 0, green:number = 0, blue:number = 0, alpha:number = 1, depth:number = 1, stencil:number = 0, mask:number = ContextGLClearMask.ALL) {\n        console.log(\"clear: \" + red + \", \" + green + \", \" + blue + \", alpha: \" + alpha);\n        if (mask & ContextGLClearMask.COLOR) {\n            this._backBufferColor.fillRect(this._backBufferRect, ColorUtils.ARGBtoFloat32(alpha * 0xFF, red * 0xFF, green * 0xFF, blue * 0xFF));\n        }\n\n        //TODO: mask & ContextGLClearMask.STENCIL\n\n        if (mask & ContextGLClearMask.DEPTH) {\n            this._zbuffer.length = 0;\n            var len:number = this._backBufferWidth * this._backBufferHeight;\n            for (var i:number = 0; i < len; i++) {\n                this._zbuffer[i] = 10000000;\n            }\n        }\n    }\n\n    public configureBackBuffer(width:number, height:number, antiAlias:number, enableDepthAndStencil:boolean) {\n        console.log(\"configureBackBuffer antiAlias: \" + antiAlias);\n\n        this._antialias = antiAlias;\n\n        if (this._antialias % 2 != 0) {\n            this._antialias = Math.floor(this._antialias - 0.5);\n        }\n\n        if (this._antialias == 0) {\n            this._antialias = 1;\n        }\n\n        this._frontBuffer._setSize(width, height);\n\n        this._backBufferWidth = width * this._antialias;\n        this._backBufferHeight = height * this._antialias;\n\n        this._backBufferRect.width = this._backBufferWidth;\n        this._backBufferRect.height = this._backBufferHeight;\n\n        this._backBufferColor._setSize(this._backBufferWidth, this._backBufferHeight);\n\n        var raw:Float32Array = this._screenMatrix.rawData;\n\n        raw[0] = (this._backBufferWidth ) / 2;\n        raw[1] = 0;\n        raw[2] = 0;\n        raw[3] = (this._backBufferWidth ) / 2;\n\n        raw[4] = 0;\n        raw[5] = -(this._backBufferHeight ) / 2;\n        raw[6] = 0;\n        raw[7] = (this._backBufferHeight ) / 2;\n\n        raw[8] = 0;\n        raw[9] = 0;\n        raw[10] = 1;\n        raw[11] = 0;\n\n        raw[12] = 0;\n        raw[13] = 0;\n        raw[14] = 0;\n        raw[15] = 0;\n\n        this._screenMatrix.transpose();\n\n        this._frontBufferMatrix = new Matrix();\n        this._frontBufferMatrix.scale(1 / this._antialias, 1 / this._antialias);\n    }\n\n    public createCubeTexture(size:number, format:string, optimizeForRenderToTexture:boolean, streamingLevels:number):ICubeTexture {\n        //TODO: impl\n        return undefined;\n    }\n\n    public createIndexBuffer(numIndices:number):IIndexBuffer {\n        return new IndexBufferSoftware(numIndices);\n    }\n\n    public createProgram():ProgramSoftware {\n        return new ProgramSoftware();\n    }\n\n    public createTexture(width:number, height:number, format:string, optimizeForRenderToTexture:boolean, streamingLevels:number):TextureSoftware {\n        return new TextureSoftware(width, height);\n    }\n\n    public createVertexBuffer(numVertices:number, dataPerVertex:number):VertexBufferSoftware {\n        return new VertexBufferSoftware(numVertices, dataPerVertex);\n    }\n\n    public dispose() {\n    }\n\n    public setBlendFactors(sourceFactor:string, destinationFactor:string) {\n        console.log(\"setBlendFactors sourceFactor: \" + sourceFactor + \" destinationFactor: \" + destinationFactor);\n        this._blendSource = sourceFactor;\n        this._blendDestination = destinationFactor;\n    }\n\n    public setColorMask(red:boolean, green:boolean, blue:boolean, alpha:boolean) {\n        this._colorMaskR = red;\n        this._colorMaskG = green;\n        this._colorMaskB = blue;\n        this._colorMaskA = alpha;\n    }\n\n    public setStencilActions(triangleFace:string, compareMode:string, actionOnBothPass:string, actionOnDepthFail:string, actionOnDepthPassStencilFail:string, coordinateSystem:string) {\n        //TODO:\n    }\n\n    public setStencilReferenceValue(referenceValue:number, readMask:number, writeMask:number) {\n        //TODO:\n    }\n\n    public setCulling(triangleFaceToCull:string, coordinateSystem:string) {\n        //TODO: CoordinateSystem.RIGHT_HAND\n        this._cullingMode = triangleFaceToCull;\n    }\n\n    public setDepthTest(depthMask:boolean, passCompareMode:string) {\n        console.log(\"setDepthTest: \" + depthMask + \" , \" + passCompareMode);\n        this._writeDepth = depthMask;\n        this._depthCompareMode = passCompareMode;\n    }\n\n    public setProgram(program:ProgramSoftware) {\n        this._program = program;\n    }\n\n    public setProgramConstantsFromMatrix(programType:number, firstRegister:number, matrix:Matrix3D, transposedMatrix:boolean) {\n        console.log(\"setProgramConstantsFromMatrix: programType\" + programType + \" firstRegister: \" + firstRegister + \" matrix: \" + matrix + \" transposedMatrix: \" + transposedMatrix);\n\n        var d:Float32Array = matrix.rawData;\n        if (transposedMatrix) {\n            var raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\n            raw[0] = d[0];\n            raw[1] = d[4];\n            raw[2] = d[8];\n            raw[3] = d[12];\n            raw[4] = d[1];\n            raw[5] = d[5];\n            raw[6] = d[9];\n            raw[7] = d[13];\n            raw[8] = d[2];\n            raw[9] = d[6];\n            raw[10] = d[10];\n            raw[11] = d[14];\n            raw[12] = d[3];\n            raw[13] = d[7];\n            raw[14] = d[11];\n            raw[15] = d[15];\n\n            this.setProgramConstantsFromArray(programType, firstRegister, raw, 4);\n        } else {\n            this.setProgramConstantsFromArray(programType, firstRegister, d, 4);\n        }\n    }\n\n    public setProgramConstantsFromArray(programType:number, firstRegister:number, data:Float32Array, numRegisters:number) {\n        console.log(\"setProgramConstantsFromArray: programType\" + programType + \" firstRegister: \" + firstRegister + \" data: \" + data + \" numRegisters: \" + numRegisters);\n        var target:Array<Vector3D>;\n        if (programType == ContextGLProgramType.VERTEX) {\n            target = this._vertexConstants;\n        } else if (programType == ContextGLProgramType.FRAGMENT) {\n            target = this._fragmentConstants;\n        }\n\n        var k:number = 0;\n        for (var i:number = firstRegister; i < firstRegister + numRegisters; i++) {\n            target[i] = new Vector3D(data[k++], data[k++], data[k++], data[k++]);\n        }\n    }\n\n    public setTextureAt(sampler:number, texture:TextureSoftware) {\n        console.log(\"setTextureAt sample: \" + sampler + \" texture: \" + texture);\n        this._textures[sampler] = texture;\n    }\n\n    public setVertexBufferAt(index:number, buffer:VertexBufferSoftware, bufferOffset:number, format:number) {\n        console.log(\"setVertexBufferAt index: \" + index + \" buffer: \" + buffer + \" bufferOffset: \" + bufferOffset + \" format: \" + format);\n        this._vertexBuffers[index] = buffer;\n        this._vertexBufferOffsets[index] = bufferOffset;\n        this._vertexBufferFormats[index] = format;\n    }\n\n    public present() {\n        console.log(\"present()\");\n        this._frontBuffer.fillRect(this._frontBuffer.rect, ColorUtils.ARGBtoFloat32(0, 0, 0, 0));\n        this._frontBuffer.draw(this._backBufferColor, this._frontBufferMatrix);\n    }\n\n    public drawToBitmapImage2D(destination:BitmapImage2D) {\n    }\n\n    public drawIndices(mode:string, indexBuffer:IndexBufferSoftware, firstIndex:number, numIndices:number) {\n        console.log(\"drawIndices mode: \" + mode + \" firstIndex: \" + firstIndex + \" numIndices: \" + numIndices);\n\n        if (!this._program) {\n            return;\n        }\n\n        this._backBufferColor.lock();\n\n        var index0:number;\n        var index1:number;\n        var index2:number;\n\n        var vo0:ProgramVOSoftware;\n        var vo1:ProgramVOSoftware;\n        var vo2:ProgramVOSoftware;\n\n        if (this._cullingMode == ContextGLTriangleFace.BACK) {\n            for (var i:number = firstIndex; i < numIndices; i += 3) {\n                index0 = indexBuffer.data[indexBuffer.startOffset + i];\n                index1 = indexBuffer.data[indexBuffer.startOffset + i + 1];\n                index2 = indexBuffer.data[indexBuffer.startOffset + i + 2];\n\n                vo0 = this._program.vertex(this, index0);\n                vo1 = this._program.vertex(this, index1);\n                vo2 = this._program.vertex(this, index2);\n\n                this.triangle(vo0, vo1, vo2);\n            }\n        } else if (this._cullingMode == ContextGLTriangleFace.FRONT) {\n            for (var i:number = firstIndex; i < numIndices; i += 3) {\n                index0 = indexBuffer.data[indexBuffer.startOffset + i + 2];\n                index1 = indexBuffer.data[indexBuffer.startOffset + i + 1];\n                index2 = indexBuffer.data[indexBuffer.startOffset + i + 0];\n\n                vo0 = this._program.vertex(this, index0);\n                vo1 = this._program.vertex(this, index1);\n                vo2 = this._program.vertex(this, index2);\n\n                this.triangle(vo0, vo1, vo2);\n            }\n        } else if (this._cullingMode == ContextGLTriangleFace.FRONT_AND_BACK || this._cullingMode == ContextGLTriangleFace.NONE) {\n            for (var i:number = firstIndex; i < numIndices; i += 3) {\n                index0 = indexBuffer.data[indexBuffer.startOffset + i + 2];\n                index1 = indexBuffer.data[indexBuffer.startOffset + i + 1];\n                index2 = indexBuffer.data[indexBuffer.startOffset + i + 0];\n\n                vo0 = this._program.vertex(this, index0);\n                vo1 = this._program.vertex(this, index1);\n                vo2 = this._program.vertex(this, index2);\n\n                this.triangle(vo0, vo1, vo2);\n\n                index0 = indexBuffer.data[indexBuffer.startOffset + i];\n                index1 = indexBuffer.data[indexBuffer.startOffset + i + 1];\n                index2 = indexBuffer.data[indexBuffer.startOffset + i + 2];\n\n                vo0 = this._program.vertex(this, index0);\n                vo1 = this._program.vertex(this, index1);\n                vo2 = this._program.vertex(this, index2);\n                this.triangle(vo0, vo1, vo2);\n            }\n        }\n\n        //if (ContextSoftware._drawCallback) {\n        //    ContextSoftware._drawCallback(this._backBufferColor);\n        //}\n        this._backBufferColor.unlock();\n    }\n\n    public drawVertices(mode:string, firstVertex:number, numVertices:number) {\n        //TODO:\n    }\n\n    public setScissorRectangle(rectangle:Rectangle) {\n        //TODO:\n    }\n\n    public setSamplerStateAt(sampler:number, wrap:string, filter:string, mipfilter:string) {\n        //console.log(\"setSamplerStateAt: \"+sampler+\" wrap: \"+wrap+\" filter: \"+filter+\" mipfilter: \"+mipfilter);\n        var state:SoftwareSamplerState = this._samplerStates[sampler];\n        if (!state) {\n            state = this._samplerStates[sampler] = new SoftwareSamplerState();\n        }\n        state.wrap = wrap;\n        state.filter = filter;\n        state.mipfilter = mipfilter;\n    }\n\n    public setRenderToTexture(target:ITextureBase, enableDepthAndStencil:boolean, antiAlias:number, surfaceSelector:number) {\n        //TODO:\n    }\n\n    public setRenderToBackBuffer() {\n        //TODO:\n    }\n\n    public putPixel(x:number, y:number, color:number):void {\n        var dest:number[] = ColorUtils.float32ColorToARGB(this._backBufferColor.getPixel32(x, y));\n        dest[0] /= 255;\n        dest[1] /= 255;\n        dest[2] /= 255;\n        dest[3] /= 255;\n\n        var source:number[] = ColorUtils.float32ColorToARGB(color);\n        source[0] /= 255;\n        source[1] /= 255;\n        source[2] /= 255;\n        source[3] /= 255;\n\n        var destModified:number[] = this.applyBlendMode(dest, this._blendDestination, dest, source);\n        var sourceModified:number[] = this.applyBlendMode(source, this._blendSource, dest, source);\n\n        var a:number = destModified[0] + sourceModified[0];\n        var r:number = destModified[1] + sourceModified[1];\n        var g:number = destModified[2] + sourceModified[2];\n        var b:number = destModified[3] + sourceModified[3];\n\n        a = Math.max(0, Math.min(a, 1));\n        r = Math.max(0, Math.min(r, 1));\n        g = Math.max(0, Math.min(g, 1));\n        b = Math.max(0, Math.min(b, 1));\n        //\n        //r*=a/255;\n        //g*=a/255;\n        //b*=a/255;\n        //a = 255;\n\n        this._backBufferColor.setPixel32(x, y, ColorUtils.ARGBtoFloat32(a * 255, r * 255, g * 255, b * 255));\n    }\n\n    private applyBlendMode(argb:number[], blend:string, dest:number[], source:number[]):number[] {\n        var result:number[] = [];\n\n        result[0] = argb[0];\n        result[1] = argb[1];\n        result[2] = argb[2];\n        result[3] = argb[3];\n\n        if (blend == ContextGLBlendFactor.DESTINATION_ALPHA) {\n            result[0] *= dest[0];\n            result[1] *= dest[0];\n            result[2] *= dest[0];\n            result[3] *= dest[0];\n        } else if (blend == ContextGLBlendFactor.DESTINATION_COLOR) {\n            result[0] *= dest[0];\n            result[1] *= dest[1];\n            result[2] *= dest[2];\n            result[3] *= dest[3];\n        } else if (blend == ContextGLBlendFactor.ZERO) {\n            result[0] = 0;\n            result[1] = 0;\n            result[2] = 0;\n            result[3] = 0;\n        } else if (blend == ContextGLBlendFactor.ONE_MINUS_DESTINATION_ALPHA) {\n            result[0] *= 1 - dest[0];\n            result[1] *= 1 - dest[0];\n            result[2] *= 1 - dest[0];\n            result[3] *= 1 - dest[0];\n        } else if (blend == ContextGLBlendFactor.ONE_MINUS_DESTINATION_COLOR) {\n            result[0] *= 1 - dest[0];\n            result[1] *= 1 - dest[1];\n            result[2] *= 1 - dest[2];\n            result[3] *= 1 - dest[3];\n        } else if (blend == ContextGLBlendFactor.ONE_MINUS_SOURCE_ALPHA) {\n            result[0] *= 1 - source[0];\n            result[1] *= 1 - source[0];\n            result[2] *= 1 - source[0];\n            result[3] *= 1 - source[0];\n        } else if (blend == ContextGLBlendFactor.ONE_MINUS_SOURCE_COLOR) {\n            result[0] *= 1 - source[0];\n            result[1] *= 1 - source[1];\n            result[2] *= 1 - source[2];\n            result[3] *= 1 - source[3];\n        } else if (blend == ContextGLBlendFactor.SOURCE_ALPHA) {\n            result[0] *= source[0];\n            result[1] *= source[0];\n            result[2] *= source[0];\n            result[3] *= source[0];\n        } else if (blend == ContextGLBlendFactor.SOURCE_COLOR) {\n            result[0] *= source[0];\n            result[1] *= source[1];\n            result[2] *= source[2];\n            result[3] *= source[3];\n        }\n\n        return result;\n    }\n\n    public clamp(value:number, min:number = 0, max:number = 1):number {\n        return Math.max(min, Math.min(value, max));\n    }\n\n    public interpolate(min:number, max:number, gradient:number) {\n        return min + (max - min) * this.clamp(gradient);\n    }\n\n    public triangle(vo0:ProgramVOSoftware, vo1:ProgramVOSoftware, vo2:ProgramVOSoftware):void {\n        var p0:Vector3D = vo0.outputPosition[0];\n        if (!p0 || p0.w == 0 || isNaN(p0.w)) {\n            console.error(\"wrong position\");\n            return;\n        }\n        var p1:Vector3D = vo1.outputPosition[0];\n        var p2:Vector3D = vo2.outputPosition[0];\n\n        p0.z = p0.z * 2 - p0.w;\n        p1.z = p1.z * 2 - p1.w;\n        p2.z = p2.z * 2 - p2.w;\n\n        p0.scaleBy(1 / p0.w);\n        p1.scaleBy(1 / p1.w);\n        p2.scaleBy(1 / p2.w);\n\n        var project:Vector3D = new Vector3D(p0.w, p1.w, p2.w);\n        p0 = this._screenMatrix.transformVector(p0);\n        p1 = this._screenMatrix.transformVector(p1);\n        p2 = this._screenMatrix.transformVector(p2);\n        var depth:Vector3D = new Vector3D(p0.z, p1.z, p2.z);\n\n        this._bboxMin.x = 1000000;\n        this._bboxMin.y = 1000000;\n        this._bboxMax.x = -1000000;\n        this._bboxMax.y = -1000000;\n\n        this._clamp.x = this._backBufferWidth - 1;\n        this._clamp.y = this._backBufferHeight - 1;\n\n        this._bboxMin.x = Math.max(0, Math.min(this._bboxMin.x, p0.x));\n        this._bboxMin.y = Math.max(0, Math.min(this._bboxMin.y, p0.y));\n\n        this._bboxMin.x = Math.max(0, Math.min(this._bboxMin.x, p1.x));\n        this._bboxMin.y = Math.max(0, Math.min(this._bboxMin.y, p1.y));\n\n        this._bboxMin.x = Math.max(0, Math.min(this._bboxMin.x, p2.x));\n        this._bboxMin.y = Math.max(0, Math.min(this._bboxMin.y, p2.y));\n\n        this._bboxMax.x = Math.min(this._clamp.x, Math.max(this._bboxMax.x, p0.x));\n        this._bboxMax.y = Math.min(this._clamp.y, Math.max(this._bboxMax.y, p0.y));\n\n        this._bboxMax.x = Math.min(this._clamp.x, Math.max(this._bboxMax.x, p1.x));\n        this._bboxMax.y = Math.min(this._clamp.y, Math.max(this._bboxMax.y, p1.y));\n\n        this._bboxMax.x = Math.min(this._clamp.x, Math.max(this._bboxMax.x, p2.x));\n        this._bboxMax.y = Math.min(this._clamp.y, Math.max(this._bboxMax.y, p2.y));\n\n        this._bboxMin.x = Math.floor(this._bboxMin.x);\n        this._bboxMin.y = Math.floor(this._bboxMin.y);\n        this._bboxMax.x = Math.floor(this._bboxMax.x);\n        this._bboxMax.y = Math.floor(this._bboxMax.y);\n\n        for (var x:number = this._bboxMin.x; x <= this._bboxMax.x; x++) {\n            for (var y:number = this._bboxMin.y; y <= this._bboxMax.y; y++) {\n                var color:Vector3D = this.calcPixel(x, y, p0, p1, p2, project, depth, vo0, vo1, vo2);\n                if (color) {\n                    this.putPixel(x, y, ColorUtils.ARGBtoFloat32(color.w, color.x, color.y, color.z));\n                }\n            }\n        }\n    }\n\n    public calcPixel(x:number, y:number, p0:Vector3D, p1:Vector3D, p2:Vector3D, project:Vector3D, depth:Vector3D, vo0:ProgramVOSoftware, vo1:ProgramVOSoftware, vo2:ProgramVOSoftware):Vector3D {\n        var screen:Vector3D = this.barycentric(p0, p1, p2, x, y);\n        var screenRight:Vector3D = this.barycentric(p0, p1, p2, x + 1, y);\n        var screenBottom:Vector3D = this.barycentric(p0, p1, p2, x, y + 1);\n\n        var clip:Vector3D = new Vector3D(screen.x / project.x, screen.y / project.y, screen.z / project.z);\n        clip.scaleBy(1 / (clip.x + clip.y + clip.z));\n\n        var clipRight:Vector3D = new Vector3D(screenRight.x / project.x, screenRight.y / project.y, screenRight.z / project.z);\n        clipRight.scaleBy(1 / (clipRight.x + clipRight.y + clipRight.z));\n\n        var clipBottom:Vector3D = new Vector3D(screenBottom.x / project.x, screenBottom.y / project.y, screenBottom.z / project.z);\n        clipBottom.scaleBy(1 / (clipBottom.x + clipBottom.y + clipBottom.z));\n\n        var index:number = ((x % this._backBufferWidth) + y * this._backBufferWidth);\n\n        var fragDepth:number = depth.x * screen.x + depth.y * screen.y + depth.z * screen.z;\n\n        if (screen.x < 0 || screen.y < 0 || screen.z < 0) {\n            return null;\n        }\n\n        var currentDepth:number = this._zbuffer[index];\n        //< fragDepth\n        var passDepthTest:boolean = false;\n        switch (this._depthCompareMode) {\n            case ContextGLCompareMode.ALWAYS:\n                passDepthTest = true;\n                break;\n            case ContextGLCompareMode.EQUAL:\n                passDepthTest = fragDepth == currentDepth;\n                break;\n            case ContextGLCompareMode.GREATER:\n                passDepthTest = fragDepth > currentDepth;\n                break;\n            case ContextGLCompareMode.GREATER_EQUAL:\n                passDepthTest = fragDepth >= currentDepth;\n                break;\n            case ContextGLCompareMode.LESS:\n                passDepthTest = fragDepth < currentDepth;\n                break;\n            case ContextGLCompareMode.LESS_EQUAL:\n                passDepthTest = fragDepth <= currentDepth;\n                break;\n            case ContextGLCompareMode.NEVER:\n                passDepthTest = false;\n                break;\n            case ContextGLCompareMode.NOT_EQUAL:\n                passDepthTest = fragDepth != currentDepth;\n                break;\n            default:\n        }\n\n        if (!passDepthTest) {\n            return null;\n        }\n\n        var fragmentVO:ProgramVOSoftware = this._program.fragment(this, clip, clipRight, clipBottom, vo0, vo1, vo2, fragDepth);\n        if (fragmentVO.discard) {\n            return null;\n        }\n\n        if (this._writeDepth) {\n            this._zbuffer[index] = fragDepth;//todo: fragmentVO.outputDepth?\n        }\n\n        var color:Vector3D = fragmentVO.outputColor[0];\n\n        color.x = Math.max(0, Math.min(color.x, 1));\n        color.y = Math.max(0, Math.min(color.y, 1));\n        color.z = Math.max(0, Math.min(color.z, 1));\n        color.w = Math.max(0, Math.min(color.w, 1));\n\n        color.x *= 255;\n        color.y *= 255;\n        color.z *= 255;\n        color.w *= 255;\n        return color;\n    }\n\n    public barycentric(a:Vector3D, b:Vector3D, c:Vector3D, x:number, y:number):Vector3D {\n        var sx:Vector3D = new Vector3D();\n        sx.x = c.x - a.x;\n        sx.y = b.x - a.x;\n        sx.z = a.x - x;\n\n        var sy:Vector3D = new Vector3D();\n        sy.x = c.y - a.y;\n        sy.y = b.y - a.y;\n        sy.z = a.y - y;\n\n        var u:Vector3D = sx.crossProduct(sy);\n        if (u.z < 0.01) {\n            return new Vector3D(1 - (u.x + u.y) / u.z, u.y / u.z, u.x / u.z);\n        }\n        return new Vector3D(-1, 1, 1);\n    }\n}\n\nexport = ContextSoftware;\n\nclass VertexBufferProperties {\n    public size:number;\n\n    public type:number;\n\n    public normalized:boolean;\n\n    constructor(size:number, type:number, normalized:boolean) {\n        this.size = size;\n        this.type = type;\n        this.normalized = normalized;\n    }\n}\n",
    "import BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport Rectangle\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\n\n//import swfobject\t\t\t\t\t= require(\"awayjs-stagegl/lib/swfobject\");\nimport Sampler\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/Sampler\");\nimport ContextGLClearMask\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLClearMask\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport CubeTextureFlash\t\t\t\t= require(\"awayjs-stagegl/lib/base/CubeTextureFlash\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IndexBufferFlash\t\t\t\t= require(\"awayjs-stagegl/lib/base/IndexBufferFlash\");\nimport OpCodes\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/OpCodes\");\nimport ProgramFlash\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ProgramFlash\");\nimport TextureFlash\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/TextureFlash\");\nimport ResourceBaseFlash\t\t\t= require(\"awayjs-stagegl/lib/base/ResourceBaseFlash\");\nimport VertexBufferFlash\t\t\t= require(\"awayjs-stagegl/lib/base/VertexBufferFlash\");\n\nclass ContextStage3D implements IContextGL\n{\n\tpublic static contexts:Object = new Object();\n\tpublic static maxvertexconstants:number = 128;\n\tpublic static maxfragconstants:number = 28;\n\tpublic static maxtemp:number = 8;\n\tpublic static maxstreams:number = 8;\n\tpublic static maxtextures:number = 8;\n\tpublic static defaultsampler = new Sampler();\n\n\tpublic _iDriverInfo;\n\n\tprivate _container:HTMLElement;\n\tprivate _width:number;\n\tprivate _height:number;\n\tprivate _cmdStream:string = \"\";\n\tprivate _errorCheckingEnabled:boolean;\n\tprivate _resources:Array<ResourceBaseFlash>;\n\tprivate _oldCanvas:HTMLCanvasElement;\n\tprivate _oldParent:HTMLElement;\n\n\n\tpublic static debug:boolean = false;\n\tpublic static logStream:boolean = false;\n\n\tpublic _iCallback:(context:IContextGL) => void;\n\n\tpublic get container():HTMLElement\n\t{\n\t\treturn this._container;\n\t}\n\n\tpublic get driverInfo()\n\t{\n\t\treturn this._iDriverInfo;\n\t}\n\n\tpublic get errorCheckingEnabled():boolean\n\t{\n\t\treturn this._errorCheckingEnabled;\n\t}\n\n\tpublic set errorCheckingEnabled(value:boolean)\n\t{\n\t\tif (this._errorCheckingEnabled == value)\n\t\t\treturn;\n\n\t\tthis._errorCheckingEnabled = value;\n\n\t\tthis.addStream(String.fromCharCode(OpCodes.enableErrorChecking, value? OpCodes.trueValue : OpCodes.falseValue));\n\t\tthis.execute();\n\t}\n\n\t//TODO: get rid of hack that fixes including definition file\n\tconstructor(container:HTMLCanvasElement, callback:(context:IContextGL) => void, include?:Sampler)\n\t{\n\t\tthis._resources = new Array<ResourceBaseFlash>();\n\n\t\tvar swfVersionStr = \"11.0.0\";\n\n\t\t// To use express install, set to playerProductInstall.swf, otherwise the empty string.\n\t\tvar flashvars = {\n\t\t\tid:container.id\n\t\t};\n\n\t\tvar params = {\n\t\t\tquality:\"high\",\n\t\t\tbgcolor:\"#ffffff\",\n\t\t\tallowscriptaccess:\"sameDomain\",\n\t\t\tallowfullscreen:\"true\",\n\t\t\twmode:\"direct\"\n\t\t};\n\n\t\tthis._errorCheckingEnabled = false;\n\t\tthis._iDriverInfo = \"Unknown\";\n\n\t\tvar attributes = {\n\t\t\tsalign:\"tl\",\n\t\t\tid:container.id,\n\t\t\tname:container[\"name\"] //TODO: needed?\n\t\t};\n\n\t\tthis._oldCanvas = <HTMLCanvasElement> container.cloneNode(); // keep the old one to restore on dispose\n\t\tthis._oldParent = <HTMLElement> container.parentNode;\n\n\t\tvar context3dObj = this;\n\t\tContextStage3D.contexts[container.id] = this;\n\n\t\tfunction callbackSWFObject(callbackInfo)\n\t\t{\n\t\t\tif (!callbackInfo.success)\n\t\t\t\treturn;\n\n\t\t\tcontext3dObj._container = callbackInfo.ref;\n\t\t\tcontext3dObj._iCallback = callback;\n\t\t}\n\n\t\t//swfobject.embedSWF(\"libs/molehill_js_flashbridge.swf\", container.id, String(container.width), String(container.height), swfVersionStr, \"\", flashvars, params, attributes, callbackSWFObject);\n\t}\n\n\tpublic _iAddResource(resource:ResourceBaseFlash)\n\t{\n\t\tthis._resources.push(resource);\n\t}\n\n\tpublic _iRemoveResource(resource:ResourceBaseFlash)\n\t{\n\t\tthis._resources.splice(this._resources.indexOf(resource));\n\t}\n\n\tpublic createTexture(width:number, height:number, format:string, optimizeForRenderToTexture:boolean, streamingLevels:number = 0):TextureFlash\n\t{\n\t\t//TODO:streaming\n\t\treturn new TextureFlash(this, width, height, format, optimizeForRenderToTexture);\n\t}\n\n\tpublic createCubeTexture(size:number, format:string, optimizeForRenderToTexture:boolean, streamingLevels:number = 0):CubeTextureFlash\n\t{\n\t\t//TODO:streaming\n\t\treturn new CubeTextureFlash(this, size, format, optimizeForRenderToTexture);\n\t}\n\n\n\tpublic setTextureAt(sampler:number, texture:ResourceBaseFlash)\n\t{\n\t\tif (texture) {\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.setTextureAt) + sampler + \",\" + texture.id + \",\");\n\t\t} else {\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.clearTextureAt) + sampler.toString() + \",\");\n\t\t}\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic setSamplerStateAt(sampler:number, wrap:string, filter:string, mipfilter:string):void\n\t{\n\t\t//nothing to do here\n\t}\n\n\tpublic setStencilActions(triangleFace:string = \"frontAndBack\", compareMode:string = \"always\", actionOnBothPass:string = \"keep\", actionOnDepthFail:string = \"keep\", actionOnDepthPassStencilFail:string = \"keep\", coordinateSystem:string = \"leftHanded\")\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.setStencilActions) + triangleFace + \"$\" + compareMode + \"$\" + actionOnBothPass + \"$\" + actionOnDepthFail + \"$\" + actionOnDepthPassStencilFail + \"$\");\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic setStencilReferenceValue(referenceValue:number, readMask:number = 255, writeMask:number = 255)\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.setStencilReferenceValue, referenceValue + OpCodes.intMask, readMask + OpCodes.intMask, writeMask + OpCodes.intMask));\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic setCulling(triangleFaceToCull:string, coordinateSystem:string = \"leftHanded\")\n\t{\n\t\t//TODO implement coordinateSystem option\n\t\tthis.addStream(String.fromCharCode(OpCodes.setCulling) + triangleFaceToCull + \"$\");\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic drawIndices(mode:string, indexBuffer:IndexBufferFlash, firstIndex:number = 0, numIndices:number = -1)\n\t{\n\t\tfirstIndex = firstIndex || 0;\n\t\tif (!numIndices || numIndices < 0)\n\t\t\tnumIndices = indexBuffer.numIndices;\n\n\t\t//assume triangles\n\t\tthis.addStream(String.fromCharCode(OpCodes.drawTriangles, indexBuffer.id + OpCodes.intMask) + firstIndex + \",\" + numIndices + \",\");\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic drawVertices(mode:string, firstVertex:number = 0, numVertices:number = -1)\n\t{\n\t\t//can't be done in Stage3D\n\t}\n\n\n\tpublic setProgramConstantsFromMatrix(programType:number, firstRegister:number, matrix:Matrix3D, transposedMatrix:boolean = false)\n\t{\n\t\t//this._gl.uniformMatrix4fv(this._gl.getUniformLocation(this._currentProgram.glProgram, this._uniformLocationNameDictionary[programType]), !transposedMatrix, new Float32Array(matrix.rawData));\n\n\t\t//TODO remove special case for WebGL matrix calls?\n\t\tvar d:Float32Array = matrix.rawData;\n\t\tif (transposedMatrix) {\n\t\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\n\t\t\traw[0] = d[0];\n\t\t\traw[1] = d[4];\n\t\t\traw[2] = d[8];\n\t\t\traw[3] = d[12];\n\t\t\traw[4] = d[1];\n\t\t\traw[5] = d[5];\n\t\t\traw[6] = d[9];\n\t\t\traw[7] = d[13];\n\t\t\traw[8] = d[2];\n\t\t\traw[9] = d[6];\n\t\t\traw[10] = d[10];\n\t\t\traw[11] = d[14];\n\t\t\traw[12] = d[3];\n\t\t\traw[13] = d[7];\n\t\t\traw[14] = d[11];\n\t\t\traw[15] = d[15];\n\n\t\t\tthis.setProgramConstantsFromArray(programType, firstRegister, raw, 4);\n\t\t} else {\n\t\t\tthis.setProgramConstantsFromArray(programType, firstRegister, d, 4);\n\t\t}\n\t}\n\n\tpublic setProgramConstantsFromArray(programType:number, firstRegister:number, data:Float32Array, numRegisters:number = -1)\n\t{\n\t\tvar startIndex:number;\n\t\tvar target:number = (programType == ContextGLProgramType.VERTEX)? OpCodes.trueValue : OpCodes.falseValue;\n\t\tfor (var i:number = 0; i < numRegisters; i++) {\n\t\t\tstartIndex = i*4;\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.setProgramConstant, target, (firstRegister + i) + OpCodes.intMask) + data[startIndex] + \",\" + data[startIndex + 1] + \",\" + data[startIndex + 2] + \",\" + data[startIndex + 3] + \",\");\n\n\t\t\tif (ContextStage3D.debug)\n\t\t\t\tthis.execute();\n\t\t}\n\t}\n\n\tpublic setProgram(program:ProgramFlash)\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.setProgram, program.id + OpCodes.intMask));\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic present()\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.present));\n\t\tthis.execute();\n\t}\n\n\tpublic clear(red:number = 0, green:number = 0, blue:number = 0, alpha:number = 1, depth:number = 1, stencil:number = 0, mask:number = ContextGLClearMask.ALL)\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.clear) + red + \",\" + green + \",\" + blue + \",\" + alpha + \",\" + depth + \",\" + stencil + \",\" + mask + \",\");\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic createProgram():ProgramFlash\n\t{\n\t\treturn new ProgramFlash(this);\n\t}\n\n\tpublic createVertexBuffer(numVertices:number, data32PerVertex:number):VertexBufferFlash\n\t{\n\t\treturn new VertexBufferFlash(this, numVertices, data32PerVertex);\n\t}\n\n\tpublic createIndexBuffer(numIndices:number):IndexBufferFlash\n\t{\n\t\treturn new IndexBufferFlash(this, numIndices);\n\t}\n\n\tpublic configureBackBuffer(width:number, height:number, antiAlias:number, enableDepthAndStencil:boolean = true)\n\t{\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\t//TODO: add Anitalias setting\n\t\tthis.addStream(String.fromCharCode(OpCodes.configureBackBuffer) + width + \",\" + height + \",\");\n\t}\n\n\tpublic drawToBitmapImage2D(destination:BitmapImage2D)\n\t{\n\t\t//TODO\n\t}\n\n\tpublic setVertexBufferAt(index:number, buffer:VertexBufferFlash, bufferOffset:number = 0, format:number = null)\n\t{\n\t\tif (buffer) {\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.setVertexBufferAt, index + OpCodes.intMask) + buffer.id + \",\" + bufferOffset + \",\" + format + \"$\");\n\t\t} else {\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.clearVertexBufferAt, index + OpCodes.intMask));\n\t\t}\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic setColorMask(red:boolean, green:boolean, blue:boolean, alpha:boolean)\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.setColorMask, red? OpCodes.trueValue : OpCodes.falseValue, green? OpCodes.trueValue : OpCodes.falseValue, blue? OpCodes.trueValue : OpCodes.falseValue, alpha? OpCodes.trueValue : OpCodes.falseValue));\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic setBlendFactors(sourceFactor:string, destinationFactor:string)\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.setBlendFactors) + sourceFactor + \"$\" + destinationFactor + \"$\");\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic setRenderToTexture(target:ResourceBaseFlash, enableDepthAndStencil:boolean = false, antiAlias:number = 0, surfaceSelector:number = 0)\n\t{\n\t\tif (target === null || target === undefined) {\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.clearRenderToTexture));\n\t\t} else {\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.setRenderToTexture, enableDepthAndStencil? OpCodes.trueValue : OpCodes.falseValue) + target.id + \",\" + (antiAlias || 0) + \",\");\n\t\t}\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\n\tpublic setRenderToBackBuffer()\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.clearRenderToTexture));\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic setScissorRectangle(rectangle:Rectangle)\n\t{\n\t\tif (rectangle) {\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.setScissorRect) + rectangle.x + \",\" + rectangle.y + \",\" + rectangle.width + \",\" + rectangle.height + \",\");\n\t\t} else {\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.clearScissorRect));\n\t\t}\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic setDepthTest(depthMask:boolean, passCompareMode:string)\n\t{\n\t\tthis.addStream(String.fromCharCode(OpCodes.setDepthTest, depthMask? OpCodes.trueValue : OpCodes.falseValue) + passCompareMode + \"$\");\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis.execute();\n\t}\n\n\tpublic dispose()\n\t{\n\t\tif (this._container == null)\n\t\t\treturn;\n\n\t\tconsole.log(\"Context3D dispose, releasing \" + this._resources.length + \" resources.\");\n\n\t\twhile (this._resources.length)\n\t\t\tthis._resources[0].dispose();\n\n\t\tif (this._container) {\n\t\t\t// encode command\n\t\t\tthis.addStream(String.fromCharCode(OpCodes.disposeContext));\n\t\t\tthis.execute();\n\t\t\t//swfobject.removeSWF(this._oldCanvas.id);\n\t\t\tif (this._oldCanvas && this._oldParent) {\n\t\t\t\tthis._oldParent.appendChild(this._oldCanvas);\n\t\t\t\tthis._oldParent = null;\n\t\t\t}\n\t\t\tthis._container = null;\n\t\t}\n\n\t\tthis._oldCanvas = null;\n\t}\n\n\tpublic addStream(stream:string)\n\t{\n\t\tthis._cmdStream += stream;\n\t}\n\n\tpublic execute():number\n\t{\n\t\tif (ContextStage3D.logStream)\n\t\t\tconsole.log(this._cmdStream);\n\n\t\tvar result:number = this._container[\"CallFunction\"](\"<invoke name=\\\"execStage3dOpStream\\\" returntype=\\\"javascript\\\"><arguments><string>\" + this._cmdStream + \"</string></arguments></invoke>\");\n\n\t\tif (Number(result) <= -3)\n\t\t\tthrow \"Exec stream failed\";\n\n\t\tthis._cmdStream = \"\";\n\n\t\treturn Number(result);\n\t}\n}\n\nexport = ContextStage3D;\n\n/**\n* global function for flash callback\n*/\nfunction mountain_js_context_available(id, driverInfo)\n{\n\tvar ctx:ContextStage3D = ContextStage3D.contexts[id];\n\tif (ctx._iCallback) {\n\t\tctx._iDriverInfo = driverInfo;\n\t\t// get out of the current JS stack frame and call back from flash player\n\t\tvar timeOutId = window.setTimeout(function ()\n\t\t{\n\t\t\twindow.clearTimeout(timeOutId);\n\t\t\ttry {\n\t\t\t\tctx._iCallback(ctx);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(\"Callback failed during flash initialization with '\" + e.toString() + \"'\");\n\t\t\t}\n\t\t}, 1);\n\t}\n}\n",
    "import BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport Rectangle\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\nimport ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport ContextGLBlendFactor\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLBlendFactor\");\nimport ContextGLDrawMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLDrawMode\");\nimport ContextGLClearMask\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLClearMask\");\nimport ContextGLCompareMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport ContextGLMipFilter\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLMipFilter\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport ContextGLStencilAction\t\t= require(\"awayjs-stagegl/lib/base/ContextGLStencilAction\");\nimport ContextGLTextureFilter\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFilter\");\nimport ContextGLTriangleFace\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTriangleFace\");\nimport ContextGLVertexBufferFormat\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\nimport ContextGLWrapMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLWrapMode\");\nimport CubeTextureWebGL\t\t\t\t= require(\"awayjs-stagegl/lib/base/CubeTextureWebGL\");\nimport IContextGL\t\t\t\t    = require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IndexBufferWebGL\t\t\t\t= require(\"awayjs-stagegl/lib/base/IndexBufferWebGL\");\nimport ProgramWebGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ProgramWebGL\");\nimport TextureBaseWebGL\t\t\t\t= require(\"awayjs-stagegl/lib/base/TextureBaseWebGL\");\nimport TextureWebGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/TextureWebGL\");\nimport SamplerState\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/SamplerState\");\nimport VertexBufferWebGL\t\t\t= require(\"awayjs-stagegl/lib/base/VertexBufferWebGL\");\n\nclass ContextWebGL implements IContextGL\n{\n\tprivate _blendFactorDictionary:Object = new Object();\n\tprivate _drawModeDictionary:Object = new Object();\n\tprivate _compareModeDictionary:Object = new Object();\n\tprivate _stencilActionDictionary:Object = new Object();\n\tprivate _textureIndexDictionary:Array<number> = new Array<number>(8);\n\tprivate _textureTypeDictionary:Object = new Object();\n\tprivate _wrapDictionary:Object = new Object();\n\tprivate _filterDictionary:Object = new Object();\n\tprivate _mipmapFilterDictionary:Object = new Object();\n\tprivate _vertexBufferPropertiesDictionary:Array<VertexBufferProperties> = [];\n\n\tprivate _container:HTMLElement;\n\tprivate _width:number;\n\tprivate _height:number;\n\tprivate _drawing:boolean;\n\tprivate _blendEnabled:boolean;\n\tprivate _blendSourceFactor:number;\n\tprivate _blendDestinationFactor:number;\n\n\tprivate _standardDerivatives:boolean;\n\n\tprivate _samplerStates:Array<SamplerState> = new Array<SamplerState>(8);\n\n\tpublic static MAX_SAMPLERS:number = 8;\n\n\t//@protected\n\tpublic _gl:WebGLRenderingContext;\n\n\t//@protected\n\tpublic _currentProgram:ProgramWebGL;\n\tprivate _currentArrayBuffer:VertexBufferWebGL;\n\tprivate _activeTexture:number;\n\n    private _stencilCompareMode:number;\n    private _stencilCompareModeBack:number;\n    private _stencilCompareModeFront:number;\n    private _stencilReferenceValue : number = 0;\n    private _stencilReadMask : number = 0xff;\n    private _separateStencil : boolean = false;\n\n\n\tpublic get container():HTMLElement\n\t{\n\t\treturn this._container;\n\t}\n\tpublic get standardDerivatives():boolean\n\t{\n\t\treturn this._standardDerivatives;\n\t}\n\tconstructor(canvas:HTMLCanvasElement)\n\t{\n\t\tthis._container = canvas;\n\n\t\ttry {\n\t\t\tthis._gl = <WebGLRenderingContext> canvas.getContext(\"experimental-webgl\", { premultipliedAlpha:false, alpha:false, stencil:true });\n\n\t\t\tif (!this._gl)\n\t\t\t\tthis._gl = <WebGLRenderingContext> canvas.getContext(\"webgl\", { premultipliedAlpha:false, alpha:false, stencil:true });\n\t\t} catch (e) {\n\t\t\t//this.dispatchEvent( new away.events.AwayEvent( away.events.AwayEvent.INITIALIZE_FAILED, e ) );\n\t\t}\n\n\t\tif (this._gl) {\n\t\t\t//this.dispatchEvent( new away.events.AwayEvent( away.events.AwayEvent.INITIALIZE_SUCCESS ) );\n\n\t\t\tif(this._gl.getExtension(\"OES_standard_derivatives\"))\n\t\t\t{\n\t\t\t\tthis._standardDerivatives = true;\n\t\t\t}else{\n\t\t\t\tthis._standardDerivatives = false;\n\t\t\t}\n\n\t\t\t//setup shortcut dictionaries\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.ONE] = this._gl.ONE;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.DESTINATION_ALPHA] = this._gl.DST_ALPHA;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.DESTINATION_COLOR] = this._gl.DST_COLOR;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.ONE] = this._gl.ONE;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.ONE_MINUS_DESTINATION_ALPHA] = this._gl.ONE_MINUS_DST_ALPHA;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.ONE_MINUS_DESTINATION_COLOR] = this._gl.ONE_MINUS_DST_COLOR;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.ONE_MINUS_SOURCE_ALPHA] = this._gl.ONE_MINUS_SRC_ALPHA;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.ONE_MINUS_SOURCE_COLOR] = this._gl.ONE_MINUS_SRC_COLOR;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.SOURCE_ALPHA] = this._gl.SRC_ALPHA;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.SOURCE_COLOR] = this._gl.SRC_COLOR;\n\t\t\tthis._blendFactorDictionary[ContextGLBlendFactor.ZERO] = this._gl.ZERO;\n\n\t\t\tthis._drawModeDictionary[ContextGLDrawMode.LINES] = this._gl.LINES;\n\t\t\tthis._drawModeDictionary[ContextGLDrawMode.TRIANGLES] = this._gl.TRIANGLES;\n\n            this._compareModeDictionary[ContextGLCompareMode.ALWAYS] = this._gl.ALWAYS;\n            this._compareModeDictionary[ContextGLCompareMode.EQUAL] = this._gl.EQUAL;\n            this._compareModeDictionary[ContextGLCompareMode.GREATER] = this._gl.GREATER;\n\t\t\tthis._compareModeDictionary[ContextGLCompareMode.GREATER_EQUAL] = this._gl.GEQUAL;\n\t\t\tthis._compareModeDictionary[ContextGLCompareMode.LESS] = this._gl.LESS;\n\t\t\tthis._compareModeDictionary[ContextGLCompareMode.LESS_EQUAL] = this._gl.LEQUAL;\n\t\t\tthis._compareModeDictionary[ContextGLCompareMode.NEVER] = this._gl.NEVER;\n\t\t\tthis._compareModeDictionary[ContextGLCompareMode.NOT_EQUAL] = this._gl.NOTEQUAL;\n\n            this._stencilActionDictionary[ContextGLStencilAction.DECREMENT_SATURATE] = this._gl.DECR;\n            this._stencilActionDictionary[ContextGLStencilAction.DECREMENT_WRAP] = this._gl.DECR_WRAP;\n            this._stencilActionDictionary[ContextGLStencilAction.INCREMENT_SATURATE] = this._gl.INCR;\n            this._stencilActionDictionary[ContextGLStencilAction.INCREMENT_WRAP] = this._gl.INCR_WRAP;\n            this._stencilActionDictionary[ContextGLStencilAction.INVERT] = this._gl.INVERT;\n            this._stencilActionDictionary[ContextGLStencilAction.KEEP] = this._gl.KEEP;\n            this._stencilActionDictionary[ContextGLStencilAction.SET] = this._gl.REPLACE;\n            this._stencilActionDictionary[ContextGLStencilAction.ZERO] = this._gl.ZERO;\n\n\t\t\tthis._textureIndexDictionary[0] = this._gl.TEXTURE0;\n\t\t\tthis._textureIndexDictionary[1] = this._gl.TEXTURE1;\n\t\t\tthis._textureIndexDictionary[2] = this._gl.TEXTURE2;\n\t\t\tthis._textureIndexDictionary[3] = this._gl.TEXTURE3;\n\t\t\tthis._textureIndexDictionary[4] = this._gl.TEXTURE4;\n\t\t\tthis._textureIndexDictionary[5] = this._gl.TEXTURE5;\n\t\t\tthis._textureIndexDictionary[6] = this._gl.TEXTURE6;\n\t\t\tthis._textureIndexDictionary[7] = this._gl.TEXTURE7;\n\n\t\t\tthis._textureTypeDictionary[\"texture2d\"] = this._gl.TEXTURE_2D;\n\t\t\tthis._textureTypeDictionary[\"textureCube\"] = this._gl.TEXTURE_CUBE_MAP;\n\n\t\t\tthis._wrapDictionary[ContextGLWrapMode.REPEAT] = this._gl.REPEAT;\n\t\t\tthis._wrapDictionary[ContextGLWrapMode.CLAMP] = this._gl.CLAMP_TO_EDGE;\n\n\t\t\tthis._filterDictionary[ContextGLTextureFilter.LINEAR] = this._gl.LINEAR;\n\t\t\tthis._filterDictionary[ContextGLTextureFilter.NEAREST] = this._gl.NEAREST;\n\n\t\t\tthis._mipmapFilterDictionary[ContextGLTextureFilter.LINEAR] = new Object();\n\t\t\tthis._mipmapFilterDictionary[ContextGLTextureFilter.LINEAR][ContextGLMipFilter.MIPNEAREST] = this._gl.LINEAR_MIPMAP_NEAREST;\n\t\t\tthis._mipmapFilterDictionary[ContextGLTextureFilter.LINEAR][ContextGLMipFilter.MIPLINEAR] = this._gl.LINEAR_MIPMAP_LINEAR;\n\t\t\tthis._mipmapFilterDictionary[ContextGLTextureFilter.LINEAR][ContextGLMipFilter.MIPNONE] = this._gl.LINEAR;\n\t\t\tthis._mipmapFilterDictionary[ContextGLTextureFilter.NEAREST] = new Object();\n\t\t\tthis._mipmapFilterDictionary[ContextGLTextureFilter.NEAREST][ContextGLMipFilter.MIPNEAREST] = this._gl.NEAREST_MIPMAP_NEAREST;\n\t\t\tthis._mipmapFilterDictionary[ContextGLTextureFilter.NEAREST][ContextGLMipFilter.MIPLINEAR] = this._gl.NEAREST_MIPMAP_LINEAR;\n\t\t\tthis._mipmapFilterDictionary[ContextGLTextureFilter.NEAREST][ContextGLMipFilter.MIPNONE] = this._gl.NEAREST;\n\n\t\t\tthis._vertexBufferPropertiesDictionary[ContextGLVertexBufferFormat.FLOAT_1] = new VertexBufferProperties(1, this._gl.FLOAT, false);\n\t\t\tthis._vertexBufferPropertiesDictionary[ContextGLVertexBufferFormat.FLOAT_2] = new VertexBufferProperties(2, this._gl.FLOAT, false);\n\t\t\tthis._vertexBufferPropertiesDictionary[ContextGLVertexBufferFormat.FLOAT_3] = new VertexBufferProperties(3, this._gl.FLOAT, false);\n\t\t\tthis._vertexBufferPropertiesDictionary[ContextGLVertexBufferFormat.FLOAT_4] = new VertexBufferProperties(4, this._gl.FLOAT, false);\n\t\t\tthis._vertexBufferPropertiesDictionary[ContextGLVertexBufferFormat.BYTES_4] = new VertexBufferProperties(4, this._gl.UNSIGNED_BYTE, true);\n\n            this._stencilCompareMode = this._gl.ALWAYS;\n            this._stencilCompareModeBack = this._gl.ALWAYS;\n            this._stencilCompareModeFront = this._gl.ALWAYS;\n\t\t} else {\n\t\t\t//this.dispatchEvent( new away.events.AwayEvent( away.events.AwayEvent.INITIALIZE_FAILED, e ) );\n\t\t\talert(\"WebGL is not available.\");\n\t\t}\n\n\t\t//defaults\n\t\tfor (var i:number = 0; i < ContextWebGL.MAX_SAMPLERS; ++i) {\n\t\t\tthis._samplerStates[i] = new SamplerState();\n\t\t\tthis._samplerStates[i].wrap = this._gl.REPEAT;\n\t\t\tthis._samplerStates[i].filter = this._gl.LINEAR;\n\t\t\tthis._samplerStates[i].mipfilter = this._gl.LINEAR;\n\t\t}\n\t}\n\n\tpublic gl():WebGLRenderingContext\n\t{\n\t\treturn this._gl;\n\t}\n\n\tpublic clear(red:number = 0, green:number = 0, blue:number = 0, alpha:number = 1, depth:number = 1, stencil:number = 0, mask:number = ContextGLClearMask.ALL)\n\t{\n\t\tif (!this._drawing) {\n\t\t\tthis.updateBlendStatus();\n\t\t\tthis._drawing = true;\n\t\t}\n\n\t\tvar glmask:number = 0;\n\t\tif (mask & ContextGLClearMask.COLOR) glmask |= this._gl.COLOR_BUFFER_BIT;\n\t\tif (mask & ContextGLClearMask.STENCIL) glmask |= this._gl.STENCIL_BUFFER_BIT;\n\t\tif (mask & ContextGLClearMask.DEPTH) glmask |= this._gl.DEPTH_BUFFER_BIT;\n\n\t\tthis._gl.clearColor(red, green, blue, alpha);\n\t\tthis._gl.clearDepth(depth);\n\t\tthis._gl.clearStencil(stencil);\n\t\tthis._gl.clear(glmask);\n\t}\n\n\tpublic configureBackBuffer(width:number, height:number, antiAlias:number, enableDepthAndStencil:boolean = true)\n\t{\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tif (enableDepthAndStencil) {\n\t\t\tthis._gl.enable(this._gl.STENCIL_TEST);\n\t\t\tthis._gl.enable(this._gl.DEPTH_TEST);\n\t\t}\n\n\t\tthis._gl.viewport['width'] = width;\n\t\tthis._gl.viewport['height'] = height;\n\n\t\tthis._gl.viewport(0, 0, width, height);\n\t}\n\n\tpublic createCubeTexture(size:number, format:string, optimizeForRenderToTexture:boolean, streamingLevels:number = 0):CubeTextureWebGL\n\t{\n\t\treturn new CubeTextureWebGL(this._gl, size);\n\t}\n\n\tpublic createIndexBuffer(numIndices:number):IndexBufferWebGL\n\t{\n\t\treturn new IndexBufferWebGL(this._gl, numIndices);\n\t}\n\n\tpublic createProgram():ProgramWebGL\n\t{\n\t\treturn new ProgramWebGL(this._gl);\n\t}\n\n\tpublic createTexture(width:number, height:number, format:string, optimizeForRenderToTexture:boolean, streamingLevels:number = 0):TextureWebGL\n\t{\n\t\t//TODO streaming\n\t\treturn new TextureWebGL(this._gl, width, height);\n\t}\n\n\tpublic createVertexBuffer(numVertices:number, dataPerVertex:number):VertexBufferWebGL\n\t{\n\t\treturn new VertexBufferWebGL(this._gl, numVertices, dataPerVertex);\n\t}\n\n\tpublic dispose()\n\t{\n\t\tfor (var i:number = 0; i < this._samplerStates.length; ++i)\n\t\t\tthis._samplerStates[i] = null;\n\t}\n\n\tpublic drawToBitmapImage2D(destination:BitmapImage2D)\n\t{\n\t\tvar arrayBuffer:ArrayBuffer = new ArrayBuffer(destination.width*destination.height*4);\n\n\t\tthis._gl.readPixels(0, 0, destination.width, destination.height, this._gl.RGBA, this._gl.UNSIGNED_BYTE, new Uint8Array(arrayBuffer));\n\n\t\tvar byteArray:ByteArray = new ByteArray();\n\t\tbyteArray.setArrayBuffer(arrayBuffer);\n\n\t\tdestination.setPixels(new Rectangle(0, 0, destination.width, destination.height), byteArray);\n\t}\n\n\tpublic drawIndices(mode:string, indexBuffer:IndexBufferWebGL, firstIndex:number = 0, numIndices:number = -1)\n\t{\n\t\tif (!this._drawing)\n\t\t\tthrow \"Need to clear before drawing if the buffer has not been cleared since the last present() call.\";\n\n\n\t\tthis._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER, indexBuffer.glBuffer);\n\t\tthis._gl.drawElements(this._drawModeDictionary[mode], (numIndices == -1)? indexBuffer.numIndices : numIndices, this._gl.UNSIGNED_SHORT, firstIndex*2);\n\t}\n\n\tpublic drawVertices(mode:string, firstVertex:number = 0, numVertices:number = -1)\n\t{\n\t\tif (!this._drawing)\n\t\t\tthrow \"Need to clear before drawing if the buffer has not been cleared since the last present() call.\";\n\n\t\tthis._gl.drawArrays(this._drawModeDictionary[mode], firstVertex, numVertices);\n\t}\n\n\tpublic present()\n\t{\n\t\tthis._drawing = false;\n\t}\n\n\tpublic setBlendFactors(sourceFactor:string, destinationFactor:string)\n\t{\n\t\tthis._blendEnabled = true;\n\n\t\tthis._blendSourceFactor = this._blendFactorDictionary[sourceFactor];\n\n\t\tthis._blendDestinationFactor = this._blendFactorDictionary[destinationFactor];\n\n\t\tthis.updateBlendStatus();\n\t}\n\n\tpublic setColorMask(red:boolean, green:boolean, blue:boolean, alpha:boolean)\n\t{\n\t\tthis._gl.colorMask(red, green, blue, alpha);\n\t}\n\n\tpublic setCulling(triangleFaceToCull:string, coordinateSystem:string = \"leftHanded\")\n\t{\n\t\tif (triangleFaceToCull == ContextGLTriangleFace.NONE) {\n\t\t\tthis._gl.disable(this._gl.CULL_FACE);\n\t\t} else {\n\t\t\tthis._gl.enable(this._gl.CULL_FACE);\n            this._gl.cullFace(this.translateTriangleFace(triangleFaceToCull, coordinateSystem));\n\t\t}\n\t}\n\n\t// TODO ContextGLCompareMode\n\tpublic setDepthTest(depthMask:boolean, passCompareMode:string)\n\t{\n\t\tthis._gl.depthFunc(this._compareModeDictionary[passCompareMode]);\n\n\t\tthis._gl.depthMask(depthMask);\n\t}\n\n    public setStencilActions(triangleFace:string = \"frontAndBack\", compareMode:string = \"always\", actionOnBothPass:string = \"keep\", actionOnDepthFail:string = \"keep\", actionOnDepthPassStencilFail:string = \"keep\", coordinateSystem:string = \"leftHanded\")\n    {\n        this._separateStencil = triangleFace != \"frontAndBack\";\n\n        var compareModeGL = this._compareModeDictionary[compareMode];\n\n        var fail = this._stencilActionDictionary[actionOnDepthPassStencilFail];\n        var zFail = this._stencilActionDictionary[actionOnDepthFail];\n        var pass = this._stencilActionDictionary[actionOnBothPass];\n\n        if (!this._separateStencil) {\n            this._stencilCompareMode = compareModeGL;\n            this._gl.stencilFunc(compareModeGL, this._stencilReferenceValue, this._stencilReadMask);\n            this._gl.stencilOp(fail, zFail, pass);\n        }\n        else if (triangleFace == \"back\") {\n            this._stencilCompareModeBack = compareModeGL;\n            this._gl.stencilFuncSeparate(this._gl.BACK, compareModeGL, this._stencilReferenceValue, this._stencilReadMask);\n            this._gl.stencilOpSeparate(this._gl.BACK, fail, zFail, pass);\n        }\n        else if (triangleFace == \"front\") {\n            this._stencilCompareModeFront = compareModeGL;\n            this._gl.stencilFuncSeparate(this._gl.FRONT, compareModeGL, this._stencilReferenceValue, this._stencilReadMask);\n            this._gl.stencilOpSeparate(this._gl.FRONT, fail, zFail, pass);\n        }\n    }\n\n    public setStencilReferenceValue(referenceValue:number, readMask:number, writeMask:number)\n    {\n        this._stencilReferenceValue = referenceValue;\n        this._stencilReadMask = readMask;\n\n        if (this._separateStencil) {\n            this._gl.stencilFuncSeparate(this._gl.FRONT, this._stencilCompareModeFront, referenceValue, readMask);\n            this._gl.stencilFuncSeparate(this._gl.BACK, this._stencilCompareModeBack, referenceValue, readMask);\n        }\n        else {\n            this._gl.stencilFunc(this._stencilCompareMode, referenceValue, readMask);\n        }\n\n        this._gl.stencilMask(writeMask);\n    }\n\n\tpublic setProgram(program:ProgramWebGL)\n\t{\n\t\t//TODO decide on construction/reference resposibilities\n\t\tthis._currentProgram = program;\n\t\tprogram.focusProgram();\n\t}\n\n\tprivate static _float4:Float32Array = new Float32Array(4);\n\n\tpublic setProgramConstantsFromMatrix(programType:number, firstRegister:number, matrix:Matrix3D, transposedMatrix:boolean = false)\n\t{\n\t\t//this._gl.uniformMatrix4fv(this._gl.getUniformLocation(this._currentProgram.glProgram, this._uniformLocationNameDictionary[programType]), !transposedMatrix, new Float32Array(matrix.rawData));\n\n\t\t//TODO remove special case for WebGL matrix calls?\n\t\tvar d:Float32Array = matrix.rawData;\n\t\tif (transposedMatrix) {\n\t\t\tvar raw:Float32Array = Matrix3DUtils.RAW_DATA_CONTAINER;\n\t\t\traw[0] = d[0];\n\t\t\traw[1] = d[4];\n\t\t\traw[2] = d[8];\n\t\t\traw[3] = d[12];\n\t\t\traw[4] = d[1];\n\t\t\traw[5] = d[5];\n\t\t\traw[6] = d[9];\n\t\t\traw[7] = d[13];\n\t\t\traw[8] = d[2];\n\t\t\traw[9] = d[6];\n\t\t\traw[10] = d[10];\n\t\t\traw[11] = d[14];\n\t\t\traw[12] = d[3];\n\t\t\traw[13] = d[7];\n\t\t\traw[14] = d[11];\n\t\t\traw[15] = d[15];\n\n\t\t\tthis.setProgramConstantsFromArray(programType, firstRegister, raw, 4);\n\t\t} else {\n\t\t\tthis.setProgramConstantsFromArray(programType, firstRegister, d, 4);\n\t\t}\n\t}\n\n\tpublic static modulo:number = 0;\n\n\tpublic setProgramConstantsFromArray(programType:number, firstRegister:number, data:Float32Array, numRegisters:number = -1)\n\t{\n\t\tvar startIndex:number;\n\t\tfor (var i:number = 0; i < numRegisters; i++) {\n\t\t\tstartIndex = i*4;\n\t\t\tthis._gl.uniform4f(this._currentProgram.getUniformLocation(programType, (firstRegister + i)), data[startIndex], data[startIndex + 1], data[startIndex + 2], data[startIndex + 3]);\n\t\t}\n\t}\n\n\tpublic setScissorRectangle(rectangle:Rectangle)\n\t{\n\t\tif (!rectangle) {\n\t\t\tthis._gl.disable(this._gl.SCISSOR_TEST);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._gl.enable(this._gl.SCISSOR_TEST);\n\t\tthis._gl.scissor(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n\t}\n\n\tpublic setTextureAt(sampler:number, texture:TextureBaseWebGL)\n\t{\n\t\tvar samplerState:SamplerState = this._samplerStates[sampler];\n\n\t\tif (this._activeTexture != sampler && (texture || samplerState.type)) {\n\t\t\tthis._activeTexture = sampler;\n\t\t\tthis._gl.activeTexture(this._textureIndexDictionary[sampler]);\n\t\t}\n\n\t\tif (!texture) {\n\t\t\tif (samplerState.type) {\n\t\t\t\tthis._gl.bindTexture(samplerState.type, null);\n\t\t\t\tsamplerState.type = null;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar textureType:number = this._textureTypeDictionary[texture.textureType];\n\t\tsamplerState.type = textureType;\n\n\t\tthis._gl.bindTexture(textureType, texture.glTexture);\n\n\t\tthis._gl.uniform1i(this._currentProgram.getUniformLocation(ContextGLProgramType.SAMPLER, sampler), sampler);\n\n\t\tthis._gl.texParameteri(textureType, this._gl.TEXTURE_WRAP_S, samplerState.wrap);\n\t\tthis._gl.texParameteri(textureType, this._gl.TEXTURE_WRAP_T, samplerState.wrap);\n\n\t\tthis._gl.texParameteri(textureType, this._gl.TEXTURE_MAG_FILTER, samplerState.filter);\n\t\tthis._gl.texParameteri(textureType, this._gl.TEXTURE_MIN_FILTER, samplerState.mipfilter);\n\t}\n\n\tpublic setSamplerStateAt(sampler:number, wrap:string, filter:string, mipfilter:string):void\n\t{\n\t\tif (0 <= sampler && sampler < ContextWebGL.MAX_SAMPLERS) {\n\t\t\tthis._samplerStates[sampler].wrap = this._wrapDictionary[wrap];\n\t\t\tthis._samplerStates[sampler].filter = this._filterDictionary[filter];\n\t\t\tthis._samplerStates[sampler].mipfilter = this._mipmapFilterDictionary[filter][mipfilter];\n\t\t} else {\n\t\t\tthrow \"Sampler is out of bounds.\";\n\t\t}\n\t}\n\n\tpublic setVertexBufferAt(index:number, buffer:VertexBufferWebGL, bufferOffset:number = 0, format:number = 4)\n\t{\n\t\tvar location:number = this._currentProgram? this._currentProgram.getAttribLocation(index) : -1;\n\n\t\tif (!buffer) {\n\t\t\tif (location > -1)\n\t\t\t\tthis._gl.disableVertexAttribArray(location);\n\n\t\t\treturn;\n\t\t}\n\n\t\t//buffer may not have changed if concatenated buffers are being used\n\t\tif (this._currentArrayBuffer != buffer) {\n\t\t\tthis._currentArrayBuffer = buffer;\n\t\t\tthis._gl.bindBuffer(this._gl.ARRAY_BUFFER, buffer? buffer.glBuffer : null);\n\t\t}\n\n\t\tvar properties:VertexBufferProperties = this._vertexBufferPropertiesDictionary[format];\n\n\t\tthis._gl.enableVertexAttribArray(location);\n\t\tthis._gl.vertexAttribPointer(location, properties.size, properties.type, properties.normalized, buffer.dataPerVertex, bufferOffset);\n\t}\n\n\tpublic setRenderToTexture(target:TextureBaseWebGL, enableDepthAndStencil:boolean = false, antiAlias:number = 0, surfaceSelector:number = 0)\n\t{\n\t\tvar texture:TextureWebGL = <TextureWebGL> target;\n\t\tvar frameBuffer:WebGLFramebuffer = texture.frameBuffer;\n\t\tthis._gl.bindFramebuffer(this._gl.FRAMEBUFFER, frameBuffer);\n\n\t\tif (enableDepthAndStencil) {\n\t\t\tthis._gl.enable(this._gl.STENCIL_TEST);\n\t\t\tthis._gl.enable(this._gl.DEPTH_TEST);\n\t\t}\n\n\t\tthis._gl.viewport(0, 0, texture.width, texture.height );\n\t}\n\n\tpublic setRenderToBackBuffer()\n\t{\n\t\tthis._gl.bindFramebuffer(this._gl.FRAMEBUFFER, null);\n\t}\n\n\tprivate updateBlendStatus()\n\t{\n\t\tif (this._blendEnabled) {\n\t\t\tthis._gl.enable(this._gl.BLEND);\n\t\t\tthis._gl.blendEquation(this._gl.FUNC_ADD);\n\t\t\tthis._gl.blendFunc(this._blendSourceFactor, this._blendDestinationFactor);\n\t\t} else {\n\t\t\tthis._gl.disable(this._gl.BLEND);\n\t\t}\n\t}\n\n    private translateTriangleFace(triangleFace:string, coordinateSystem:string)\n    {\n        switch (triangleFace) {\n            case ContextGLTriangleFace.BACK:\n                return (coordinateSystem == \"leftHanded\")? this._gl.FRONT : this._gl.BACK;\n                break\n            case ContextGLTriangleFace.FRONT:\n                return (coordinateSystem == \"leftHanded\")? this._gl.BACK : this._gl.FRONT;\n                break;\n            case ContextGLTriangleFace.FRONT_AND_BACK:\n                return this._gl.FRONT_AND_BACK;\n                break;\n            default:\n                throw \"Unknown ContextGLTriangleFace type.\"; // TODO error\n        }\n    }\n}\n\nexport = ContextWebGL;\n\n\nclass VertexBufferProperties\n{\n\tpublic size:number;\n\n\tpublic type:number;\n\n\tpublic normalized:boolean;\n\n\tconstructor(size:number, type:number, normalized:boolean)\n\t{\n\t\tthis.size = size;\n\t\tthis.type = type;\n\t\tthis.normalized = normalized;\n\t}\n}",
    "import ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\nimport ByteArrayBase\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArrayBase\");\n\nimport ContextStage3D\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextStage3D\");\nimport ICubeTexture\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ICubeTexture\");\nimport OpCodes\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/OpCodes\");\nimport ResourceBaseFlash\t\t\t= require(\"awayjs-stagegl/lib/base/ResourceBaseFlash\");\n\nclass CubeTextureFlash extends ResourceBaseFlash implements ICubeTexture\n{\n\tprivate _context:ContextStage3D;\n\tprivate _size:number;\n\n\tpublic get size():number\n\t{\n\t\treturn this._size;\n\t}\n\n\tconstructor(context:ContextStage3D, size:number, format:string, forRTT:boolean, streaming:boolean = false)\n\t{\n\t\tsuper();\n\n\t\tthis._context = context;\n\t\tthis._size = size;\n\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.initCubeTexture, (forRTT? OpCodes.trueValue : OpCodes.falseValue)) + size + \",\" + streaming + \",\" + format + \"$\");\n\t\tthis._pId = this._context.execute();\n\t\tthis._context._iAddResource(this);\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.disposeCubeTexture) + this._pId.toString() + \",\");\n\t\tthis._context.execute();\n\t\tthis._context._iRemoveResource(this);\n\n\t\tthis._context = null;\n\t}\n\n\tpublic uploadFromData(image:HTMLImageElement, side:number, miplevel?:number);\n\tpublic uploadFromData(imageData:ImageData, side:number, miplevel?:number);\n\tpublic uploadFromData(data:any, side:number, miplevel:number = 0)\n\t{\n\t\tif (data instanceof HTMLImageElement) {\n\t\t\tvar can = document.createElement(\"canvas\");\n\t\t\tvar w = data.width;\n\t\t\tvar h = data.height;\n\t\t\tcan.width = w;\n\t\t\tcan.height = h;\n\t\t\tvar ctx = can.getContext(\"2d\");\n\t\t\tctx.drawImage(data, 0, 0);\n\t\t\tdata = ctx.getImageData(0, 0, w, h).data;\n\t\t}\n\n\t\tvar pos = 0;\n\t\tvar bytes = ByteArrayBase.internalGetBase64String(data.length, function () {\n\t\t\treturn data[pos++];\n\t\t}, null);\n\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.uploadBytesCubeTexture) + this._pId + \",\" + miplevel + \",\" + side + \",\" + (this.size >> miplevel) + \",\" + bytes + \"%\");\n\t\tthis._context.execute();\n\t}\n\n\tpublic uploadCompressedTextureFromByteArray(data:ByteArray, byteArrayOffset:number /*uint*/, async:boolean = false)\n\t{\n\n\t}\n}\n\nexport = CubeTextureFlash;",
    "import ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport ICubeTexture\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ICubeTexture\");\nimport TextureBaseWebGL\t\t\t\t= require(\"awayjs-stagegl/lib/base/TextureBaseWebGL\");\n\nclass CubeTextureWebGL extends TextureBaseWebGL implements ICubeTexture\n{\n\n\tprivate _textureSelectorDictionary:Array<number> = new Array<number>(6);\n\n\tpublic textureType:string = \"textureCube\";\n\tprivate _texture:WebGLTexture;\n\tprivate _size:number;\n\n\tconstructor(gl:WebGLRenderingContext, size:number)\n\t{\n\t\tsuper(gl);\n\t\tthis._size = size;\n\t\tthis._texture = this._gl.createTexture();\n\n\t\tthis._textureSelectorDictionary[0] = gl.TEXTURE_CUBE_MAP_POSITIVE_X;\n\t\tthis._textureSelectorDictionary[1] = gl.TEXTURE_CUBE_MAP_NEGATIVE_X;\n\t\tthis._textureSelectorDictionary[2] = gl.TEXTURE_CUBE_MAP_POSITIVE_Y;\n\t\tthis._textureSelectorDictionary[3] = gl.TEXTURE_CUBE_MAP_NEGATIVE_Y;\n\t\tthis._textureSelectorDictionary[4] = gl.TEXTURE_CUBE_MAP_POSITIVE_Z;\n\t\tthis._textureSelectorDictionary[5] = gl.TEXTURE_CUBE_MAP_NEGATIVE_Z;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._gl.deleteTexture(this._texture);\n\t}\n\n\tpublic uploadFromData(image:HTMLImageElement, side:number, miplevel?:number);\n\tpublic uploadFromData(imageData:ImageData, side:number, miplevel?:number);\n\tpublic uploadFromData(data:any, side:number, miplevel:number = 0)\n\t{\n\t\tthis._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP, this._texture);\n\t\tthis._gl.texImage2D(this._textureSelectorDictionary[side], miplevel, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, data);\n\t\tthis._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP, null);\n\t}\n\n\tpublic uploadCompressedTextureFromByteArray(data:ByteArray, byteArrayOffset:number /*uint*/, async:boolean = false)\n\t{\n\n\t}\n\n\tpublic get size():number\n\t{\n\t\treturn this._size;\n\t}\n\n\tpublic get glTexture():WebGLTexture\n\t{\n\t\treturn this._texture;\n\t}\n}\n\nexport = CubeTextureWebGL;",
    "import ContextStage3D\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextStage3D\");\nimport IIndexBuffer\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IIndexBuffer\");\nimport OpCodes\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/OpCodes\");\nimport ResourceBaseFlash\t\t\t= require(\"awayjs-stagegl/lib/base/ResourceBaseFlash\");\n\nclass IndexBufferFlash extends ResourceBaseFlash implements IIndexBuffer\n{\n\tprivate _context:ContextStage3D;\n\tprivate _numIndices:number;\n\n\tconstructor(context:ContextStage3D, numIndices:number)\n\t{\n\t\tsuper();\n\n\t\tthis._context = context;\n\t\tthis._numIndices = numIndices;\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.initIndexBuffer, numIndices + OpCodes.intMask));\n\t\tthis._pId = this._context.execute();\n\t\tthis._context._iAddResource(this);\n\t}\n\tpublic uploadFromArray(data:number[], startOffset:number, count:number):void\n\t{\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.uploadArrayIndexBuffer, this._pId + OpCodes.intMask) + data.join() + \"#\" + startOffset + \",\" + count + \",\");\n\t\tthis._context.execute();\n\t}\n\n\tpublic uploadFromByteArray(data:ArrayBuffer, startOffset:number, count:number)\n\t{\n\n\t}\n\n\tpublic dispose():void\n\t{\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.disposeIndexBuffer, this._pId + OpCodes.intMask));\n\t\tthis._context.execute();\n\t\tthis._context._iRemoveResource(this);\n\n\t\tthis._context = null;\n\t}\n\n\tpublic get numIndices():number\n\t{\n\t\treturn this._numIndices;\n\t}\n}\n\nexport = IndexBufferFlash;",
    "import IIndexBuffer                    = require(\"awayjs-stagegl/lib/base/IIndexBuffer\");\n\nclass IndexBufferSoftware implements IIndexBuffer {\n    private _numIndices:number;\n    private _data:Uint16Array;\n    private _startOffset:number;\n\n    constructor(numIndices:number) {\n        this._numIndices = numIndices;\n    }\n\n    public uploadFromArray(data:number[], startOffset:number, count:number):void {\n        this._startOffset = startOffset * 2;\n        this._data = new Uint16Array(data);\n    }\n\n    public uploadFromByteArray(data:ArrayBuffer, startOffset:number, count:number) {\n        this._startOffset = startOffset * 2;\n        this._data = new Uint16Array(data);\n    }\n\n    public dispose():void {\n        this._data.length = 0;\n    }\n\n    public get numIndices():number {\n        return this._numIndices;\n    }\n\n    public get data():Uint16Array {\n        return this._data;\n    }\n\n    public get startOffset():number {\n        return this._startOffset;\n    }\n\n}\n\nexport = IndexBufferSoftware;",
    "import IIndexBuffer\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IIndexBuffer\");\n\nclass IndexBufferWebGL implements IIndexBuffer\n{\n\n\tprivate _gl:WebGLRenderingContext;\n\tprivate _numIndices:number;\n\tprivate _buffer:WebGLBuffer;\n\n\tconstructor(gl:WebGLRenderingContext, numIndices:number)\n\t{\n\t\tthis._gl = gl;\n\t\tthis._buffer = this._gl.createBuffer();\n\t\tthis._numIndices = numIndices;\n\t}\n\n\tpublic uploadFromArray(data:number[], startOffset:number, count:number):void\n\t{\n\t\tthis._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER, this._buffer);\n\n\t\tif (startOffset)\n\t\t\tthis._gl.bufferSubData(this._gl.ELEMENT_ARRAY_BUFFER, startOffset*2, new Uint16Array(data));\n\t\telse\n\t\t\tthis._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(data), this._gl.STATIC_DRAW);\n\t}\n\n\tpublic uploadFromByteArray(data:ArrayBuffer, startOffset:number, count:number)\n\t{\n\t\tthis._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER, this._buffer);\n\n\t\tif (startOffset)\n\t\t\tthis._gl.bufferSubData(this._gl.ELEMENT_ARRAY_BUFFER, startOffset*2, data);\n\t\telse\n\t\t\tthis._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, data, this._gl.STATIC_DRAW);\n\t}\n\n\tpublic dispose():void\n\t{\n\t\tthis._gl.deleteBuffer(this._buffer);\n\t}\n\n\tpublic get numIndices():number\n\t{\n\t\treturn this._numIndices;\n\t}\n\n\tpublic get glBuffer():WebGLBuffer\n\t{\n\t\treturn this._buffer;\n\t}\n}\n\nexport = IndexBufferWebGL;",
    "class OpCodes\n{\n\tpublic static trueValue:number = 32;\n\tpublic static falseValue:number = 33;\n\tpublic static intMask:number = 63;\n\tpublic static drawTriangles:number = 41;\n\tpublic static setProgramConstant:number = 42;\n\tpublic static setProgram:number = 43;\n\tpublic static present:number = 44;\n\tpublic static clear:number = 45;\n\tpublic static initProgram:number = 46;\n\tpublic static initVertexBuffer:number = 47;\n\tpublic static initIndexBuffer:number = 48;\n\tpublic static configureBackBuffer:number = 49;\n\tpublic static uploadArrayIndexBuffer:number = 50;\n\tpublic static uploadArrayVertexBuffer:number = 51;\n\tpublic static uploadAGALBytesProgram:number = 52;\n\tpublic static setVertexBufferAt:number = 53;\n\tpublic static uploadBytesIndexBuffer:number = 54;\n\tpublic static uploadBytesVertexBuffer:number = 55;\n\tpublic static setColorMask:number = 56;\n\tpublic static setDepthTest:number = 57;\n\tpublic static disposeProgram:number = 58;\n\tpublic static disposeContext:number = 59;\n\t// must skip 60 '<' as it will invalidate xml being passed over the bridge\n\tpublic static disposeVertexBuffer:number = 61;\n\t// must skip 62 '>' as it will invalidate xml being passed over the bridge\n\tpublic static disposeIndexBuffer:number = 63;\n\tpublic static initTexture:number = 64;\n\tpublic static setTextureAt:number = 65;\n\tpublic static uploadBytesTexture:number = 66;\n\tpublic static disposeTexture:number = 67;\n\tpublic static setCulling:number = 68;\n\tpublic static setScissorRect:number = 69;\n\tpublic static clearScissorRect:number = 70;\n\tpublic static setBlendFactors:number = 71;\n\tpublic static setRenderToTexture:number = 72;\n\tpublic static clearTextureAt:number = 73;\n\tpublic static clearVertexBufferAt:number = 74;\n\tpublic static setStencilActions:number = 75;\n\tpublic static setStencilReferenceValue:number = 76;\n\tpublic static initCubeTexture:number = 77;\n\tpublic static disposeCubeTexture:number = 78;\n\tpublic static uploadBytesCubeTexture:number = 79;\n\tpublic static clearRenderToTexture:number = 80;\n\tpublic static enableErrorChecking:number = 81;\n}\n\nexport = OpCodes;",
    "import ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport ContextStage3D\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextStage3D\");\nimport IProgram\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IProgram\");\nimport OpCodes\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/OpCodes\");\nimport ResourceBaseFlash\t\t\t= require(\"awayjs-stagegl/lib/base/ResourceBaseFlash\");\n\nclass ProgramFlash extends ResourceBaseFlash implements IProgram\n{\n\tprivate _context:ContextStage3D;\n\n\tconstructor(context:ContextStage3D)\n\t{\n\t\tsuper();\n\n\t\tthis._context = context;\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.initProgram));\n\t\tthis._pId = this._context.execute();\n\t\tthis._context._iAddResource(this);\n\t}\n\n\tpublic upload(vertexProgram:ByteArray, fragmentProgram:ByteArray)\n\t{\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.uploadAGALBytesProgram, this._pId + OpCodes.intMask) + vertexProgram.readBase64String(vertexProgram.length) + \"%\" + fragmentProgram.readBase64String(fragmentProgram.length) + \"%\");\n\n\t\tif (ContextStage3D.debug)\n\t\t\tthis._context.execute();\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.disposeProgram, this._pId + OpCodes.intMask));\n\t\tthis._context.execute();\n\t\tthis._context._iRemoveResource(this);\n\n\t\tthis._context = null;\n\t}\n}\n\nexport = ProgramFlash;",
    "import ByteArray                    = require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport AGALTokenizer                = require(\"awayjs-stagegl/lib/aglsl/AGALTokenizer\");\nimport AGLSLParser                    = require(\"awayjs-stagegl/lib/aglsl/AGLSLParser\");\nimport IProgram                        = require(\"awayjs-stagegl/lib/base/IProgram\");\nimport ProgramVOSoftware                        = require(\"awayjs-stagegl/lib/base/ProgramVOSoftware\");\nimport ContextSoftware                        = require(\"awayjs-stagegl/lib/base/ContextSoftware\");\nimport Description                = require(\"awayjs-stagegl/lib/aglsl/Description\");\nimport Header                    = require(\"awayjs-stagegl/lib/aglsl/Header\");\nimport Mapping                    = require(\"awayjs-stagegl/lib/aglsl/Mapping\");\nimport Token                    = require(\"awayjs-stagegl/lib/aglsl/Token\");\nimport Matrix3D                        = require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Point                        = require(\"awayjs-core/lib/geom/Point\");\nimport Vector3D                        = require(\"awayjs-core/lib/geom/Vector3D\");\nimport Destination                = require(\"awayjs-stagegl/lib/aglsl/Destination\");\nimport AGALMiniAssembler            = require(\"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler\");\nimport VertexBufferSoftware                    = require(\"awayjs-stagegl/lib/base/VertexBufferSoftware\");\nimport ContextGLVertexBufferFormat    = require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\nimport TextureSoftware                    = require(\"awayjs-stagegl/lib/base/TextureSoftware\");\nimport SoftwareSamplerState = require(\"awayjs-stagegl/lib/base/SoftwareSamplerState\");\nimport SamplerBase = require(\"awayjs-core/lib/image/SamplerBase\");\nimport Sampler2D = require(\"awayjs-core/lib/image/Sampler2D\");\nimport SamplerCube = require(\"awayjs-core/lib/image/SamplerCube\");\nimport ContextGLTextureFilter = require(\"awayjs-stagegl/lib/base/ContextGLTextureFilter\");\nimport ContextGLMipFilter = require(\"awayjs-stagegl/lib/base/ContextGLMipFilter\");\nimport ContextGLWrapMode = require(\"awayjs-stagegl/lib/base/ContextGLWrapMode\");\n\nclass ProgramSoftware implements IProgram {\n    private static _defaultSamplerState:SoftwareSamplerState = new SoftwareSamplerState();\n    private static _tokenizer:AGALTokenizer = new AGALTokenizer();\n    private static _opCodeFunc:{(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void}[] = [\n        ProgramSoftware.mov,\n        ProgramSoftware.add,\n        ProgramSoftware.sub,\n        ProgramSoftware.mul,\n        ProgramSoftware.div,\n        ProgramSoftware.rcp,\n        ProgramSoftware.min,\n        ProgramSoftware.max,\n        ProgramSoftware.frc,\n        ProgramSoftware.sqt,\n        ProgramSoftware.rsq,\n        ProgramSoftware.pow,\n        ProgramSoftware.log,\n        ProgramSoftware.exp,\n        ProgramSoftware.nrm,\n        ProgramSoftware.sin,\n        ProgramSoftware.cos,\n        ProgramSoftware.crs,\n        ProgramSoftware.dp3,\n        ProgramSoftware.dp4,\n        ProgramSoftware.abs,\n        ProgramSoftware.neg,\n        ProgramSoftware.sat,\n        ProgramSoftware.m33,\n        ProgramSoftware.m44,\n        ProgramSoftware.m34,//25\n        null,//26\n        null,//27\n        null,//28\n        null,//29\n        null,//30\n        null,//31\n        null,//32\n        null,//33\n        null,//34\n        null,//35\n        null,//36\n        null,//37\n        null,//38\n        ProgramSoftware.kil,\n        ProgramSoftware.tex,\n        ProgramSoftware.sge,\n        ProgramSoftware.slt,\n        ProgramSoftware.sgn,\n        ProgramSoftware.seq,\n        ProgramSoftware.sne\n    ];\n\n    private _vertexDescr:Description;\n    private _fragmentDescr:Description;\n\n    constructor() {\n\n    }\n\n    public upload(vertexProgram:ByteArray, fragmentProgram:ByteArray) {\n        this._vertexDescr = ProgramSoftware._tokenizer.decribeAGALByteArray(vertexProgram);\n        this._fragmentDescr = ProgramSoftware._tokenizer.decribeAGALByteArray(fragmentProgram);\n    }\n\n    public dispose() {\n        this._vertexDescr = null;\n        this._fragmentDescr = null;\n    }\n\n    public vertex(contextSoftware:ContextSoftware, vertexIndex:number):ProgramVOSoftware {\n        var vo:ProgramVOSoftware = new ProgramVOSoftware();\n        //parse attributes\n        var i:number;\n        for (i = 0; i < contextSoftware._vertexBuffers.length; i++) {\n            var buffer:VertexBufferSoftware = contextSoftware._vertexBuffers[i];\n            if (!buffer) continue;\n\n            var attribute:Vector3D = new Vector3D(0, 0, 0, 1);\n\n            var index:number = contextSoftware._vertexBufferOffsets[i] / 4 + vertexIndex * buffer.attributesPerVertex;\n            if (contextSoftware._vertexBufferFormats[i] == ContextGLVertexBufferFormat.BYTES_4) {\n                attribute.x = buffer.uintData[index*4];\n                attribute.y = buffer.uintData[index*4+1];\n                attribute.z = buffer.uintData[index*4+2];\n                attribute.w = buffer.uintData[index*4+3];\n            }\n\n            if (contextSoftware._vertexBufferFormats[i] == ContextGLVertexBufferFormat.FLOAT_1) {\n                attribute.x = buffer.data[index];\n            }\n\n            if (contextSoftware._vertexBufferFormats[i] == ContextGLVertexBufferFormat.FLOAT_2) {\n                attribute.x = buffer.data[index];\n                attribute.y = buffer.data[index + 1];\n            }\n\n            if (contextSoftware._vertexBufferFormats[i] == ContextGLVertexBufferFormat.FLOAT_3) {\n                attribute.x = buffer.data[index];\n                attribute.y = buffer.data[index + 1];\n                attribute.z = buffer.data[index + 2];\n            }\n\n            if (contextSoftware._vertexBufferFormats[i] == ContextGLVertexBufferFormat.FLOAT_4) {\n                attribute.x = buffer.data[index];\n                attribute.y = buffer.data[index + 1];\n                attribute.z = buffer.data[index + 2];\n                attribute.w = buffer.data[index + 3];\n            }\n            vo.attributes[i] = attribute;\n        }\n\n        var len:number = this._vertexDescr.tokens.length;\n        for (var i:number = 0; i < len; i++) {\n            var token:Token = this._vertexDescr.tokens[i];\n            ProgramSoftware._opCodeFunc[token.opcode](vo, this._vertexDescr, token.dest, token.a, token.b, contextSoftware);\n        }\n\n        return vo;\n    }\n\n    public fragment(context:ContextSoftware, clip:Vector3D, clipRight:Vector3D, clipBottom:Vector3D, vo0:ProgramVOSoftware, vo1:ProgramVOSoftware, vo2:ProgramVOSoftware, fragDepth:number):ProgramVOSoftware {\n        var vo:ProgramVOSoftware = new ProgramVOSoftware();\n        vo.outputDepth = fragDepth;\n\n        for (var i:number = 0; i < vo0.varying.length; i++) {\n            var varying0:Vector3D = vo0.varying[i];\n            var varying1:Vector3D = vo1.varying[i];\n            var varying2:Vector3D = vo2.varying[i];\n            if (!varying0 || !varying1 || !varying2) continue;\n\n            var result:Vector3D = vo.varying[i] = new Vector3D(0, 0, 0, 1);\n            result.x = clip.x * varying0.x + clip.y * varying1.x + clip.z * varying2.x;\n            result.y = clip.x * varying0.y + clip.y * varying1.y + clip.z * varying2.y;\n            result.z = clip.x * varying0.z + clip.y * varying1.z + clip.z * varying2.z;\n            result.w = clip.x * varying0.w + clip.y * varying1.w + clip.z * varying2.w;\n\n            var derivativeX:Vector3D = vo.derivativeX[i] = new Vector3D();\n            derivativeX.x = clipRight.x * varying0.x + clipRight.y * varying1.x + clipRight.z * varying2.x;\n            derivativeX.y = clipRight.x * varying0.y + clipRight.y * varying1.y + clipRight.z * varying2.y;\n            derivativeX.z = clipRight.x * varying0.z + clipRight.y * varying1.z + clipRight.z * varying2.z;\n            derivativeX.w = clipRight.x * varying0.w + clipRight.y * varying1.w + clipRight.z * varying2.w;\n            derivativeX.x -= result.x;\n            derivativeX.y -= result.y;\n            derivativeX.z -= result.z;\n            derivativeX.w -= result.w;\n\n            var derivativeY:Vector3D = vo.derivativeY[i] = new Vector3D();\n            derivativeY.x = clipBottom.x * varying0.x + clipBottom.y * varying1.x + clipBottom.z * varying2.x;\n            derivativeY.y = clipBottom.x * varying0.y + clipBottom.y * varying1.y + clipBottom.z * varying2.y;\n            derivativeY.z = clipBottom.x * varying0.z + clipBottom.y * varying1.z + clipBottom.z * varying2.z;\n            derivativeY.w = clipBottom.x * varying0.w + clipBottom.y * varying1.w + clipBottom.z * varying2.w;\n            derivativeY.x -= result.x;\n            derivativeY.y -= result.y;\n            derivativeY.z -= result.z;\n            derivativeY.w -= result.w;\n        }\n\n        var len:number = this._fragmentDescr.tokens.length;\n        for (var i:number = 0; i < len; i++) {\n            var token:Token = this._fragmentDescr.tokens[i];\n            ProgramSoftware._opCodeFunc[token.opcode](vo, this._fragmentDescr, token.dest, token.a, token.b, context);\n        }\n\n        return vo;\n    }\n\n    private static getDestTarget(vo:ProgramVOSoftware, desc:Description, dest:Destination):Vector3D {\n        var targetType:Vector3D[];\n\n        if (dest.regtype == 0x2) {\n            targetType = vo.temp;\n        } else if (dest.regtype == 0x3) {\n\n            if (desc.header.type == \"vertex\") {\n                targetType = vo.outputPosition;\n            } else {\n                targetType = vo.outputColor;\n            }\n        } else if (dest.regtype == 0x4) {\n            targetType = vo.varying;\n        }\n        var targetIndex:number = dest.regnum;\n        var target:Vector3D = targetType[targetIndex];\n        if (!target) {\n            target = targetType[targetIndex] = new Vector3D(0, 0, 0, 1);\n        }\n        return target;\n    }\n\n    private static getSourceTargetType(vo:ProgramVOSoftware, desc:Description, dest:Destination, context:ContextSoftware):Vector3D[] {\n        var targetType:Vector3D[];\n\n        if (dest.regtype == 0x0) {\n            targetType = vo.attributes;\n        } else if (dest.regtype == 0x1) {\n            if (desc.header.type == \"vertex\") {\n                targetType = context._vertexConstants;\n            } else {\n                targetType = context._fragmentConstants;\n            }\n        } else if (dest.regtype == 0x2) {\n            targetType = vo.temp;\n        } else if (dest.regtype == 0x4) {\n            targetType = vo.varying;\n        }\n        return targetType;\n    }\n\n    private static getSourceTargetByIndex(targetType:Vector3D[], targetIndex:number):Vector3D {\n        var target:Vector3D = targetType[targetIndex];\n        if (!target) {\n            target = targetType[targetIndex] = new Vector3D(0, 0, 0, 1);\n        }\n        return target;\n    }\n\n    private static getSourceTarget(vo:ProgramVOSoftware, desc:Description, dest:Destination, context:ContextSoftware):Vector3D {\n        var targetType:Vector3D[] = ProgramSoftware.getSourceTargetType(vo, desc, dest, context);\n        return ProgramSoftware.getSourceTargetByIndex(targetType, dest.regnum);\n    }\n\n    public static mov(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1Target[swiz[(source1.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static m44(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var source2Type:Vector3D[] = ProgramSoftware.getSourceTargetType(vo, desc, source2, context);\n\n        var source2Target0:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum);\n        var source2Target1:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum + 1);\n        var source2Target2:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum + 2);\n        var source2Target3:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum + 3);\n\n        var matrix:Matrix3D = new Matrix3D(new Float32Array([\n            source2Target0.x, source2Target1.x, source2Target2.x, source2Target3.x,\n            source2Target0.y, source2Target1.y, source2Target2.y, source2Target3.y,\n            source2Target0.z, source2Target1.z, source2Target2.z, source2Target3.z,\n            source2Target0.w, source2Target1.w, source2Target2.w, source2Target3.w\n        ]));\n\n        var result:Vector3D = matrix.transformVector(source1Target);\n\n        if (dest.mask & 1) {\n            target.x = result.x;\n        }\n\n        if (dest.mask & 2) {\n            target.y = result.y;\n        }\n\n        if (dest.mask & 4) {\n            target.z = result.z;\n        }\n\n        if (dest.mask & 8) {\n            target.w = result.w;\n        }\n    }\n\n    private static sample(vo:ProgramVOSoftware, context:ContextSoftware, u:number, v:number, textureIndex:number, dux:number, dvx:number, duy:number, dvy:number):number[] {\n        if (textureIndex >= context._textures.length || context._textures[textureIndex] == null) {\n            return [1, u, v, 0];\n        }\n\n        var texture:TextureSoftware = context._textures[textureIndex];\n        var state:SoftwareSamplerState = context._samplerStates[textureIndex];\n        if (!state) {\n            state = this._defaultSamplerState;\n        }\n        var repeat:boolean = state.wrap == ContextGLWrapMode.REPEAT;\n        var mipmap:boolean = state.mipfilter == ContextGLMipFilter.MIPLINEAR;\n\n        if (mipmap) {\n            dux = Math.abs(dux);\n            dvx = Math.abs(dvx);\n            duy = Math.abs(duy);\n            dvy = Math.abs(dvy);\n\n            var lambda:number = Math.log(Math.max(texture.width * Math.sqrt(dux * dux + dvx * dvx), texture.height * Math.sqrt(duy * duy + dvy * dvy))) / Math.LN2;\n            if (lambda > 0) {\n\n                var miplevelLow:number = Math.floor(lambda);\n                var miplevelHigh:number = Math.ceil(lambda);\n\n                var maxmiplevel:number = Math.log(Math.min(texture.width, texture.height)) / Math.LN2;\n\n                if (miplevelHigh > maxmiplevel) {\n                    miplevelHigh = maxmiplevel;\n                }\n                if (miplevelLow > maxmiplevel) {\n                    miplevelLow = maxmiplevel;\n                }\n\n                var mipblend:number = lambda - Math.floor(lambda);\n\n                var resultLow:number[] = [];\n                var resultHigh:number[] = [];\n\n\n                var dataLow:number[] = texture.getData(miplevelLow);\n                var dataLowWidth:number = texture.width / Math.pow(2, miplevelLow);\n                var dataLowHeight:number = texture.height / Math.pow(2, miplevelLow);\n                var dataHigh:number[] = texture.getData(miplevelHigh);\n                var dataHighWidth:number = texture.width / Math.pow(2, miplevelHigh);\n                var dataHighHeight:number = texture.height / Math.pow(2, miplevelHigh);\n\n                if (state.filter == ContextGLTextureFilter.LINEAR) {\n                    resultLow = ProgramSoftware.sampleBilinear(u, v, dataLow, dataLowWidth, dataLowHeight, repeat);\n                    resultHigh = ProgramSoftware.sampleBilinear(u, v, dataHigh, dataHighWidth, dataHighHeight, repeat);\n                } else {\n                    resultLow = ProgramSoftware.sampleNearest(u, v, dataLow, dataLowWidth, dataLowHeight, repeat);\n                    resultHigh = ProgramSoftware.sampleNearest(u, v, dataHigh, dataHighWidth, dataHighHeight, repeat);\n                }\n\n                return ProgramSoftware.interpolateColor(resultLow, resultHigh, mipblend);\n            }\n        }\n\n        var result:number[];\n        var data:number[] = texture.getData(0);\n        if (state.filter == ContextGLTextureFilter.LINEAR) {\n            result = ProgramSoftware.sampleBilinear(u, v, data, texture.width, texture.height, repeat);\n        } else {\n            result = ProgramSoftware.sampleNearest(u, v, data, texture.width, texture.height, repeat);\n        }\n        return result;\n    }\n\n    private static sampleNearest(u:number, v:number, textureData:number[], textureWidth:number, textureHeight:number, repeat:boolean):number[] {\n        u *= textureWidth;\n        v *= textureHeight;\n\n        if (repeat) {\n            u = Math.abs(u % textureWidth);\n            v = Math.abs(v % textureHeight);\n        } else {\n            if (u < 0) {\n                u = 0;\n            } else if (u > textureWidth - 1) {\n                u = textureWidth - 1;\n            }\n\n            if (v < 0) {\n                v = 0;\n            } else if (v > textureHeight - 1) {\n                v = textureHeight - 1;\n            }\n        }\n\n        u = Math.floor(u);\n        v = Math.floor(v);\n\n        var pos:number = (u + v * textureWidth) * 4;\n        var r:number = textureData[pos] / 255;\n        var g:number = textureData[pos + 1] / 255;\n        var b:number = textureData[pos + 2] / 255;\n        var a:number = textureData[pos + 3] / 255;\n\n        return [a, r, g, b];\n    }\n\n    private static sampleBilinear(u:number, v:number, textureData:number[], textureWidth:number, textureHeight:number, repeat:boolean):number[] {\n        var texelSizeX:number = 1 / textureWidth;\n        var texelSizeY:number = 1 / textureHeight;\n        u -= texelSizeX / 2;\n        v -= texelSizeY / 2;\n\n        var color00:number[] = ProgramSoftware.sampleNearest(u, v, textureData, textureWidth, textureHeight, repeat);\n        var color10:number[] = ProgramSoftware.sampleNearest(u + texelSizeX, v, textureData, textureWidth, textureHeight, repeat);\n\n        var color01:number[] = ProgramSoftware.sampleNearest(u, v + texelSizeY, textureData, textureWidth, textureHeight, repeat);\n        var color11:number[] = ProgramSoftware.sampleNearest(u + texelSizeX, v + texelSizeY, textureData, textureWidth, textureHeight, repeat);\n\n        var a:number = u * textureWidth;\n        a = a - Math.floor(a);\n\n        var interColor0:number[] = ProgramSoftware.interpolateColor(color00, color10, a);\n        var interColor1:number[] = ProgramSoftware.interpolateColor(color01, color11, a);\n\n        var b:number = v * textureHeight;\n        b = b - Math.floor(b);\n        return ProgramSoftware.interpolateColor(interColor0, interColor1, b);\n    }\n\n\n    private static interpolateColor(source:number[], target:number[], a:number):number[] {\n        var result:number[] = [];\n        result[0] = source[0] + (target[0] - source[0]) * a;\n        result[1] = source[1] + (target[1] - source[1]) * a;\n        result[2] = source[2] + (target[2] - source[2]) * a;\n        result[3] = source[3] + (target[3] - source[3]) * a;\n        return result;\n    }\n\n    public static tex(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var u:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var v:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n\n        var dux:number = vo.derivativeX[source1.regnum][swiz[(source1.swizzle >> 0) & 3]];\n        var dvx:number = vo.derivativeX[source1.regnum][swiz[(source1.swizzle >> 2) & 3]];\n        var duy:number = vo.derivativeY[source1.regnum][swiz[(source1.swizzle >> 0) & 3]];\n        var dvy:number = vo.derivativeY[source1.regnum][swiz[(source1.swizzle >> 2) & 3]];\n\n        var color:number[] = ProgramSoftware.sample(vo, context, u, v, source2.regnum, dux, dvx, duy, dvy);\n\n        if (dest.mask & 1) {\n            target.x = color[1];\n        }\n\n        if (dest.mask & 2) {\n            target.y = color[2];\n        }\n\n        if (dest.mask & 4) {\n            target.z = color[3];\n        }\n\n        if (dest.mask & 8) {\n            target.w = color[0];\n        }\n    }\n\n    public static add(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = source1Target[swiz[(source1.swizzle >> 0) & 3]] + source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1Target[swiz[(source1.swizzle >> 2) & 3]] + source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1Target[swiz[(source1.swizzle >> 4) & 3]] + source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1Target[swiz[(source1.swizzle >> 6) & 3]] + source2Target[swiz[(source2.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static sub(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = source1Target[swiz[(source1.swizzle >> 0) & 3]] - source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1Target[swiz[(source1.swizzle >> 2) & 3]] - source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1Target[swiz[(source1.swizzle >> 4) & 3]] - source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1Target[swiz[(source1.swizzle >> 6) & 3]] - source2Target[swiz[(source2.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static mul(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = source1Target[swiz[(source1.swizzle >> 0) & 3]] * source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1Target[swiz[(source1.swizzle >> 2) & 3]] * source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1Target[swiz[(source1.swizzle >> 4) & 3]] * source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1Target[swiz[(source1.swizzle >> 6) & 3]] * source2Target[swiz[(source2.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static div(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = source1Target[swiz[(source1.swizzle >> 0) & 3]] / source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1Target[swiz[(source1.swizzle >> 2) & 3]] / source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1Target[swiz[(source1.swizzle >> 4) & 3]] / source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1Target[swiz[(source1.swizzle >> 6) & 3]] / source2Target[swiz[(source2.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static rcp(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = 1 / source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y = 1 / source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z = 1 / source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w = 1 / source1Target[swiz[(source1.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static min(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.min(source1Target[swiz[(source1.swizzle >> 0) & 3]], source2Target[swiz[(source2.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.min(source1Target[swiz[(source1.swizzle >> 2) & 3]], source2Target[swiz[(source2.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.min(source1Target[swiz[(source1.swizzle >> 4) & 3]], source2Target[swiz[(source2.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.min(source1Target[swiz[(source1.swizzle >> 6) & 3]], source2Target[swiz[(source2.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static max(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.max(source1Target[swiz[(source1.swizzle >> 0) & 3]], source2Target[swiz[(source2.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.max(source1Target[swiz[(source1.swizzle >> 2) & 3]], source2Target[swiz[(source2.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.max(source1Target[swiz[(source1.swizzle >> 4) & 3]], source2Target[swiz[(source2.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.max(source1Target[swiz[(source1.swizzle >> 6) & 3]], source2Target[swiz[(source2.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static frc(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = source1Target[swiz[(source1.swizzle >> 0) & 3]] - Math.floor(source1Target[swiz[(source1.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1Target[swiz[(source1.swizzle >> 2) & 3]] - Math.floor(source1Target[swiz[(source1.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1Target[swiz[(source1.swizzle >> 4) & 3]] - Math.floor(source1Target[swiz[(source1.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1Target[swiz[(source1.swizzle >> 6) & 3]] - Math.floor(source1Target[swiz[(source1.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static sqt(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.sqrt(source1Target[swiz[(source1.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.sqrt(source1Target[swiz[(source1.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.sqrt(source1Target[swiz[(source1.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.sqrt(source1Target[swiz[(source1.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static rsq(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = 1 / Math.sqrt(source1Target[swiz[(source1.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = 1 / Math.sqrt(source1Target[swiz[(source1.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = 1 / Math.sqrt(source1Target[swiz[(source1.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = 1 / Math.sqrt(source1Target[swiz[(source1.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static pow(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.pow(source1Target[swiz[(source1.swizzle >> 0) & 3]], source2Target[swiz[(source2.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.pow(source1Target[swiz[(source1.swizzle >> 2) & 3]], source2Target[swiz[(source2.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.pow(source1Target[swiz[(source1.swizzle >> 4) & 3]], source2Target[swiz[(source2.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.pow(source1Target[swiz[(source1.swizzle >> 6) & 3]], source2Target[swiz[(source2.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static log(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.log(source1Target[swiz[(source1.swizzle >> 0) & 3]]) / Math.LN2;\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.log(source1Target[swiz[(source1.swizzle >> 2) & 3]]) / Math.LN2;\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.log(source1Target[swiz[(source1.swizzle >> 4) & 3]]) / Math.LN2;\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.log(source1Target[swiz[(source1.swizzle >> 6) & 3]]) / Math.LN2;\n        }\n    }\n\n    public static exp(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.exp(source1Target[swiz[(source1.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.exp(source1Target[swiz[(source1.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.exp(source1Target[swiz[(source1.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.exp(source1Target[swiz[(source1.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static nrm(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var x:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var y:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var z:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n\n        var len:number = Math.sqrt(x * x + y * y + z * z);\n        x /= len;\n        y /= len;\n        z /= len;\n\n        if (dest.mask & 1) {\n            target.x = x;\n        }\n\n        if (dest.mask & 2) {\n            target.y = y;\n        }\n\n        if (dest.mask & 4) {\n            target.z = z;\n        }\n    }\n\n    public static sin(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.sin(source1Target[swiz[(source1.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.sin(source1Target[swiz[(source1.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.sin(source1Target[swiz[(source1.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.sin(source1Target[swiz[(source1.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static cos(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.cos(source1Target[swiz[(source1.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.cos(source1Target[swiz[(source1.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.cos(source1Target[swiz[(source1.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.cos(source1Target[swiz[(source1.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static crs(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var source1TargetY:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var source1TargetZ:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n        var source2TargetX:number = source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        var source2TargetY:number = source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        var source2TargetZ:number = source2Target[swiz[(source2.swizzle >> 4) & 3]];\n\n        if (dest.mask & 1) {\n            target.x = source1TargetY * source2TargetZ - source1TargetZ * source2TargetY;\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1TargetZ * source2TargetX - source1TargetX * source2TargetZ;\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1TargetX * source2TargetY - source1TargetY * source2TargetX;\n        }\n    }\n\n    public static dp3(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var source1TargetY:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var source1TargetZ:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n        var source2TargetX:number = source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        var source2TargetY:number = source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        var source2TargetZ:number = source2Target[swiz[(source2.swizzle >> 4) & 3]];\n\n        if (dest.mask & 1) {\n            target.x = source1TargetX * source2TargetX + source1TargetY * source2TargetY + source1TargetZ * source2TargetZ;\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1TargetX * source2TargetX + source1TargetY * source2TargetY + source1TargetZ * source2TargetZ;\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1TargetX * source2TargetX + source1TargetY * source2TargetY + source1TargetZ * source2TargetZ;\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1TargetX * source2TargetX + source1TargetY * source2TargetY + source1TargetZ * source2TargetZ;\n        }\n    }\n\n    public static dp4(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var source1TargetY:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var source1TargetZ:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        var source1TargetW:number = source1Target[swiz[(source1.swizzle >> 6) & 3]];\n\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n        var source2TargetX:number = source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        var source2TargetY:number = source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        var source2TargetZ:number = source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        var source2TargetW:number = source2Target[swiz[(source2.swizzle >> 6) & 3]];\n\n        if (dest.mask & 1) {\n            target.x = source1TargetX * source2TargetX + source1TargetY * source2TargetY + source1TargetZ * source2TargetZ + source1TargetW * source2TargetW;\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1TargetX * source2TargetX + source1TargetY * source2TargetY + source1TargetZ * source2TargetZ + source1TargetW * source2TargetW;\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1TargetX * source2TargetX + source1TargetY * source2TargetY + source1TargetZ * source2TargetZ + source1TargetW * source2TargetW;\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1TargetX * source2TargetX + source1TargetY * source2TargetY + source1TargetZ * source2TargetZ + source1TargetW * source2TargetW;\n        }\n    }\n\n    public static abs(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.abs(source1Target[swiz[(source1.swizzle >> 0) & 3]]);\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.abs(source1Target[swiz[(source1.swizzle >> 2) & 3]]);\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.abs(source1Target[swiz[(source1.swizzle >> 4) & 3]]);\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.abs(source1Target[swiz[(source1.swizzle >> 6) & 3]]);\n        }\n    }\n\n    public static neg(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = -source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y = -source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z = -source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w = -source1Target[swiz[(source1.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static sat(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = Math.max(0, Math.min(1, source1Target[swiz[(source1.swizzle >> 0) & 3]]));\n        }\n\n        if (dest.mask & 2) {\n            target.y = Math.max(0, Math.min(1, source1Target[swiz[(source1.swizzle >> 2) & 3]]));\n        }\n\n        if (dest.mask & 4) {\n            target.z = Math.max(0, Math.min(1, source1Target[swiz[(source1.swizzle >> 4) & 3]]));\n        }\n\n        if (dest.mask & 8) {\n            target.w = Math.max(0, Math.min(1, source1Target[swiz[(source1.swizzle >> 6) & 3]]));\n        }\n    }\n\n    public static m33(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var source2Type:Vector3D[] = ProgramSoftware.getSourceTargetType(vo, desc, source2, context);\n\n        var source2Target0:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum);\n        var source2Target1:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum + 1);\n        var source2Target2:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum + 2);\n\n        var matrix:Matrix3D = new Matrix3D(new Float32Array([\n            source2Target0.x, source2Target1.x, source2Target2.x, 0,\n            source2Target0.y, source2Target1.y, source2Target2.y, 0,\n            source2Target0.z, source2Target1.z, source2Target2.z, 0,\n            0, 0, 0, 0\n        ]));\n\n        var result:Vector3D = matrix.transformVector(source1Target);\n\n        if (dest.mask & 1) {\n            target.x = result.x;\n        }\n\n        if (dest.mask & 2) {\n            target.y = result.y;\n        }\n\n        if (dest.mask & 4) {\n            target.z = result.z;\n        }\n    }\n\n    public static m34(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n\n        var source2Type:Vector3D[] = ProgramSoftware.getSourceTargetType(vo, desc, source2, context);\n\n        var source2Target0:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum);\n        var source2Target1:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum + 1);\n        var source2Target2:Vector3D = ProgramSoftware.getSourceTargetByIndex(source2Type, source2.regnum + 2);\n\n        var matrix:Matrix3D = new Matrix3D(new Float32Array([\n            source2Target0.x, source2Target1.x, source2Target2.x, 0,\n            source2Target0.y, source2Target1.y, source2Target2.y, 0,\n            source2Target0.z, source2Target1.z, source2Target2.z, 0,\n            source2Target0.w, source2Target1.w, source2Target2.w, 1\n        ]));\n\n        var result:Vector3D = matrix.transformVector(source1Target);\n\n        if (dest.mask & 1) {\n            target.x = result.x;\n        }\n\n        if (dest.mask & 2) {\n            target.y = result.y;\n        }\n\n        if (dest.mask & 4) {\n            target.z = result.z;\n        }\n\n        if (dest.mask & 8) {\n            target.w = result.w;\n        }\n    }\n\n    public static ddx(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = vo.derivativeX[source1.regnum];\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y =source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z =source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w =source1Target[swiz[(source1.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static ddy(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var source1Target:Vector3D = vo.derivativeY[source1.regnum];\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        if (dest.mask & 1) {\n            target.x = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        }\n\n        if (dest.mask & 2) {\n            target.y =source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        }\n\n        if (dest.mask & 4) {\n            target.z =source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        }\n\n        if (dest.mask & 8) {\n            target.w =source1Target[swiz[(source1.swizzle >> 6) & 3]];\n        }\n    }\n\n    public static sge(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var source1TargetY:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var source1TargetZ:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        var source1TargetW:number = source1Target[swiz[(source1.swizzle >> 6) & 3]];\n\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n        var source2TargetX:number = source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        var source2TargetY:number = source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        var source2TargetZ:number = source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        var source2TargetW:number = source2Target[swiz[(source2.swizzle >> 6) & 3]];\n\n        if (dest.mask & 1) {\n            target.x = source1TargetX >= source2TargetX ? 1 : 0;\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1TargetY >= source2TargetY ? 1 : 0;\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1TargetZ >= source2TargetZ ? 1 : 0;\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1TargetW >= source2TargetW ? 1 : 0;\n        }\n    }\n\n    public static slt(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var source1TargetY:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var source1TargetZ:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        var source1TargetW:number = source1Target[swiz[(source1.swizzle >> 6) & 3]];\n\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n        var source2TargetX:number = source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        var source2TargetY:number = source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        var source2TargetZ:number = source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        var source2TargetW:number = source2Target[swiz[(source2.swizzle >> 6) & 3]];\n\n        if (dest.mask & 1) {\n            target.x = source1TargetX < source2TargetX ? 1 : 0;\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1TargetY < source2TargetY ? 1 : 0;\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1TargetZ < source2TargetZ ? 1 : 0;\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1TargetW < source2TargetW ? 1 : 0;\n        }\n    }\n\n    public static seq(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var source1TargetY:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var source1TargetZ:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        var source1TargetW:number = source1Target[swiz[(source1.swizzle >> 6) & 3]];\n\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n        var source2TargetX:number = source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        var source2TargetY:number = source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        var source2TargetZ:number = source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        var source2TargetW:number = source2Target[swiz[(source2.swizzle >> 6) & 3]];\n\n        if (dest.mask & 1) {\n            target.x = source1TargetX == source2TargetX ? 1 : 0;\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1TargetY == source2TargetY ? 1 : 0;\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1TargetZ == source2TargetZ ? 1 : 0;\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1TargetW == source2TargetW ? 1 : 0;\n        }\n    }\n\n    public static sne(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var source1TargetY:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var source1TargetZ:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        var source1TargetW:number = source1Target[swiz[(source1.swizzle >> 6) & 3]];\n\n        var source2Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source2, context);\n        var source2TargetX:number = source2Target[swiz[(source2.swizzle >> 0) & 3]];\n        var source2TargetY:number = source2Target[swiz[(source2.swizzle >> 2) & 3]];\n        var source2TargetZ:number = source2Target[swiz[(source2.swizzle >> 4) & 3]];\n        var source2TargetW:number = source2Target[swiz[(source2.swizzle >> 6) & 3]];\n\n        if (dest.mask & 1) {\n            target.x = source1TargetX != source2TargetX ? 1 : 0;\n        }\n\n        if (dest.mask & 2) {\n            target.y = source1TargetY != source2TargetY ? 1 : 0;\n        }\n\n        if (dest.mask & 4) {\n            target.z = source1TargetZ != source2TargetZ ? 1 : 0;\n        }\n\n        if (dest.mask & 8) {\n            target.w = source1TargetW != source2TargetW ? 1 : 0;\n        }\n    }\n\n    public static sgn(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var target:Vector3D = ProgramSoftware.getDestTarget(vo, desc, dest);\n\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n        var source1TargetY:number = source1Target[swiz[(source1.swizzle >> 2) & 3]];\n        var source1TargetZ:number = source1Target[swiz[(source1.swizzle >> 4) & 3]];\n        var source1TargetW:number = source1Target[swiz[(source1.swizzle >> 6) & 3]];\n\n        if (dest.mask & 1) {\n\n            target.x = 1\n            if (source1TargetX < 0) {\n                target.x = -1;\n            } else if (source1TargetX == 0) {\n                target.x = 0;\n            }\n        }\n\n        if (dest.mask & 2) {\n            target.y = 1\n            if (source1TargetY < 0) {\n                target.y = -1;\n            } else if (source1TargetY == 0) {\n                target.y = 0;\n            }\n        }\n\n        if (dest.mask & 4) {\n            target.z = 1\n            if (source1TargetZ < 0) {\n                target.z = -1;\n            } else if (source1TargetZ == 0) {\n                target.z = 0;\n            }\n        }\n\n        if (dest.mask & 8) {\n            target.w = 1\n            if (source1TargetW < 0) {\n                target.w = -1;\n            } else if (source1TargetW == 0) {\n                target.w = 0;\n            }\n        }\n    }\n\n    public static kil(vo:ProgramVOSoftware, desc:Description, dest:Destination, source1:Destination, source2:Destination, context:ContextSoftware):void {\n        var swiz:string[] = [\"x\", \"y\", \"z\", \"w\"];\n\n        var source1Target:Vector3D = ProgramSoftware.getSourceTarget(vo, desc, source1, context);\n        var source1TargetX:number = source1Target[swiz[(source1.swizzle >> 0) & 3]];\n\n        if(source1TargetX<0) {\n            vo.discard = true;\n        }\n    }\n}\n\nexport = ProgramSoftware;\n",
    "import Vector3D                        = require(\"awayjs-core/lib/geom/Vector3D\");\n\nclass ProgramVOSoftware {\n    public outputPosition:Vector3D[] = [];\n    public outputColor:Vector3D[] = [];\n    public outputDepth:number;\n    public varying:Vector3D[] = [];\n    public derivativeX:Vector3D[] = [];\n    public derivativeY:Vector3D[] = [];\n    public temp:Vector3D[] = [];\n    public attributes:Vector3D[] = [];\n    public discard:boolean = false;\n}\n\nexport = ProgramVOSoftware;",
    "import ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport AGALTokenizer\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/AGALTokenizer\");\nimport AGLSLParser\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/AGLSLParser\");\nimport IProgram\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IProgram\");\nimport VertexBufferWebGL\t\t\t= require(\"awayjs-stagegl/lib/base/VertexBufferWebGL\");\n\nclass ProgramWebGL implements IProgram\n{\n\tprivate static _tokenizer:AGALTokenizer = new AGALTokenizer();\n\tprivate static _aglslParser:AGLSLParser = new AGLSLParser();\n\tprivate static _uniformLocationNameDictionary:Array<string> = [\"fc\", \"fs\", \"vc\"];\n\n\tprivate _gl:WebGLRenderingContext;\n\tprivate _program:WebGLProgram;\n\tprivate _vertexShader:WebGLShader;\n\tprivate _fragmentShader:WebGLShader;\n\tprivate _uniforms:Array<Array<WebGLUniformLocation>> = [[],[],[]];\n\tprivate _attribs:Array<number> = [];\n\n\tconstructor(gl:WebGLRenderingContext)\n\t{\n\t\tthis._gl = gl;\n\t\tthis._program = this._gl.createProgram();\n\t}\n\n\tpublic upload(vertexProgram:ByteArray, fragmentProgram:ByteArray)\n\t{\n\t\tvar vertexString:string = ProgramWebGL._aglslParser.parse(ProgramWebGL._tokenizer.decribeAGALByteArray(vertexProgram));\n\t\tvar fragmentString:string = ProgramWebGL._aglslParser.parse(ProgramWebGL._tokenizer.decribeAGALByteArray(fragmentProgram));\n\n\t\tthis._vertexShader = this._gl.createShader(this._gl.VERTEX_SHADER);\n\t\tthis._fragmentShader = this._gl.createShader(this._gl.FRAGMENT_SHADER);\n\n\t\tthis._gl.shaderSource(this._vertexShader, vertexString);\n\t\tthis._gl.compileShader(this._vertexShader);\n\n\t\tif (!this._gl.getShaderParameter(this._vertexShader, this._gl.COMPILE_STATUS)) {\n\t\t\tthrow new Error(this._gl.getShaderInfoLog(this._vertexShader));\n\t\t\treturn;\n\t\t}\n\n\t\tthis._gl.shaderSource(this._fragmentShader, fragmentString);\n\t\tthis._gl.compileShader(this._fragmentShader);\n\n\t\tif (!this._gl.getShaderParameter(this._fragmentShader, this._gl.COMPILE_STATUS)) {\n\t\t\tthrow new Error(this._gl.getShaderInfoLog(this._fragmentShader));\n\t\t\treturn;\n\t\t}\n\n\t\tthis._gl.attachShader(this._program, this._vertexShader);\n\t\tthis._gl.attachShader(this._program, this._fragmentShader);\n\t\tthis._gl.linkProgram(this._program);\n\n\t\tif (!this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS)) {\n\t\t\tthrow new Error(this._gl.getProgramInfoLog(this._program));\n\t\t}\n\n\t\tthis._uniforms[0].length = 0;\n\t\tthis._uniforms[1].length = 0;\n\t\tthis._uniforms[2].length = 0;\n\t\tthis._attribs.length = 0;\n\t}\n\n\tpublic getUniformLocation(programType:number, index:number):WebGLUniformLocation\n\t{\n\t\tif (this._uniforms[programType][index] != null)\n\t\t\treturn this._uniforms[programType][index];\n\n\t\treturn (this._uniforms[programType][index] = this._gl.getUniformLocation(this._program, ProgramWebGL._uniformLocationNameDictionary[programType] + index));\n\t}\n\n\n\tpublic getAttribLocation(index:number):number\n\t{\n\t\tif (this._attribs[index] != null)\n\t\t\treturn this._attribs[index];\n\n\t\treturn (this._attribs[index] = this._gl.getAttribLocation(this._program, \"va\" + index));\n\t}\n\n\n\tpublic dispose()\n\t{\n\t\tthis._gl.deleteProgram(this._program);\n\t}\n\n\tpublic focusProgram()\n\t{\n\t\tthis._gl.useProgram(this._program);\n\t}\n\n\tpublic get glProgram():WebGLProgram\n\t{\n\t\treturn this._program;\n\t}\n}\n\nexport = ProgramWebGL;",
    "class ResourceBaseFlash\n{\n\tpublic _pId:number;\n\n\tpublic get id():number\n\t{\n\t\treturn this._pId;\n\t}\n\n\tpublic dispose()\n\t{\n\n\t}\n}\n\nexport = ResourceBaseFlash;",
    "class SamplerState\n{\n\tpublic type:number;\n\tpublic wrap:number;\n\tpublic filter:number;\n\tpublic mipfilter:number;\n}\n\nexport = SamplerState;",
    "import ContextGLTextureFilter = require(\"awayjs-stagegl/lib/base/ContextGLTextureFilter\");\nimport ContextGLMipFilter = require(\"awayjs-stagegl/lib/base/ContextGLMipFilter\");\nimport ContextGLWrapMode = require(\"awayjs-stagegl/lib/base/ContextGLWrapMode\");\n/**\n * The same as SamplerState, but with strings\n * TODO: replace two similar classes with one\n */\nclass SoftwareSamplerState{\n    public type:string;\n    public wrap:string = ContextGLWrapMode.REPEAT;\n    public filter:string = ContextGLTextureFilter.LINEAR;\n    public mipfilter:string = ContextGLMipFilter.MIPLINEAR;\n}\nexport = SoftwareSamplerState;",
    "import AttributesBuffer\t\t\t\t= require(\"awayjs-core/lib/attributes/AttributesBuffer\");\nimport EventDispatcher\t\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\nimport Rectangle\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\nimport ImageBase\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageBase\");\nimport AbstractionBase\t\t\t\t= require(\"awayjs-core/lib/library/AbstractionBase\");\nimport IAsset\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport IAssetClass\t\t\t\t\t= require(\"awayjs-core/lib/library/IAssetClass\");\nimport IAbstractionPool\t\t\t\t= require(\"awayjs-core/lib/library/IAbstractionPool\");\nimport CSS\t\t\t\t\t\t\t= require(\"awayjs-core/lib/utils/CSS\");\n\nimport ContextMode\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextMode\");\nimport ContextGLMipFilter\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLMipFilter\");\nimport ContextGLTextureFilter\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFilter\");\nimport ContextGLVertexBufferFormat\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\nimport ContextGLWrapMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLWrapMode\");\nimport ContextStage3D\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextStage3D\");\nimport ContextWebGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextWebGL\");\nimport ContextSoftware\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextSoftware\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport ICubeTexture\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ICubeTexture\");\nimport IIndexBuffer\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IIndexBuffer\");\nimport IVertexBuffer\t\t\t\t= require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\nimport ITexture\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITexture\");\nimport ITextureBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITextureBase\");\nimport StageEvent\t\t\t\t\t= require(\"awayjs-stagegl/lib/events/StageEvent\");\nimport GL_ImageBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageBase\");\nimport GL_IAssetClass\t\t\t\t= require(\"awayjs-stagegl/lib/library/GL_IAssetClass\");\nimport ProgramData\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/ProgramData\");\nimport ProgramDataPool\t\t\t\t= require(\"awayjs-stagegl/lib/image/ProgramDataPool\");\nimport StageManager\t\t\t\t\t= require(\"awayjs-stagegl/lib/managers/StageManager\");\n\n/**\n * Stage provides a proxy class to handle the creation and attachment of the Context\n * (and in turn the back buffer) it uses. Stage should never be created directly,\n * but requested through StageManager.\n *\n * @see away.managers.StageManager\n *\n */\nclass Stage extends EventDispatcher implements IAbstractionPool\n{\n\tprivate static _abstractionClassPool:Object = new Object();\n\n\tprivate _abstractionPool:Object = new Object();\n\n\tprivate _programData:Array<ProgramData> = new Array<ProgramData>();\n\tprivate _programDataPool:ProgramDataPool;\n\tprivate _context:IContextGL;\n\tprivate _container:HTMLElement;\n\tprivate _width:number;\n\tprivate _height:number;\n\tprivate _x:number = 0;\n\tprivate _y:number = 0;\n\n\t//private static _frameEventDriver:Shape = new Shape(); // TODO: add frame driver / request animation frame\n\n\tprivate _stageIndex:number = -1;\n\n\tprivate _usesSoftwareRendering:boolean;\n\tprivate _profile:string;\n\tprivate _stageManager:StageManager;\n\tprivate _antiAlias:number = 0;\n\tprivate _enableDepthAndStencil:boolean;\n\tprivate _contextRequested:boolean;\n\n\t//private var _activeVertexBuffers : Vector.<VertexBuffer> = new Vector.<VertexBuffer>(8, true);\n\t//private var _activeTextures : Vector.<TextureBase> = new Vector.<TextureBase>(8, true);\n\tprivate _renderTarget:ImageBase = null;\n\tprivate _renderSurfaceSelector:number = 0;\n\tprivate _scissorRect:Rectangle;\n\tprivate _color:number;\n\tprivate _backBufferDirty:boolean;\n\tprivate _viewPort:Rectangle;\n\tprivate _viewportUpdated:StageEvent;\n\tprivate _viewportDirty:boolean;\n\tprivate _bufferClear:boolean;\n\n\n\t//private _mouse3DManager:away.managers.Mouse3DManager;\n\t//private _touch3DManager:Touch3DManager; //TODO: imeplement dependency Touch3DManager\n\n\tprivate _initialised:boolean = false;\n\n\tprivate _bufferFormatDictionary:Array<Array<number>> = new Array<Array<number>>(5);\n\n\tconstructor(container:HTMLCanvasElement, stageIndex:number, stageManager:StageManager, forceSoftware:boolean = false, profile:string = \"baseline\")\n\t{\n\t\tsuper();\n\n\t\tthis._programDataPool = new ProgramDataPool(this);\n\n\t\tthis._container = container;\n\t\tif(this._container) {\n\t\t\tthis._container.addEventListener(\"webglcontextlost\", (event) => this.onContextLost(event));\n\t\t\tthis._container.addEventListener(\"webglcontextrestored\", (event) => this.onContextRestored(event));\n\t\t}\n\n\t\tthis._stageIndex = stageIndex;\n\n\t\tthis._stageManager = stageManager;\n\n\t\tthis._viewPort = new Rectangle();\n\n\t\tthis._enableDepthAndStencil = true;\n\n\t\tCSS.setElementX(this._container, 0);\n\t\tCSS.setElementY(this._container, 0);\n\n\t\tthis._bufferFormatDictionary[1] = new Array<number>(5);\n\t\tthis._bufferFormatDictionary[1][4] = ContextGLVertexBufferFormat.BYTES_4;\n\t\tthis._bufferFormatDictionary[4] = new Array<number>(5);\n\t\tthis._bufferFormatDictionary[4][1] = ContextGLVertexBufferFormat.FLOAT_1;\n\t\tthis._bufferFormatDictionary[4][2] = ContextGLVertexBufferFormat.FLOAT_2;\n\t\tthis._bufferFormatDictionary[4][3] = ContextGLVertexBufferFormat.FLOAT_3;\n\t\tthis._bufferFormatDictionary[4][4] = ContextGLVertexBufferFormat.FLOAT_4;\n\n\t\tthis.visible = true;\n\t}\n\n\tpublic getProgramData(vertexString:string, fragmentString:string):ProgramData\n\t{\n\t\treturn this._programDataPool.getItem(vertexString, fragmentString);\n\t}\n\n\tpublic setRenderTarget(target:ImageBase, enableDepthAndStencil:boolean = false, surfaceSelector:number = 0)\n\t{\n\t\tif (this._renderTarget === target && surfaceSelector == this._renderSurfaceSelector && this._enableDepthAndStencil == enableDepthAndStencil)\n\t\t\treturn;\n\n\t\tthis._renderTarget = target;\n\t\tthis._renderSurfaceSelector = surfaceSelector;\n\t\tthis._enableDepthAndStencil = enableDepthAndStencil;\n\t\tif (target) {\n\t\t\tthis._context.setRenderToTexture((<GL_ImageBase> this.getAbstraction(target))._getTexture(), enableDepthAndStencil, this._antiAlias, surfaceSelector);\n\t\t} else {\n\t\t\tthis._context.setRenderToBackBuffer();\n\t\t\tthis.configureBackBuffer(this._width, this._height, this._antiAlias, this._enableDepthAndStencil);\n\t\t}\n\t}\n\n\tpublic getAbstraction(asset:IAsset):AbstractionBase\n\t{\n\t\treturn (this._abstractionPool[asset.id] || (this._abstractionPool[asset.id] = new (<GL_IAssetClass> Stage._abstractionClassPool[asset.assetType])(asset, this)));\n\t}\n\n\t/**\n\t *\n\t * @param image\n\t */\n\tpublic clearAbstraction(asset:IAsset)\n\t{\n\t\tthis._abstractionPool[asset.id] = null;\n\t}\n\n\t/**\n\t *\n\t * @param imageObjectClass\n\t */\n\tpublic static registerAbstraction(gl_assetClass:GL_IAssetClass, assetClass:IAssetClass)\n\t{\n\t\tStage._abstractionClassPool[assetClass.assetType] = gl_assetClass;\n\t}\n\n\t/**\n\t * Requests a Context object to attach to the managed gl canvas.\n\t */\n\tpublic requestContext(forceSoftware:boolean = false, profile:string = \"baseline\", mode:string = \"auto\")\n\t{\n\t\t// If forcing software, we can be certain that the\n\t\t// returned Context will be running software mode.\n\t\t// If not, we can't be sure and should stick to the\n\t\t// old value (will likely be same if re-requesting.)\n\n\t\tif (this._usesSoftwareRendering != null)\n\t\t\tthis._usesSoftwareRendering = forceSoftware;\n\n\t\tthis._profile = profile;\n\n\t\ttry {\n\t\t\tif (mode == ContextMode.FLASH)\n\t\t\t\tnew ContextStage3D(<HTMLCanvasElement> this._container, (context:IContextGL) => this._callback(context));\n\t\t\telse if(mode == ContextMode.SOFTWARE)\n\t\t\t\tthis._context = new ContextSoftware(<HTMLCanvasElement> this._container);\n\t\t\telse\n\t\t\t\tthis._context = new ContextWebGL(<HTMLCanvasElement> this._container);\n\n\t\t} catch (e) {\n\t\t\ttry {\n\t\t\t\tif (mode == ContextMode.AUTO)\n\t\t\t\t\tnew ContextStage3D(<HTMLCanvasElement> this._container, (context:IContextGL) => this._callback(context));\n\t\t\t\telse\n\t\t\t\t\tthis.dispatchEvent(new StageEvent(StageEvent.STAGE_ERROR, this));\n\t\t\t} catch (e) {\n\t\t\t\tthis.dispatchEvent(new StageEvent(StageEvent.STAGE_ERROR, this));\n\t\t\t}\n\n\t\t}\n\n\t\tif (this._context)\n\t\t\tthis._callback(this._context);\n\t}\n\n\t/**\n\t * The width of the gl canvas\n\t */\n\tpublic get width()\n\t{\n\t\treturn this._width;\n\t}\n\n\tpublic set width(val:number)\n\t{\n\t\tif (this._width == val)\n\t\t\treturn;\n\n\t\tCSS.setElementWidth(this._container, val);\n\n\t\tthis._width = this._viewPort.width = val;\n\n\t\tthis._backBufferDirty = true;\n\n\t\tthis.notifyViewportUpdated();\n\t}\n\n\t/**\n\t * The height of the gl canvas\n\t */\n\tpublic get height()\n\t{\n\t\treturn this._height;\n\t}\n\n\tpublic set height(val:number)\n\t{\n\t\tif (this._height == val)\n\t\t\treturn;\n\n\t\tCSS.setElementHeight(this._container, val);\n\n\t\tthis._height = this._viewPort.height = val;\n\n\t\tthis._backBufferDirty = true;\n\n\t\tthis.notifyViewportUpdated();\n\t}\n\n\t/**\n\t * The x position of the gl canvas\n\t */\n\tpublic get x()\n\t{\n\t\treturn this._x;\n\t}\n\n\tpublic set x(val:number)\n\t{\n\t\tif (this._x == val)\n\t\t\treturn;\n\n\t\tCSS.setElementX(this._container, val);\n\n\t\tthis._x = this._viewPort.x = val;\n\n\t\tthis.notifyViewportUpdated();\n\t}\n\n\t/**\n\t * The y position of the gl canvas\n\t */\n\tpublic get y()\n\t{\n\t\treturn this._y;\n\t}\n\n\tpublic set y(val:number)\n\t{\n\t\tif (this._y == val)\n\t\t\treturn;\n\n\t\tCSS.setElementY(this._container, val);\n\n\t\tthis._y = this._viewPort.y = val;\n\n\t\tthis.notifyViewportUpdated();\n\t}\n\n\tpublic set visible(val:boolean)\n\t{\n\t\tCSS.setElementVisibility(this._container, val);\n\t}\n\n\tpublic get visible()\n\t{\n\t\treturn CSS.getElementVisibility(this._container);\n\t}\n\n\tpublic get container():HTMLElement\n\t{\n\t\treturn this._container;\n\t}\n\n\t/**\n\t * The Context object associated with the given stage object.\n\t */\n\tpublic get context():IContextGL\n\t{\n\t\treturn this._context;\n\t}\n\n\tprivate notifyViewportUpdated()\n\t{\n\t\tif (this._viewportDirty)\n\t\t\treturn;\n\n\t\tthis._viewportDirty = true;\n\n\t\tthis.dispatchEvent(new StageEvent(StageEvent.VIEWPORT_UPDATED, this));\n\t}\n\n\tpublic get profile():string\n\t{\n\t\treturn this._profile;\n\t}\n\n\t/**\n\t * Disposes the Stage object, freeing the Context attached to the Stage.\n\t */\n\tpublic dispose()\n\t{\n\t\tfor (var id in this._abstractionPool)\n\t\t\tthis._abstractionPool[id].clear();\n\n\t\tthis._abstractionPool = null;\n\n\t\tthis._stageManager.iRemoveStage(this);\n\t\tthis.freeContext();\n\t\tthis._stageManager = null;\n\t\tthis._stageIndex = -1;\n\t}\n\n\t/**\n\t * Configures the back buffer associated with the Stage object.\n\t * @param backBufferWidth The width of the backbuffer.\n\t * @param backBufferHeight The height of the backbuffer.\n\t * @param antiAlias The amount of anti-aliasing to use.\n\t * @param enableDepthAndStencil Indicates whether the back buffer contains a depth and stencil buffer.\n\t */\n\tpublic configureBackBuffer(backBufferWidth:number, backBufferHeight:number, antiAlias:number, enableDepthAndStencil:boolean)\n\t{\n\t\tthis.width = backBufferWidth;\n\t\tthis.height = backBufferHeight;\n\n\t\tthis._antiAlias = antiAlias;\n\t\tthis._enableDepthAndStencil = enableDepthAndStencil;\n\n\t\tif (this._context)\n\t\t\tthis._context.configureBackBuffer(backBufferWidth, backBufferHeight, antiAlias, enableDepthAndStencil);\n\t}\n\n\t/*\n\t * Indicates whether the depth and stencil buffer is used\n\t */\n\tpublic get enableDepthAndStencil():boolean\n\t{\n\t\treturn this._enableDepthAndStencil;\n\t}\n\n\tpublic set enableDepthAndStencil(enableDepthAndStencil:boolean)\n\t{\n\t\tthis._enableDepthAndStencil = enableDepthAndStencil;\n\t\tthis._backBufferDirty = true;\n\t}\n\n\tpublic get renderTarget():ImageBase\n\t{\n\t\treturn this._renderTarget;\n\t}\n\n\tpublic get renderSurfaceSelector():number\n\t{\n\t\treturn this._renderSurfaceSelector;\n\t}\n\n\t/*\n\t * Clear and reset the back buffer when using a shared context\n\t */\n\tpublic clear()\n\t{\n\t\tif (!this._context)\n\t\t\treturn;\n\n\t\tif (this._backBufferDirty) {\n\t\t\tthis.configureBackBuffer(this._width, this._height, this._antiAlias, this._enableDepthAndStencil);\n\t\t\tthis._backBufferDirty = false;\n\t\t}\n\n\t\tthis._context.clear(( this._color & 0xff000000 ) >>> 24, // <--------- Zero-fill right shift\n\t\t\t\t\t\t\t  ( this._color & 0xff0000 ) >>> 16, // <-------------|\n\t\t\t\t\t\t\t  ( this._color & 0xff00 ) >>> 8, // <----------------|\n\t\t\t\t\t\t\t\tthis._color & 0xff);\n\n\t\tthis._bufferClear = true;\n\t}\n\n\tpublic get scissorRect():Rectangle\n\t{\n\t\treturn this._scissorRect;\n\t}\n\n\tpublic set scissorRect(value:Rectangle)\n\t{\n\t\tthis._scissorRect = value;\n\n\t\tthis._context.setScissorRectangle(this._scissorRect);\n\t}\n\n\t/**\n\t * The index of the Stage which is managed by this instance of StageProxy.\n\t */\n\tpublic get stageIndex():number\n\t{\n\t\treturn this._stageIndex;\n\t}\n\n\t/**\n\t * Indicates whether the Stage managed by this proxy is running in software mode.\n\t * Remember to wait for the CONTEXT_CREATED event before checking this property,\n\t * as only then will it be guaranteed to be accurate.\n\t */\n\tpublic get usesSoftwareRendering():boolean\n\t{\n\t\treturn this._usesSoftwareRendering;\n\t}\n\n\t/**\n\t * The antiAliasing of the Stage.\n\t */\n\tpublic get antiAlias():number\n\t{\n\t\treturn this._antiAlias;\n\t}\n\n\tpublic set antiAlias(antiAlias:number)\n\t{\n\t\tthis._antiAlias = antiAlias;\n\t\tthis._backBufferDirty = true;\n\t}\n\n\t/**\n\t * A viewPort rectangle equivalent of the Stage size and position.\n\t */\n\tpublic get viewPort():Rectangle\n\t{\n\t\tthis._viewportDirty = false;\n\n\t\treturn this._viewPort;\n\t}\n\n\t/**\n\t * The background color of the Stage.\n\t */\n\tpublic get color():number\n\t{\n\t\treturn this._color;\n\t}\n\n\tpublic set color(color:number)\n\t{\n\t\tthis._color = color;\n\t}\n\n\t/**\n\t * The freshly cleared state of the backbuffer before any rendering\n\t */\n\tpublic get bufferClear():boolean\n\t{\n\t\treturn this._bufferClear;\n\t}\n\n\tpublic set bufferClear(newBufferClear:boolean)\n\t{\n\t\tthis._bufferClear = newBufferClear;\n\t}\n\n\n\tpublic registerProgram(programData:ProgramData)\n\t{\n\t\tvar i:number = 0;\n\t\twhile (this._programData[i] != null)\n\t\t\ti++;\n\n\t\tthis._programData[i] = programData;\n\t\tprogramData.id = i;\n\t}\n\n\tpublic unRegisterProgram(programData:ProgramData)\n\t{\n\t\tthis._programData[programData.id] = null;\n\t\tprogramData.id = -1;\n\t}\n\n\t/**\n\t * Frees the Context associated with this StageProxy.\n\t */\n\tprivate freeContext()\n\t{\n\t\tif (this._context) {\n\t\t\tthis._context.dispose();\n\n\t\t\tthis.dispatchEvent(new StageEvent(StageEvent.CONTEXT_DISPOSED, this));\n\t\t}\n\n\t\tthis._context = null;\n\n\t\tthis._initialised = false;\n\t}\n\n\tprivate onContextLost(event)\n\t{\n\n\t}\n\n\tprivate onContextRestored(event)\n\t{\n\n\t}\n\n\tpublic recoverFromDisposal():boolean\n\t{\n\t\tif (!this._context)\n\t\t\treturn false;\n\n\t\t//away.Debug.throwPIR( 'StageProxy' , 'recoverFromDisposal' , '' );\n\n\t\t/*\n\t\t if (this._iContext.driverInfo == \"Disposed\")\n\t\t {\n\t\t this._iContext = null;\n\t\t this.dispatchEvent(new StageEvent(StageEvent.CONTEXT_DISPOSED));\n\t\t return false;\n\n\t\t }\n\t\t */\n\t\treturn true;\n\n\t}\n\n\tprivate _callback(context:IContextGL)\n\t{\n\t\tthis._context = context;\n\n\t\tthis._container = this._context.container;\n\n\t\t// Only configure back buffer if width and height have been set,\n\t\t// which they may not have been if View.render() has yet to be\n\t\t// invoked for the first time.\n\t\tif (this._width && this._height)\n\t\t\tthis._context.configureBackBuffer(this._width, this._height, this._antiAlias, this._enableDepthAndStencil);\n\n\t\t// Dispatch the appropriate event depending on whether context was\n\t\t// created for the first time or recreated after a device loss.\n\t\tthis.dispatchEvent(new StageEvent(this._initialised? StageEvent.CONTEXT_RECREATED : StageEvent.CONTEXT_CREATED, this));\n\n\t\tthis._initialised = true;\n\t}\n\n\tpublic setVertexBuffer(index:number, buffer:IVertexBuffer, size:number, dimensions:number, offset:number)\n\t{\n\t\tthis._context.setVertexBufferAt(index, buffer, offset, this._bufferFormatDictionary[size][dimensions]);\n\t}\n\n\tpublic setSamplerState(index:number, repeat:boolean, smooth:boolean, mipmap:boolean)\n\t{\n\t\tvar wrap:string = repeat? ContextGLWrapMode.REPEAT :ContextGLWrapMode.CLAMP;\n\t\tvar filter:string = smooth? ContextGLTextureFilter.LINEAR : ContextGLTextureFilter.NEAREST;\n\t\tvar mipfilter:string = mipmap? ContextGLMipFilter.MIPLINEAR : ContextGLMipFilter.MIPNONE;\n\n\t\tthis._context.setSamplerStateAt(index, wrap, filter, mipfilter);\n\t}\n}\n\nexport = Stage;",
    "import AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\n\nclass TextureBaseWebGL\n{\n\tpublic textureType:string = \"\";\n\tpublic _gl:WebGLRenderingContext;\n\n\tconstructor(gl:WebGLRenderingContext)\n\t{\n\t\tthis._gl = gl;\n\t}\n\n\tpublic dispose():void\n\t{\n\t\tthrow \"Abstract method must be overridden.\";\n\t}\n\n\tpublic get glTexture():WebGLTexture\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n}\n\nexport = TextureBaseWebGL;",
    "import ByteArrayBase\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArrayBase\");\n\nimport ContextStage3D\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextStage3D\");\nimport ITexture\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITexture\");\nimport OpCodes\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/OpCodes\");\nimport ResourceBaseFlash\t\t\t= require(\"awayjs-stagegl/lib/base/ResourceBaseFlash\");\n\nclass TextureFlash extends ResourceBaseFlash implements ITexture\n{\n\tprivate _context:ContextStage3D;\n\tprivate _width:number;\n\tprivate _height:number;\n\n\tpublic get width():number\n\t{\n\t\treturn this._width;\n\t}\n\n\tpublic get height():number\n\t{\n\t\treturn this._height;\n\t}\n\n\tconstructor(context:ContextStage3D, width:number, height:number, format:string, forRTT:boolean, streaming:boolean = false)\n\t{\n\t\tsuper();\n\n\t\tthis._context = context;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.initTexture, (forRTT? OpCodes.trueValue : OpCodes.falseValue)) + width + \",\" + height + \",\" + streaming + \",\" + format + \"$\");\n\t\tthis._pId = this._context.execute();\n\t\tthis._context._iAddResource(this);\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.disposeTexture) + this._pId.toString() + \",\");\n\t\tthis._context.execute();\n\t\tthis._context._iRemoveResource(this);\n\n\t\tthis._context = null;\n\t}\n\n\tpublic uploadFromData(image:HTMLImageElement, miplevel?:number);\n\tpublic uploadFromData(imageData:ImageData, miplevel?:number);\n\tpublic uploadFromData(data:any, miplevel:number = 0)\n\t{\n\t\tif (data instanceof HTMLImageElement) {\n\t\t\tvar can = document.createElement(\"canvas\");\n\t\t\tvar w = data.width;\n\t\t\tvar h = data.height;\n\t\t\tcan.width = w;\n\t\t\tcan.height = h;\n\t\t\tvar ctx = can.getContext(\"2d\");\n\t\t\tctx.drawImage(data, 0, 0);\n\t\t\tdata = ctx.getImageData(0, 0, w, h).data;\n\t\t}\n\n\t\tvar pos = 0;\n\t\tvar bytes = ByteArrayBase.internalGetBase64String(data.length, function () {\n\t\t\treturn data[pos++];\n\t\t}, null);\n\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.uploadBytesTexture) + this._pId + \",\" + miplevel + \",\" + (this._width >> miplevel) + \",\" + (this._height >> miplevel) + \",\" + bytes + \"%\");\n\t\tthis._context.execute();\n\t}\n}\n\nexport = TextureFlash;",
    "import ByteArray                    = require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport ITexture                        = require(\"awayjs-stagegl/lib/base/ITexture\");\nimport TextureBaseWebGL                = require(\"awayjs-stagegl/lib/base/TextureBaseWebGL\");\n\nclass TextureSoftware implements ITexture {\n    public textureType:string = \"texture2d\";\n\n    private _width:number;\n    private _height:number;\n    private _mipLevels:number[][] = [];\n\n    constructor(width:number, height:number) {\n        this._width = width;\n        this._height = height;\n    }\n\n    public dispose() {\n        this._mipLevels = null;\n    }\n\n    public get width():number {\n        return this._width;\n    }\n\n    public get height():number {\n        return this._height;\n    }\n\n    public uploadFromData(image:HTMLImageElement, miplevel?:number);\n    public uploadFromData(imageData:ImageData, miplevel?:number);\n    public uploadFromData(data:any, miplevel:number = 0) {\n        console.log(\"uploadFromData: \" + data + \" miplevel: \" + miplevel);\n        this._mipLevels[miplevel] = data.data;\n    }\n\n    public getData(miplevel:number):number[] {\n        return this._mipLevels[miplevel];\n    }\n}\n\nexport = TextureSoftware;",
    "import ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport ITexture\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITexture\");\nimport TextureBaseWebGL\t\t\t\t= require(\"awayjs-stagegl/lib/base/TextureBaseWebGL\");\n\nclass TextureWebGL extends TextureBaseWebGL implements ITexture\n{\n\n\tpublic textureType:string = \"texture2d\";\n\n\tprivate _width:number;\n\tprivate _height:number;\n\n\tprivate _frameBuffer:WebGLFramebuffer;\n\n\tprivate _glTexture:WebGLTexture;\n\n\tconstructor(gl:WebGLRenderingContext, width:number, height:number)\n\t{\n\t\tsuper(gl);\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tthis._glTexture = this._gl.createTexture();\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._gl.deleteTexture(this._glTexture);\n\t}\n\n\tpublic get width():number\n\t{\n\t\treturn this._width;\n\t}\n\n\tpublic get height():number\n\t{\n\t\treturn this._height;\n\t}\n\n\tpublic get frameBuffer():WebGLFramebuffer\n\t{\n\t\tif (!this._frameBuffer) {\n\t\t\tthis._frameBuffer = this._gl.createFramebuffer();\n\t\t\tthis._gl.bindFramebuffer(this._gl.FRAMEBUFFER, this._frameBuffer);\n\t\t\tthis._gl.bindTexture(this._gl.TEXTURE_2D, this._glTexture);\n\t\t\tthis._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._width, this._height, 0, this._gl.RGBA, this._gl.UNSIGNED_BYTE, null);\n\n\t\t\tvar renderBuffer:WebGLRenderbuffer = this._gl.createRenderbuffer();\n\t\t\tthis._gl.bindRenderbuffer(this._gl.RENDERBUFFER, renderBuffer);\n\t\t\tthis._gl.renderbufferStorage(this._gl.RENDERBUFFER, this._gl.DEPTH_STENCIL, this._width, this._height);\n\n\t\t\tthis._gl.framebufferTexture2D(this._gl.FRAMEBUFFER, this._gl.COLOR_ATTACHMENT0, this._gl.TEXTURE_2D, this._glTexture, 0);\n\t\t\tthis._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER, this._gl.DEPTH_STENCIL_ATTACHMENT, this._gl.RENDERBUFFER, renderBuffer);\n\n\t\t\tthis._gl.bindTexture(this._gl.TEXTURE_2D, null);\n\t\t\tthis._gl.bindRenderbuffer(this._gl.RENDERBUFFER, null);\n\t\t\tthis._gl.bindFramebuffer(this._gl.FRAMEBUFFER, null);\n\t\t}\n\n\t\treturn this._frameBuffer;\n\t}\n\n\tpublic uploadFromData(image:HTMLImageElement, miplevel?:number);\n\tpublic uploadFromData(imageData:ImageData, miplevel?:number);\n\tpublic uploadFromData(data:any, miplevel:number = 0)\n\t{\n\t\tthis._gl.bindTexture(this._gl.TEXTURE_2D, this._glTexture);\n\t\tthis._gl.texImage2D(this._gl.TEXTURE_2D, miplevel, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, data);\n\t\tthis._gl.bindTexture(this._gl.TEXTURE_2D, null);\n\t}\n\n\tpublic uploadCompressedTextureFromByteArray(data:ByteArray, byteArrayOffset:number /*uint*/, async:boolean = false)\n\t{\n\t\tvar ext:Object = this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");\n\t\t//this._gl.compressedTexImage2D(this._gl.TEXTURE_2D, 0, this)\n\t}\n\n\tpublic get glTexture():WebGLTexture\n\t{\n\t\treturn this._glTexture;\n\t}\n\n\tpublic generateMipmaps()\n\t{\n\t\t//TODO: implement generating mipmaps\n\t\t//this._gl.bindTexture( this._gl.TEXTURE_2D, this._glTexture );\n\t\t//this._gl.generateMipmap(this._gl.TEXTURE_2D);\n\t\t//this._gl.bindTexture( this._gl.TEXTURE_2D, null );\n\t}\n}\n\nexport = TextureWebGL;",
    "import ContextStage3D\t\t\t\t= require(\"awayjs-stagegl/lib/base/ContextStage3D\");\nimport IVertexBuffer\t\t\t\t= require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\nimport OpCodes\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/OpCodes\");\nimport ResourceBaseFlash\t\t\t= require(\"awayjs-stagegl/lib/base/ResourceBaseFlash\");\n\nclass VertexBufferFlash extends ResourceBaseFlash implements IVertexBuffer\n{\n\tprivate _context:ContextStage3D;\n\tprivate _numVertices:number;\n\tprivate _dataPerVertex:number;\n\n\tconstructor(context:ContextStage3D, numVertices:number, dataPerVertex:number)\n\t{\n\t\tsuper();\n\n\t\tthis._context = context;\n\t\tthis._numVertices = numVertices;\n\t\tthis._dataPerVertex = dataPerVertex;\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.initVertexBuffer, dataPerVertex + OpCodes.intMask) + numVertices.toString() + \",\");\n\t\tthis._pId = this._context.execute();\n\t\tthis._context._iAddResource(this);\n\t}\n\n\tpublic uploadFromArray(data:number[], startVertex:number, numVertices:number)\n\t{\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.uploadArrayVertexBuffer, this._pId + OpCodes.intMask) + data.join() + \"#\" + [startVertex, numVertices].join() + \",\");\n\t\tthis._context.execute();\n\t}\n\n\tpublic uploadFromByteArray(data:ArrayBuffer, startVertex:number, numVertices:number)\n\t{\n\n\t}\n\n\tpublic get numVertices():number\n\t{\n\t\treturn this._numVertices;\n\t}\n\n\tpublic get dataPerVertex():number\n\t{\n\t\treturn this._dataPerVertex;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._context.addStream(String.fromCharCode(OpCodes.disposeVertexBuffer, this._pId + OpCodes.intMask));\n\t\tthis._context.execute();\n\t\tthis._context._iRemoveResource(this);\n\n\t\tthis._context = null;\n\t}\n}\n\nexport = VertexBufferFlash;",
    "import IVertexBuffer                = require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\n\nclass VertexBufferSoftware implements IVertexBuffer {\n    private _numVertices:number;\n    private _dataPerVertex:number;\n    private _floatData:Float32Array;\n    private _uintData:Uint8Array;\n    //private _dataOffset:number;\n\n    constructor(numVertices:number, dataPerVertex:number) {\n        this._numVertices = numVertices;\n        this._dataPerVertex = dataPerVertex;\n    }\n\n    public uploadFromArray(vertices:number[], startVertex:number, numVertices:number) {\n        console.log(\"VertexBufferSoftware.uploadFromArray\")\n        //this._dataOffset = startVertex * this._dataPerVertex;\n        this._floatData = new Float32Array(vertices);\n    }\n\n    public uploadFromByteArray(data:ArrayBuffer, startVertex:number, numVertices:number) {\n        console.log(\"VertexBufferSoftware.uploadFromByteArray\")\n        //this._dataOffset = startVertex * this._dataPerVertex;\n        this._floatData = new Float32Array(data, startVertex * this._dataPerVertex, numVertices * this._dataPerVertex / 4);\n        this._uintData = new Uint8Array(data);\n    }\n\n    public get numVertices():number {\n        return this._numVertices;\n    }\n\n    public get dataPerVertex():number {\n        return this._dataPerVertex;\n    }\n\n    public get attributesPerVertex():number {\n        return this._dataPerVertex / 4;\n    }\n\n    public dispose() {\n        this._floatData.length = 0;\n    }\n\n    public get data():Float32Array {\n        return this._floatData;\n    }\n\n    public get uintData():Uint8Array {\n        return this._uintData;\n    }\n}\n\nexport = VertexBufferSoftware;",
    "import IVertexBuffer\t\t\t\t= require(\"awayjs-stagegl/lib/base/IVertexBuffer\");\n\nclass VertexBufferWebGL implements IVertexBuffer\n{\n\n\tprivate _gl:WebGLRenderingContext;\n\tprivate _numVertices:number;\n\tprivate _dataPerVertex:number;\n\tprivate _buffer:WebGLBuffer;\n\n\tconstructor(gl:WebGLRenderingContext, numVertices:number, dataPerVertex:number)\n\t{\n\t\tthis._gl = gl;\n\t\tthis._buffer = this._gl.createBuffer();\n\t\tthis._numVertices = numVertices;\n\t\tthis._dataPerVertex = dataPerVertex;\n\t}\n\n\tpublic uploadFromArray(vertices:number[], startVertex:number, numVertices:number)\n\t{\n\t\tthis._gl.bindBuffer(this._gl.ARRAY_BUFFER, this._buffer);\n\n\t\tif (startVertex)\n\t\t\tthis._gl.bufferSubData(this._gl.ARRAY_BUFFER, startVertex*this._dataPerVertex, new Float32Array(vertices));\n\t\telse\n\t\t\tthis._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array(vertices), this._gl.STATIC_DRAW);\n\t}\n\n\n\tpublic uploadFromByteArray(data:ArrayBuffer, startVertex:number, numVertices:number)\n\t{\n\t\tthis._gl.bindBuffer(this._gl.ARRAY_BUFFER, this._buffer);\n\n\t\tif (startVertex)\n\t\t\tthis._gl.bufferSubData(this._gl.ARRAY_BUFFER, startVertex*this._dataPerVertex, data);\n\t\telse\n\t\t\tthis._gl.bufferData(this._gl.ARRAY_BUFFER, data, this._gl.STATIC_DRAW);\n\t}\n\n\tpublic get numVertices():number\n\t{\n\t\treturn this._numVertices;\n\t}\n\n\tpublic get dataPerVertex():number\n\t{\n\t\treturn this._dataPerVertex;\n\t}\n\n\tpublic get glBuffer():WebGLBuffer\n\t{\n\t\treturn this._buffer;\n\t}\n\n\tpublic dispose()\n\t{\n\t\tthis._gl.deleteBuffer(this._buffer);\n\t}\n}\n\nexport = VertexBufferWebGL;",
    "import EventBase\t\t\t\t= require(\"awayjs-core/lib/events/EventBase\");\n\nimport Stage\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nclass StageEvent extends EventBase\n{\n\t/**\n\t *\n\t */\n\tpublic static STAGE_ERROR:string = \"stageError\";\n\n\t/**\n\t *\n\t */\n\tpublic static CONTEXT_CREATED:string = \"contextCreated\";\n\n\t/**\n\t *\n\t */\n\tpublic static CONTEXT_DISPOSED:string = \"contextDisposed\";\n\n\t/**\n\t *\n\t */\n\tpublic static CONTEXT_RECREATED:string = \"contextRecreated\";\n\n\t/**\n\t *\n\t */\n\tpublic static VIEWPORT_UPDATED:string = \"viewportUpdated\";\n\n\tprivate _stage:Stage;\n\n\t/**\n\t *\n\t */\n\tpublic get stage():Stage\n\t{\n\t\treturn this._stage;\n\t}\n\n\tconstructor(type:string, stage:Stage)\n\t{\n\t\tsuper(type);\n\n\t\tthis._stage = stage;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic clone():StageEvent\n\t{\n\t\treturn new StageEvent(this.type, this._stage);\n\t}\n}\n\nexport = StageEvent;",
    "import BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport MipmapGenerator\t\t\t\t= require(\"awayjs-core/lib/utils/MipmapGenerator\");\n\nimport GL_Image2D\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_Image2D\");\nimport ContextGLTextureFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFormat\");\nimport ITexture\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITexture\");\nimport ITextureBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITextureBase\");\n\n/**\n *\n * @class away.pool.ImageObjectBase\n */\nclass GL_BitmapImage2D extends GL_Image2D\n{\n\tprivate _mipmapData:Array<BitmapImage2D>;\n\n\tpublic activate(index:number, repeat:boolean, smooth:boolean, mipmap:boolean)\n\t{\n\t\tsuper.activate(index, repeat, smooth, mipmap);\n\n\t\tif (!this._mipmap && mipmap) {\n\t\t\tthis._mipmap = true;\n\t\t\tthis._invalid = true;\n\t\t}\n\n\t\tif (this._invalid) {\n\t\t\tthis._invalid = false;\n\t\t\tif (mipmap) {\n\t\t\t\tvar mipmapData:Array<BitmapImage2D> = this._mipmapData || (this._mipmapData = new Array<BitmapImage2D>());\n\n\t\t\t\tif((<BitmapImage2D> this._asset).getCanvas()) {\n\t\t\t\t\tMipmapGenerator._generateMipMaps((<BitmapImage2D> this._asset).getCanvas(), mipmapData, true);\n\t\t\t\t}else{\n\t\t\t\t\tMipmapGenerator._generateMipMaps((<BitmapImage2D> this._asset), mipmapData, true);\n\t\t\t\t}\n\n\t\t\t\tvar len:number = mipmapData.length;\n\t\t\t\tfor (var i:number = 0; i < len; i++)\n\t\t\t\t\t(<ITexture> this._texture).uploadFromData(mipmapData[i].getImageData(), i);\n\t\t\t} else {\n\t\t\t\t(<ITexture> this._texture).uploadFromData((<BitmapImage2D> this._asset).getImageData(), 0);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tif (this._mipmapData) {\n\t\t\tvar len:number = this._mipmapData.length;\n\t\t\tfor (var i:number = 0; i < len; i++)\n\t\t\t\tMipmapGenerator._freeMipMapHolder(this._mipmapData[i]);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param context\n\t * @returns {ITexture}\n\t */\n\tpublic _getTexture():ITextureBase\n\t{\n\t\tif (!this._texture) {\n\t\t\tthis._invalid = true;\n\t\t\treturn super._getTexture();\n\t\t}\n\n\t\treturn this._texture;\n\t}\n}\n\nexport = GL_BitmapImage2D;",
    "import IAssetClass\t\t\t\t\t= require(\"awayjs-core/lib/library/IAssetClass\");\nimport BitmapImageCube\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImageCube\");\nimport BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport MipmapGenerator\t\t\t\t= require(\"awayjs-core/lib/utils/MipmapGenerator\");\n\nimport GL_ImageCube\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageCube\");\nimport ContextGLTextureFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFormat\");\nimport ITextureBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITextureBase\");\nimport ICubeTexture\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ICubeTexture\");\n\n/**\n *\n * @class away.pool.ImageObjectBase\n */\nclass GL_BitmapImageCube extends GL_ImageCube\n{\n\tpublic _mipmapDataArray:Array<Array<BitmapImage2D>> = new Array<Array<BitmapImage2D>>(6);\n\n\tpublic activate(index:number, repeat:boolean, smooth:boolean, mipmap:boolean)\n\t{\n\t\tsuper.activate(index, repeat, smooth, mipmap);\n\n\t\tif (!this._mipmap && mipmap) {\n\t\t\tthis._mipmap = true;\n\t\t\tthis._invalid = true;\n\t\t}\n\n\t\tif (this._invalid) {\n\t\t\tthis._invalid = false;\n\t\t\tfor (var i:number = 0; i < 6; ++i) {\n\t\t\t\tif (mipmap) {\n\t\t\t\t\tvar mipmapData:Array<BitmapImage2D> = this._mipmapDataArray[i] || (this._mipmapDataArray[i] = new Array<BitmapImage2D>());\n\n\t\t\t\t\tMipmapGenerator._generateMipMaps((<BitmapImageCube> this._asset).getCanvas(i), mipmapData, true);\n\t\t\t\t\tvar len:number = mipmapData.length;\n\t\t\t\t\tfor (var j:number = 0; j < len; j++)\n\t\t\t\t\t\t(<ICubeTexture> this._texture).uploadFromData(mipmapData[j].getImageData(), i, j);\n\t\t\t\t} else {\n\t\t\t\t\t(<ICubeTexture> this._texture).uploadFromData((<BitmapImageCube> this._asset).getImageData(i), i, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tfor (var i:number = 0; i < 6; i++) {\n\t\t\tvar mipmapData:Array<BitmapImage2D> = this._mipmapDataArray[i];\n\n\t\t\tif (mipmapData) {\n\t\t\t\tvar len:number = mipmapData.length;\n\n\t\t\t\tfor (var j:number = 0; j < len; i++)\n\t\t\t\t\tMipmapGenerator._freeMipMapHolder(mipmapData[j]);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param context\n\t * @returns {ITexture}\n\t */\n\tpublic _getTexture():ITextureBase\n\t{\n\t\tif (!this._texture) {\n\t\t\tthis._invalid = true;\n\t\t\treturn super._getTexture();\n\t\t}\n\n\t\treturn this._texture;\n\t}\n}\n\nexport = GL_BitmapImageCube;",
    "import Image2D\t\t\t\t\t\t= require(\"awayjs-core/lib/image/Image2D\");\n\nimport ContextGLTextureFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFormat\");\nimport ITextureBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITextureBase\");\nimport GL_ImageBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageBase\");\n\n/**\n *\n * @class away.pool.GL_ImageBase\n */\nclass GL_Image2D extends GL_ImageBase\n{\n\t/**\n\t *\n\t * @param context\n\t * @returns {ITexture}\n\t */\n\tpublic _getTexture():ITextureBase\n\t{\n\t\treturn this._texture || (this._texture = this._stage.context.createTexture((<Image2D> this._asset).width, (<Image2D> this._asset).height, ContextGLTextureFormat.BGRA, true));\n\t}\n}\n\nexport = GL_Image2D;",
    "import AbstractMethodError\t\t\t= require(\"awayjs-core/lib/errors/AbstractMethodError\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport IAsset\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport AbstractionBase\t\t\t\t= require(\"awayjs-core/lib/library/AbstractionBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport ITextureBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITextureBase\");\n\n/**\n *\n * @class away.pool.GL_ImageBase\n */\nclass GL_ImageBase extends AbstractionBase\n{\n\tpublic usages:number = 0;\n\n\tpublic _texture:ITextureBase;\n\n\tpublic _mipmap:boolean;\n\n\tpublic _stage:Stage;\n\n\tconstructor(asset:IAsset, stage:Stage)\n\t{\n\t\tsuper(asset, stage);\n\n\t\tthis._stage = stage;\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tif (this._texture) {\n\t\t\tthis._texture.dispose();\n\t\t\tthis._texture = null;\n\t\t}\n\t}\n\n\tpublic activate(index:number, repeat:boolean, smooth:boolean, mipmap:boolean)\n\t{\n\t\tthis._stage.setSamplerState(index, repeat, smooth, mipmap);\n\n\t\tthis._stage.context.setTextureAt(index, this._getTexture());\n\t}\n\n\tpublic _getTexture():ITextureBase\n\t{\n\t\tthrow new AbstractMethodError();\n\t}\n}\n\nexport = GL_ImageBase;",
    "import ImageCube\t\t\t\t\t= require(\"awayjs-core/lib/image/ImageCube\");\n\nimport ContextGLTextureFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFormat\");\nimport ITextureBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITextureBase\");\nimport GL_ImageBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageBase\");\n\n/**\n *\n * @class away.pool.GL_ImageCubeBase\n */\nclass GL_ImageCube extends GL_ImageBase\n{\n\t/**\n\t *\n\t * @param context\n\t * @returns {ITexture}\n\t */\n\tpublic _getTexture():ITextureBase\n\t{\n\t\treturn this._texture || (this._texture = this._stage.context.createCubeTexture((<ImageCube> this._asset).size, ContextGLTextureFormat.BGRA, false));\n\t}\n}\n\nexport = GL_ImageCube;",
    "import GL_Image2D\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_Image2D\");\n\n/**\n *\n * @class away.pool.ImageObjectBase\n */\nclass GL_RenderIimage2D extends GL_Image2D\n{\n\n\tpublic activate(index:number, repeat:boolean, smooth:boolean, mipmap:boolean)\n\t{\n\t\tsuper.activate(index, repeat, smooth, false);\n\n\t\t//TODO: allow automatic mipmap generation\n\t}\n}\n\nexport = GL_RenderIimage2D;",
    "import GL_ImageCube\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_ImageCube\");\n\n/**\n *\n * @class away.pool.ImageObjectBase\n */\nclass GL_RenderImageCube extends GL_ImageCube\n{\n\tpublic activate(index:number, repeat:boolean, smooth:boolean, mipmap:boolean)\n\t{\n\t\tsuper.activate(index, repeat, smooth, false);\n\n\t\t//TODO: allow automatic mipmap generation\n\n\t}\n}\n\nexport = GL_RenderImageCube;",
    "import BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport SpecularImage2D\t\t\t\t= require(\"awayjs-core/lib/image/SpecularImage2D\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport MipmapGenerator\t\t\t\t= require(\"awayjs-core/lib/utils/MipmapGenerator\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextGLTextureFormat\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFormat\");\nimport ITexture\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITexture\");\nimport ITextureBase\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/ITextureBase\");\nimport GL_Image2D\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/GL_Image2D\");\n\n/**\n *\n * @class away.pool.ImageObjectBase\n */\nclass GL_SpecularImage2D extends GL_Image2D\n{\n\tprivate _mipmapData:Array<BitmapImage2D>;\n\n\tpublic activate(index:number, repeat:boolean, smooth:boolean, mipmap:boolean)\n\t{\n\t\tsuper.activate(index, repeat, smooth, mipmap);\n\n\t\tif (!this._mipmap && mipmap) {\n\t\t\tthis._mipmap = true;\n\t\t\tthis._invalid = true;\n\t\t}\n\n\t\tif (this._invalid) {\n\t\t\tthis._invalid = false;\n\t\t\tif (mipmap) {\n\t\t\t\tvar mipmapData:Array<BitmapImage2D> = this._mipmapData || (this._mipmapData = new Array<BitmapImage2D>());\n\n\t\t\t\tMipmapGenerator._generateMipMaps((<SpecularImage2D> this._asset).getCanvas(), mipmapData);\n\t\t\t\tvar len:number = mipmapData.length;\n\t\t\t\tfor (var i:number = 0; i < len; i++)\n\t\t\t\t\t(<ITexture> this._texture).uploadFromData(mipmapData[i].getImageData(), i);\n\t\t\t} else {\n\t\t\t\t(<ITexture> this._texture).uploadFromData((<SpecularImage2D> this._asset).getImageData(), 0);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onClear(event:AssetEvent)\n\t{\n\t\tsuper.onClear(event);\n\n\t\tvar len:number = this._mipmapData.length;\n\t\tfor (var i:number = 0; i < len; i++)\n\t\t\tMipmapGenerator._freeMipMapHolder(this._mipmapData[i]);\n\t}\n\n\t/**\n\t *\n\t * @param context\n\t * @returns {ITexture}\n\t */\n\tpublic _getTexture():ITextureBase\n\t{\n\t\tif (!this._texture) {\n\t\t\tthis._invalid = true;\n\t\t\treturn super._getTexture();\n\t\t}\n\n\t\treturn this._texture;\n\t}\n}\n\nexport = GL_SpecularImage2D;",
    "import Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport ProgramData\t\t\t\t\t= require(\"awayjs-stagegl/lib/image/ProgramData\");\n\n/**\n * @class away.pool.ProgramDataPool\n */\nclass ProgramDataPool\n{\n\tprivate _pool:Object = new Object();\n\tprivate _stage:Stage;\n\n\t/**\n\t * //TODO\n\t *\n\t * @param textureDataClass\n\t */\n\tconstructor(stage:Stage)\n\t{\n\t\tthis._stage = stage;\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param materialOwner\n\t * @returns ITexture\n\t */\n\tpublic getItem(vertexString:string, fragmentString:string):ProgramData\n\t{\n\t\tvar key:string = vertexString + fragmentString;\n\t\treturn this._pool[key] || (this._pool[key] = new ProgramData(this, this._stage, vertexString, fragmentString));\n\t}\n\n\t/**\n\t * //TODO\n\t *\n\t * @param materialOwner\n\t */\n\tpublic disposeItem(key:string)\n\t{\n\t\tthis._pool[key] = null;\n\t}\n}\n\nexport = ProgramDataPool;",
    "import ProgramDataPool\t\t\t\t= require(\"awayjs-stagegl/lib/image/ProgramDataPool\");\nimport IProgram\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IProgram\");\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\n/**\n *\n * @class away.pool.ProgramDataBase\n */\nclass ProgramData\n{\n\tpublic static PROGRAMDATA_ID_COUNT:number = 0;\n\n\tprivate _pool:ProgramDataPool;\n\n\tpublic vertexString:string;\n\n\tpublic fragmentString:string;\n\n\tpublic stage:Stage;\n\n\tpublic usages:number = 0;\n\n\tpublic program:IProgram;\n\n\tpublic id:number;\n\n\tconstructor(pool:ProgramDataPool, context:Stage, vertexString:string, fragmentString:string)\n\t{\n\t\tthis._pool = pool;\n\t\tthis.stage = context;\n\t\tthis.vertexString = vertexString;\n\t\tthis.fragmentString = fragmentString;\n\t\tthis.stage.registerProgram(this);\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic dispose()\n\t{\n\t\tthis.usages--;\n\n\t\tif (!this.usages) {\n\t\t\tthis._pool.disposeItem(this.vertexString + this.fragmentString);\n\n\t\t\tthis.stage.unRegisterProgram(this);\n\n\t\t\tif (this.program) {\n\t\t\t\tthis.program.dispose();\n\t\t\t\tthis.program = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport = ProgramData;",
    "import EventDispatcher\t\t\t\t= require(\"awayjs-core/lib/events/EventDispatcher\");\nimport ArgumentError\t\t\t\t= require(\"awayjs-core/lib/errors/ArgumentError\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\nimport StageEvent\t\t\t\t\t= require(\"awayjs-stagegl/lib/events/StageEvent\");\n\n/**\n * The StageManager class provides a multiton object that handles management for Stage objects.\n *\n * @see away.base.Stage\n */\nclass StageManager extends EventDispatcher\n{\n\tprivate static STAGE_MAX_QUANTITY:number = 8;\n\tprivate _stages:Array<Stage>;\n\n\tprivate static _instance:StageManager;\n\tprivate static _numStages:number = 0;\n\tprivate _onContextCreatedDelegate:(event:StageEvent) => void;\n\n\t/**\n\t * Creates a new StageManager class.\n\t * @param stage The Stage object that contains the Stage objects to be managed.\n\t * @private\n\t */\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._stages = new Array<Stage>(StageManager.STAGE_MAX_QUANTITY);\n\n\t\tthis._onContextCreatedDelegate = (event:StageEvent) => this.onContextCreated(event);\n\t}\n\n\t/**\n\t * Gets a StageManager instance for the given Stage object.\n\t * @param stage The Stage object that contains the Stage objects to be managed.\n\t * @return The StageManager instance for the given Stage object.\n\t */\n\tpublic static getInstance():StageManager\n\t{\n\t\tif (this._instance == null)\n\t\t\tthis._instance = new StageManager();\n\n\t\treturn this._instance;\n\t}\n\n\t/**\n\t * Requests the Stage for the given index.\n\t *\n\t * @param index The index of the requested Stage.\n\t * @param forceSoftware Whether to force software mode even if hardware acceleration is available.\n\t * @param profile The compatibility profile, an enumeration of ContextProfile\n\t * @return The Stage for the given index.\n\t */\n\tpublic getStageAt(index:number, forceSoftware:boolean = false, profile:string = \"baseline\", mode:string = \"auto\"):Stage\n\t{\n\t\tif (index < 0 || index >= StageManager.STAGE_MAX_QUANTITY)\n\t\t\tthrow new ArgumentError(\"Index is out of bounds [0..\" + StageManager.STAGE_MAX_QUANTITY + \"]\");\n\n\t\tif (!this._stages[index]) {\n\t\t\tStageManager._numStages++;\n\n\t\t\tif(document) {\n\t\t\t\tvar canvas:HTMLCanvasElement = document.createElement(\"canvas\");\n\t\t\t\tcanvas.id = \"stage\" + index;\n\t\t\t\tdocument.body.appendChild(canvas);\n\t\t\t}\n\t\t\tvar stage:Stage = this._stages[index] = new Stage(canvas, index, this, forceSoftware, profile);\n\t\t\tstage.addEventListener(StageEvent.CONTEXT_CREATED, this._onContextCreatedDelegate);\n\t\t\tstage.requestContext(forceSoftware, profile, mode);\n\t\t}\n\n\t\treturn stage;\n\t}\n\n\t/**\n\t * Removes a Stage from the manager.\n\t * @param stage\n\t * @private\n\t */\n\tpublic iRemoveStage(stage:Stage)\n\t{\n\t\tStageManager._numStages--;\n\n\t\tstage.removeEventListener(StageEvent.CONTEXT_CREATED, this._onContextCreatedDelegate);\n\n\t\tthis._stages[stage.stageIndex] = null;\n\t}\n\n\t/**\n\t * Get the next available stage. An error is thrown if there are no StageProxies available\n\t * @param forceSoftware Whether to force software mode even if hardware acceleration is available.\n\t * @param profile The compatibility profile, an enumeration of ContextProfile\n\t * @return The allocated stage\n\t */\n\tpublic getFreeStage(forceSoftware:boolean = false, profile:string = \"baseline\", mode:string = \"auto\"):Stage\n\t{\n\t\tvar i:number = 0;\n\t\tvar len:number = this._stages.length;\n\n\t\twhile (i < len) {\n\t\t\tif (!this._stages[i])\n\t\t\t\treturn this.getStageAt(i, forceSoftware, profile, mode);\n\n\t\t\t++i;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks if a new stage can be created and managed by the class.\n\t * @return true if there is one slot free for a new stage\n\t */\n\tpublic get hasFreeStage():boolean\n\t{\n\t\treturn StageManager._numStages < StageManager.STAGE_MAX_QUANTITY? true : false;\n\t}\n\n\t/**\n\t * Returns the amount of stage objects that can be created and managed by the class\n\t * @return the amount of free slots\n\t */\n\tpublic get numSlotsFree():number\n\t{\n\t\treturn StageManager.STAGE_MAX_QUANTITY - StageManager._numStages;\n\t}\n\n\t/**\n\t * Returns the amount of Stage objects currently managed by the class.\n\t * @return the amount of slots used\n\t */\n\tpublic get numSlotsUsed():number\n\t{\n\t\treturn StageManager._numStages;\n\t}\n\n\t/**\n\t * The maximum amount of Stage objects that can be managed by the class\n\t */\n\tpublic get numSlotsTotal():number\n\t{\n\t\treturn this._stages.length;\n\t}\n\n\tprivate onContextCreated(event:StageEvent):void\n\t{\n\t\t//var stage:Stage = <Stage> e.target;\n\t\t//document.body.appendChild(stage.canvas)\n\t}\n}\n\nexport = StageManager;"
  ],
  "sourceRoot": ""
}