require=function e(t,a,r){function i(s,l){if(!a[s]){if(!t[s]){var o=typeof require=="function"&&require;if(!l&&o)return o(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return i(a?a:e)},c,c.exports,e,t,a,r)}return a[s].exports}var n=typeof require=="function"&&require;for(var s=0;s<r.length;s++)i(r[s]);return i}({"awayjs-stagegl/lib/aglsl/AGALTokenizer":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/Description");var i=e("awayjs-stagegl/lib/aglsl/Header");var n=e("awayjs-stagegl/lib/aglsl/Mapping");var s=e("awayjs-stagegl/lib/aglsl/Token");var l=function(){function e(){}e.prototype.decribeAGALByteArray=function(e){var t=new i;if(e.readUnsignedByte()!=160){throw"Bad AGAL: Missing 0xa0 magic byte."}t.version=e.readUnsignedInt();if(t.version>=16){e.readUnsignedByte();t.version>>=1}if(e.readUnsignedByte()!=161){throw"Bad AGAL: Missing 0xa1 magic byte."}t.progid=e.readUnsignedByte();switch(t.progid){case 1:t.type="fragment";break;case 0:t.type="vertex";break;case 2:t.type="cpu";break;default:t.type="";break}var a=new r;var l=[];while(e.position<e.length){var o=new s;o.opcode=e.readUnsignedInt();var u=n.agal2glsllut[o.opcode];if(!u){throw"Opcode not valid or not implemented yet: "+o.opcode}if(u.matrixheight){a.hasmatrix=true}if(u.dest){o.dest.regnum=e.readUnsignedShort();o.dest.mask=e.readUnsignedByte();o.dest.regtype=e.readUnsignedByte();a.regwrite[o.dest.regtype][o.dest.regnum]|=o.dest.mask}else{o.dest=null;e.readUnsignedInt()}if(u.a){this.readReg(o.a,1,a,e)}else{o.a=null;e.readUnsignedInt();e.readUnsignedInt()}if(u.b){this.readReg(o.b,u.matrixheight|0,a,e)}else{o.b=null;e.readUnsignedInt();e.readUnsignedInt()}l.push(o)}a.header=t;a.tokens=l;return a};e.prototype.readReg=function(e,t,a,r){e.regnum=r.readUnsignedShort();e.indexoffset=r.readByte();e.swizzle=r.readUnsignedByte();e.regtype=r.readUnsignedByte();a.regread[e.regtype][e.regnum]=15;if(e.regtype==5){e.lodbiad=e.indexoffset;e.indexoffset=undefined;e.swizzle=undefined;e.readmode=r.readUnsignedByte();e.dim=e.readmode>>4;e.readmode&=15;e.special=r.readUnsignedByte();e.wrap=e.special>>4;e.special&=15;e.mipmap=r.readUnsignedByte();e.filter=e.mipmap>>4;e.mipmap&=15;a.samplers[e.regnum]=e}else{e.indexregtype=r.readUnsignedByte();e.indexselect=r.readUnsignedByte();e.indirectflag=r.readUnsignedByte()}if(e.indirectflag){a.hasindirect=true}if(!e.indirectflag&&t){for(var i=0;i<t;i++){a.regread[e.regtype][e.regnum+i]=a.regread[e.regtype][e.regnum]}}};return e}();t.exports=l},{"awayjs-stagegl/lib/aglsl/Description":"awayjs-stagegl/lib/aglsl/Description","awayjs-stagegl/lib/aglsl/Header":"awayjs-stagegl/lib/aglsl/Header","awayjs-stagegl/lib/aglsl/Mapping":"awayjs-stagegl/lib/aglsl/Mapping","awayjs-stagegl/lib/aglsl/Token":"awayjs-stagegl/lib/aglsl/Token"}],"awayjs-stagegl/lib/aglsl/AGLSLParser":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/Mapping");var i=e("awayjs-stagegl/lib/base/ContextStage3D");var n=function(){function e(){}e.prototype.parse=function(e){var t="";var a="";t+="precision highp float;\n";var n=e.header.type[0];if(e.header.type=="vertex"){t+="uniform float yflip;\n"}if(!e.hasindirect){for(var s=0;s<e.regread[1].length;s++){if(e.regread[1][s]){t+="uniform vec4 "+n+"c"+s+";\n"}}}else{t+="uniform vec4 "+n+"carrr["+i.maxvertexconstants+"];\n"}for(var s=0;s<e.regread[2].length||s<e.regwrite[2].length;s++){if(e.regread[2][s]||e.regwrite[2][s]){t+="vec4 "+n+"t"+s+";\n"}}for(var s=0;s<e.regread[0].length;s++){if(e.regread[0][s]){t+="attribute vec4 va"+s+";\n"}}for(var s=0;s<e.regread[4].length||s<e.regwrite[4].length;s++){if(e.regread[4][s]||e.regwrite[4][s]){t+="varying vec4 vi"+s+";\n"}}var l=["2D","Cube","3D",""];for(var s=0;s<e.samplers.length;s++){if(e.samplers[s]){t+="uniform sampler"+l[e.samplers[s].dim&3]+" fs"+s+";\n"}}if(e.header.type=="vertex"){t+="vec4 outpos;\n"}if(e.writedepth){t+="vec4 tmp_FragDepth;\n"}var o=false;a+="void main() {\n";for(var s=0;s<e.tokens.length;s++){var u=r.agal2glsllut[e.tokens[s].opcode];if(u.s.indexOf("dFdx")!=-1||u.s.indexOf("dFdy")!=-1)o=true;if(!u){throw"Opcode not valid or not implemented yet: "}var c=u.matrixheight||1;for(var f=0;f<c;f++){var g="  "+u.s;if(e.tokens[s].dest){if(u.matrixheight){if((e.tokens[s].dest.mask>>f&1)!=1){continue}var h=this.regtostring(e.tokens[s].dest.regtype,e.tokens[s].dest.regnum,e,n);var d="float";var p=["x","y","z","w"][f];h+="."+p}else{var h=this.regtostring(e.tokens[s].dest.regtype,e.tokens[s].dest.regnum,e,n);var d;var p;if(e.tokens[s].dest.mask!=15){var _=0;p="";if(e.tokens[s].dest.mask&1){_++;p+="x"}if(e.tokens[s].dest.mask&2){_++;p+="y"}if(e.tokens[s].dest.mask&4){_++;p+="z"}if(e.tokens[s].dest.mask&8){_++;p+="w"}h+="."+p;switch(_){case 1:d="float";break;case 2:d="vec2";break;case 3:d="vec3";break;default:throw"Unexpected destination mask"}}else{d="vec4";p="xyzw"}}g=g.replace("%dest",h);g=g.replace("%cast",d);g=g.replace("%dm",p)}var b=15;if(!u.ndwm&&u.dest&&e.tokens[s].dest){b=e.tokens[s].dest.mask}if(e.tokens[s].a){g=g.replace("%a",this.sourcetostring(e.tokens[s].a,0,b,u.scalar,e,n))}if(e.tokens[s].b){g=g.replace("%b",this.sourcetostring(e.tokens[s].b,f,b,u.scalar,e,n));if(e.tokens[s].b.regtype==5){var y=["2D","Cube","3D"][e.tokens[s].b.dim];var m=["vec2","vec3","vec3"][e.tokens[s].b.dim];g=g.replace("%texdim",y);g=g.replace("%texsize",m);var v="";g=g.replace("%lod",v)}}a+=g}}if(e.header.type=="vertex"){a+="  gl_Position = vec4(outpos.x, outpos.y, outpos.z*2.0 - outpos.w, outpos.w);\n"}if(o&&e.header.type=="fragment"){t="#extension GL_OES_standard_derivatives : enable\n"+t}if(e.writedepth){a+="  gl_FragDepth = clamp(tmp_FragDepth,0.0,1.0);\n"}a+="}\n";console.log(t+a);return t+a};e.prototype.regtostring=function(e,t,a,r){switch(e){case 0:return"va"+t;case 1:if(a.hasindirect&&a.header.type=="vertex"){return"vcarrr["+t+"]"}else{return r+"c"+t}case 2:return r+"t"+t;case 3:return a.header.type=="vertex"?"outpos":"gl_FragColor";case 4:return"vi"+t;case 5:return"fs"+t;case 6:return"tmp_FragDepth";default:throw"Unknown register type"}};e.prototype.sourcetostring=function(e,t,a,r,i,n){var s=["x","y","z","w"];var l;if(e.indirectflag){l="vcarrr[int("+this.regtostring(e.indexregtype,e.regnum,i,n)+"."+s[e.indexselect]+")";var o=t+e.indexoffset;if(o<0)l+=o.toString();if(o>0)l+="+"+o.toString();l+="]"}else{l=this.regtostring(e.regtype,e.regnum+t,i,n)}if(e.regtype==5){return l}if(r){return l+"."+s[e.swizzle>>0&3]}if(e.swizzle==228&&a==15){return l}l+=".";if(a&1)l+=s[e.swizzle>>0&3];if(a&2)l+=s[e.swizzle>>2&3];if(a&4)l+=s[e.swizzle>>4&3];if(a&8)l+=s[e.swizzle>>6&3];return l};return e}();t.exports=n},{"awayjs-stagegl/lib/aglsl/Mapping":"awayjs-stagegl/lib/aglsl/Mapping","awayjs-stagegl/lib/base/ContextStage3D":"awayjs-stagegl/lib/base/ContextStage3D"}],"awayjs-stagegl/lib/aglsl/Description":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/Header");var i=function(){function e(){this.regread=[[],[],[],[],[],[],[]];this.regwrite=[[],[],[],[],[],[],[]];this.hasindirect=false;this.writedepth=false;this.hasmatrix=false;this.samplers=[];this.tokens=[];this.header=new r}return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/Header":"awayjs-stagegl/lib/aglsl/Header"}],"awayjs-stagegl/lib/aglsl/Destination":[function(e,t,a){var r=function(){function e(){this.mask=0;this.regnum=0;this.regtype=0;this.dim=0}return e}();t.exports=r},{}],"awayjs-stagegl/lib/aglsl/Header":[function(e,t,a){var r=function(){function e(){this.progid=0;this.version=0;this.type=""}return e}();t.exports=r},{}],"awayjs-stagegl/lib/aglsl/Mapping":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/OpLUT");var i=function(){function e(e){}e.agal2glsllut=[new r("%dest = %cast(%a);\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(%a + %b);\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(%a - %b);\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(%a * %b);\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(%a / %b);\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(1.0) / %a;\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(min(%a,%b));\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(max(%a,%b));\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(fract(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(sqrt(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(inversesqrt(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(pow(abs(%a),%b));\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(log2(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(exp2(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(normalize(vec3( %a ) ));\n",0,true,true,false,null,null,true,null,null,null),new r("%dest = %cast(sin(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(cos(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(cross(vec3(%a),vec3(%b)));\n",0,true,true,true,null,null,true,null,null,null),new r("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",0,true,true,true,null,null,true,null,null,null),new r("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",0,true,true,true,null,null,true,null,null,null),new r("%dest = %cast(abs(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(%a * -1.0);\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(clamp(%a,0.0,1.0));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",null,true,true,true,3,3,true,null,null,null),new r("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,true,true,true,4,4,true,null,null,null),new r("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,true,true,true,4,3,true,null,null,null),new r("%dest = %cast(dFdx(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(dFdy(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("if (float(%a)==float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new r("if (float(%a)!=float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new r("if (float(%a)>=float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new r("if (float(%a)<float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new r("} else {;\n",0,false,false,false,null,null,null,null,null,null),new r("};\n",0,false,false,false,null,null,null,null,null,null),new r(null,null,null,null,false,null,null,null,null,null,null),new r(null,null,null,null,false,null,null,null,null,null,null),new r(null,null,null,null,false,null,null,null,null,null,null),new r(null,null,null,null,false,null,null,null,null,null,null),new r("%dest = %cast(texture%texdimLod(%b,%texsize(%a)).%dm);\n",null,true,true,true,null,null,null,null,true,null),new r("if ( float(%a)<0.0 ) discard;\n",null,false,true,false,null,null,null,true,null,null),new r("%dest = %cast(texture%texdim(%b,%texsize(%a)%lod).%dm);\n",null,true,true,true,null,null,true,null,true,true),new r("%dest = %cast(greaterThanEqual(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new r("%dest = %cast(lessThan(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new r("%dest = %cast(sign(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(equal(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new r("%dest = %cast(notEqual(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null)];return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/OpLUT":"awayjs-stagegl/lib/aglsl/OpLUT"}],"awayjs-stagegl/lib/aglsl/OpLUT":[function(e,t,a){var r=function(){function e(e,t,a,r,i,n,s,l,o,u,c){this.s=e;this.flags=t;this.dest=a;this.a=r;this.b=i;this.matrixwidth=n;this.matrixheight=s;this.ndwm=l;this.scalar=o;this.dm=u;this.lod=c}return e}();t.exports=r},{}],"awayjs-stagegl/lib/aglsl/Sampler":[function(e,t,a){var r=function(){function e(){this.lodbias=0;this.dim=0;this.readmode=0;this.special=0;this.wrap=0;this.mipmap=0;this.filter=0}return e}();t.exports=r},{}],"awayjs-stagegl/lib/aglsl/Token":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/Destination");var i=function(){function e(){this.dest=new r;this.opcode=0;this.a=new r;this.b=new r}return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/Destination":"awayjs-stagegl/lib/aglsl/Destination"}],"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/assembler/OpcodeMap");var i=e("awayjs-stagegl/lib/aglsl/assembler/Part");var n=e("awayjs-stagegl/lib/aglsl/assembler/RegMap");var s=e("awayjs-stagegl/lib/aglsl/assembler/SamplerMap");var l=function(){function e(){this.r={};this.cur=new i}e.prototype.assemble=function(e,t,a){if(t===void 0){t=null}if(a===void 0){a=null}if(!a){a=1}if(t){this.addHeader(t,a)}var r=e.replace(/[\f\n\r\v]+/g,"\n").split("\n");for(var i in r){this.processLine(r[i],i)}return this.r};e.prototype.processLine=function(e,t){var a=e.search("//");if(a!=-1){e=e.slice(0,a)}e=e.replace(/^\s+|\s+$/g,"");if(!(e.length>0)){return}var i=e.search(/<.*>/g);var n=null;if(i!=-1){n=e.slice(i).match(/([\w\.\-\+]+)/gi);e=e.slice(0,i)}var s=e.match(/([\w\.\+\[\]]+)/gi);if(!s||s.length<1){if(e.length>=3){console.log("Warning: bad line "+t+": "+e)}return}switch(s[0]){case"part":this.addHeader(s[1],Number(s[2]));break;case"endpart":if(!this.cur){throw"Unexpected endpart"}this.cur.data.position=0;this.cur=null;return;default:if(!this.cur){console.log("Warning: bad line "+t+": "+e+" (Outside of any part definition)");return}if(this.cur.name=="comment"){return}var l=r.map[s[0]];if(!l){throw"Bad opcode "+s[0]+" "+t+": "+e}this.emitOpcode(this.cur,l.opcode);var o=1;if(l.dest&&l.dest!="none"){if(!this.emitDest(this.cur,s[o++],l.dest)){throw"Bad destination register "+s[o-1]+" "+t+": "+e}}else{this.emitZeroDword(this.cur)}if(l.a&&l.a.format!="none"){if(!this.emitSource(this.cur,s[o++],l.a))throw"Bad source register "+s[o-1]+" "+t+": "+e}else{this.emitZeroQword(this.cur)}if(l.b&&l.b.format!="none"){if(l.b.format=="sampler"){if(!this.emitSampler(this.cur,s[o++],l.b,n)){throw"Bad sampler register "+s[o-1]+" "+t+": "+e}}else{if(!this.emitSource(this.cur,s[o++],l.b)){throw"Bad source register "+s[o-1]+" "+t+": "+e}}}else{this.emitZeroQword(this.cur)}break}};e.prototype.emitHeader=function(e){e.data.writeUnsignedByte(160);e.data.writeUnsignedInt(e.version);if(e.version>=16){e.data.writeUnsignedByte(0)}e.data.writeUnsignedByte(161);switch(e.name){case"fragment":e.data.writeUnsignedByte(1);break;case"vertex":e.data.writeUnsignedByte(0);break;case"cpu":e.data.writeUnsignedByte(2);break;default:e.data.writeUnsignedByte(255);break}};e.prototype.emitOpcode=function(e,t){e.data.writeUnsignedInt(t)};e.prototype.emitZeroDword=function(e){e.data.writeUnsignedInt(0)};e.prototype.emitZeroQword=function(e){e.data.writeUnsignedInt(0);e.data.writeUnsignedInt(0)};e.prototype.emitDest=function(e,t,a){var r=t.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i);if(!n.map[r[1]])return false;var i={num:r[2]?r[2]:0,code:n.map[r[1]].code,mask:this.stringToMask(r[3])};e.data.writeUnsignedShort(i.num);e.data.writeUnsignedByte(i.mask);e.data.writeUnsignedByte(i.code);return true};e.prototype.stringToMask=function(e){if(!e)return 15;var t=0;if(e.indexOf("x")!=-1)t|=1;if(e.indexOf("y")!=-1)t|=2;if(e.indexOf("z")!=-1)t|=4;if(e.indexOf("w")!=-1)t|=8;return t};e.prototype.stringToSwizzle=function(e){if(!e){return 228}var t={x:0,y:1,z:2,w:3};var a=0;if(e.charAt(0)!="."){throw"Missing . for swizzle"}if(e.length>1){a|=t[e.charAt(1)]}if(e.length>2){a|=t[e.charAt(2)]<<2}else{a|=(a&3)<<2}if(e.length>3){a|=t[e.charAt(3)]<<4}else{a|=(a&3<<2)<<2}if(e.length>4){a|=t[e.charAt(4)]<<6}else{a|=(a&3<<4)<<2}return a};e.prototype.emitSampler=function(e,t,a,r){var i=t.match(/fs(\d*)/i);if(!i||!i[1]){return false}e.data.writeUnsignedShort(parseInt(i[1]));e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0);var n=5;var l=0;for(var o=0;o<r.length;o++){var u=s.map[r[o].toLowerCase()];if(u){if((l>>u.shift&u.mask)!=0){console.log("Warning, duplicate sampler option")}l|=u.mask<<u.shift;n&=~(u.mask<<u.shift);n|=u.value<<u.shift}else{console.log("Warning, unknown sampler option: ",r[o])}}e.data.writeUnsignedInt(n);return true};e.prototype.emitSource=function(e,t,a){var r=t.match(/vc\[(v[tcai])(\d+)\.([xyzw])([\+\-]\d+)?\](\.[xyzw]{1,4})?/i);var i;if(r){if(!n.map[r[1]]){return false}var s={x:0,y:1,z:2,w:3};var l={num:r[2]|0,code:n.map[r[1]].code,swizzle:this.stringToSwizzle(r[5]),select:s[r[3]],offset:r[4]|0};e.data.writeUnsignedShort(l.num);e.data.writeByte(l.offset);e.data.writeUnsignedByte(l.swizzle);e.data.writeUnsignedByte(1);e.data.writeUnsignedByte(l.code);e.data.writeUnsignedByte(l.select);e.data.writeUnsignedByte(1<<7)}else{i=t.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i);if(!n.map[i[1]]){return false}var l={num:i[2]|0,code:n.map[i[1]].code,swizzle:this.stringToSwizzle(i[3])};e.data.writeUnsignedShort(l.num);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(l.swizzle);e.data.writeUnsignedByte(l.code);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0)}return true};e.prototype.addHeader=function(e,t){if(!t){t=1}if(this.r[e]==undefined){this.r[e]=new i(e,t);this.emitHeader(this.r[e])}else if(this.r[e].version!=t){throw"Multiple versions for part "+e}this.cur=this.r[e]};return e}();t.exports=l},{"awayjs-stagegl/lib/aglsl/assembler/OpcodeMap":"awayjs-stagegl/lib/aglsl/assembler/OpcodeMap","awayjs-stagegl/lib/aglsl/assembler/Part":"awayjs-stagegl/lib/aglsl/assembler/Part","awayjs-stagegl/lib/aglsl/assembler/RegMap":"awayjs-stagegl/lib/aglsl/assembler/RegMap","awayjs-stagegl/lib/aglsl/assembler/SamplerMap":"awayjs-stagegl/lib/aglsl/assembler/SamplerMap"}],"awayjs-stagegl/lib/aglsl/assembler/FS":[function(e,t,a){var r=function(){function e(){}return e}();t.exports=r},{}],"awayjs-stagegl/lib/aglsl/assembler/Flags":[function(e,t,a){var r=function(){function e(){}return e}();t.exports=r},{}],"awayjs-stagegl/lib/aglsl/assembler/OpcodeMap":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/assembler/Opcode");var i=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["mov"]=new r("vector","vector",4,"none",0,0,true,null,null,null);e._map["add"]=new r("vector","vector",4,"vector",4,1,true,null,null,null);e._map["sub"]=new r("vector","vector",4,"vector",4,2,true,null,null,null);e._map["mul"]=new r("vector","vector",4,"vector",4,3,true,null,null,null);e._map["div"]=new r("vector","vector",4,"vector",4,4,true,null,null,null);e._map["rcp"]=new r("vector","vector",4,"none",0,5,true,null,null,null);e._map["min"]=new r("vector","vector",4,"vector",4,6,true,null,null,null);e._map["max"]=new r("vector","vector",4,"vector",4,7,true,null,null,null);e._map["frc"]=new r("vector","vector",4,"none",0,8,true,null,null,null);e._map["sqt"]=new r("vector","vector",4,"none",0,9,true,null,null,null);e._map["rsq"]=new r("vector","vector",4,"none",0,10,true,null,null,null);e._map["pow"]=new r("vector","vector",4,"vector",4,11,true,null,null,null);e._map["log"]=new r("vector","vector",4,"none",0,12,true,null,null,null);e._map["exp"]=new r("vector","vector",4,"none",0,13,true,null,null,null);e._map["nrm"]=new r("vector","vector",4,"none",0,14,true,null,null,null);e._map["sin"]=new r("vector","vector",4,"none",0,15,true,null,null,null);e._map["cos"]=new r("vector","vector",4,"none",0,16,true,null,null,null);e._map["crs"]=new r("vector","vector",4,"vector",4,17,true,true,null,null);e._map["dp3"]=new r("vector","vector",4,"vector",4,18,true,true,null,null);e._map["dp4"]=new r("vector","vector",4,"vector",4,19,true,true,null,null);e._map["abs"]=new r("vector","vector",4,"none",0,20,true,null,null,null);e._map["neg"]=new r("vector","vector",4,"none",0,21,true,null,null,null);e._map["sat"]=new r("vector","vector",4,"none",0,22,true,null,null,null);e._map["ted"]=new r("vector","vector",4,"sampler",1,38,true,null,true,null);e._map["kil"]=new r("none","scalar",1,"none",0,39,true,null,true,null);e._map["tex"]=new r("vector","vector",4,"sampler",1,40,true,null,true,null);e._map["m33"]=new r("vector","matrix",3,"vector",3,23,true,null,null,true);e._map["m44"]=new r("vector","matrix",4,"vector",4,24,true,null,null,true);e._map["m43"]=new r("vector","matrix",3,"vector",4,25,true,null,null,true);e._map["ddx"]=new r("vector","vector",4,"none",0,26,true,null,true,null);e._map["ddy"]=new r("vector","vector",4,"none",0,27,true,null,true,null);e._map["sge"]=new r("vector","vector",4,"vector",4,41,true,null,null,null);e._map["slt"]=new r("vector","vector",4,"vector",4,42,true,null,null,null);e._map["sgn"]=new r("vector","vector",4,"vector",4,43,true,null,null,null);e._map["seq"]=new r("vector","vector",4,"vector",4,44,true,null,null,null);e._map["sne"]=new r("vector","vector",4,"vector",4,45,true,null,null,null)}return e._map},enumerable:true,configurable:true});return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/assembler/Opcode":"awayjs-stagegl/lib/aglsl/assembler/Opcode"}],"awayjs-stagegl/lib/aglsl/assembler/Opcode":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/assembler/Flags");var i=e("awayjs-stagegl/lib/aglsl/assembler/FS");var n=function(){function e(e,t,a,n,s,l,o,u,c,f){this.a=new i;this.b=new i;this.flags=new r;this.dest=e;this.a.format=t;this.a.size=a;this.b.format=n;this.b.size=s;this.opcode=l;this.flags.simple=o;this.flags.horizontal=u;this.flags.fragonly=c;this.flags.matrix=f}return e}();t.exports=n},{"awayjs-stagegl/lib/aglsl/assembler/FS":"awayjs-stagegl/lib/aglsl/assembler/FS","awayjs-stagegl/lib/aglsl/assembler/Flags":"awayjs-stagegl/lib/aglsl/assembler/Flags"}],"awayjs-stagegl/lib/aglsl/assembler/Part":[function(e,t,a){var r=e("awayjs-core/lib/utils/ByteArray");var i=function(){function e(e,t){if(e===void 0){e=null}if(t===void 0){t=null}this.name="";this.version=0;this.name=e;this.version=t;this.data=new r}return e}();t.exports=i},{"awayjs-core/lib/utils/ByteArray":undefined}],"awayjs-stagegl/lib/aglsl/assembler/RegMap":[function(e,t,a){var r=function(){function e(e,t){this.code=e;this.desc=t}return e}();var i=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["va"]=new r(0,"vertex attribute");e._map["fc"]=new r(1,"fragment constant");e._map["vc"]=new r(1,"vertex constant");e._map["ft"]=new r(2,"fragment temporary");e._map["vt"]=new r(2,"vertex temporary");e._map["vo"]=new r(3,"vertex output");e._map["op"]=new r(3,"vertex output");e._map["fd"]=new r(3,"fragment depth output");e._map["fo"]=new r(3,"fragment output");e._map["oc"]=new r(3,"fragment output");e._map["v"]=new r(4,"varying");e._map["vi"]=new r(4,"varying output");e._map["fi"]=new r(4,"varying input");e._map["fs"]=new r(5,"sampler")}return e._map},enumerable:true,configurable:true});return e}();t.exports=i},{}],"awayjs-stagegl/lib/aglsl/assembler/SamplerMap":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/assembler/Sampler");var i=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["rgba"]=new r(8,15,0);e._map["rg"]=new r(8,15,5);e._map["r"]=new r(8,15,4);e._map["compressed"]=new r(8,15,1);e._map["compressed_alpha"]=new r(8,15,2);e._map["dxt1"]=new r(8,15,1);e._map["dxt5"]=new r(8,15,2);e._map["2d"]=new r(12,15,0);e._map["cube"]=new r(12,15,1);e._map["3d"]=new r(12,15,2);e._map["centroid"]=new r(16,1,1);e._map["ignoresampler"]=new r(16,4,4);e._map["clamp"]=new r(20,15,0);e._map["repeat"]=new r(20,15,1);e._map["wrap"]=new r(20,15,1);e._map["nomip"]=new r(24,15,0);e._map["mipnone"]=new r(24,15,0);e._map["mipnearest"]=new r(24,15,1);e._map["miplinear"]=new r(24,15,2);e._map["nearest"]=new r(28,15,0);e._map["linear"]=new r(28,15,1)}return e._map},enumerable:true,configurable:true});return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/assembler/Sampler":"awayjs-stagegl/lib/aglsl/assembler/Sampler"}],"awayjs-stagegl/lib/aglsl/assembler/Sampler":[function(e,t,a){var r=function(){function e(e,t,a){this.shift=e;this.mask=t;this.value=a}return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLBlendFactor":[function(e,t,a){var r=function(){function e(){}e.DESTINATION_ALPHA="destinationAlpha";e.DESTINATION_COLOR="destinationColor";e.ONE="one";e.ONE_MINUS_DESTINATION_ALPHA="oneMinusDestinationAlpha";e.ONE_MINUS_DESTINATION_COLOR="oneMinusDestinationColor";e.ONE_MINUS_SOURCE_ALPHA="oneMinusSourceAlpha";e.ONE_MINUS_SOURCE_COLOR="oneMinusSourceColor";e.SOURCE_ALPHA="sourceAlpha";e.SOURCE_COLOR="sourceColor";e.ZERO="zero";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLClearMask":[function(e,t,a){var r=function(){function e(){}e.COLOR=1;e.DEPTH=2;e.STENCIL=4;e.ALL=e.COLOR|e.DEPTH|e.STENCIL;return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLCompareMode":[function(e,t,a){var r=function(){function e(){}e.ALWAYS="always";e.EQUAL="equal";e.GREATER="greater";e.GREATER_EQUAL="greaterEqual";e.LESS="less";e.LESS_EQUAL="lessEqual";e.NEVER="never";e.NOT_EQUAL="notEqual";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLMipFilter":[function(e,t,a){var r=function(){function e(){}e.MIPLINEAR="miplinear";e.MIPNEAREST="mipnearest";e.MIPNONE="mipnone";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLProfile":[function(e,t,a){var r=function(){function e(){}e.BASELINE="baseline";e.BASELINE_CONSTRAINED="baselineConstrained";e.BASELINE_EXTENDED="baselineExtended";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLProgramType":[function(e,t,a){var r=function(){function e(){}e.FRAGMENT="fragment";e.VERTEX="vertex";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLStencilAction":[function(e,t,a){var r=function(){function e(){}e.DECREMENT_SATURATE="decrementSaturate";e.DECREMENT_WRAP="decrementWrap";e.INCREMENT_SATURATE="incrementSaturate";e.INCREMENT_WRAP="incrementWrap";e.INVERT="invert";e.KEEP="keep";e.SET="set";e.ZERO="zero";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLTextureFilter":[function(e,t,a){var r=function(){function e(){}e.LINEAR="linear";e.NEAREST="nearest";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLTextureFormat":[function(e,t,a){var r=function(){function e(){}e.BGRA="bgra";e.BGRA_PACKED="bgraPacked4444";e.BGR_PACKED="bgrPacked565";e.COMPRESSED="compressed";e.COMPRESSED_ALPHA="compressedAlpha";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLTriangleFace":[function(e,t,a){var r=function(){function e(){}e.BACK="back";e.FRONT="front";e.FRONT_AND_BACK="frontAndBack";e.NONE="none";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":[function(e,t,a){var r=function(){function e(){}e.BYTES_4="bytes4";e.FLOAT_1="float1";e.FLOAT_2="float2";e.FLOAT_3="float3";e.FLOAT_4="float4";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextGLWrapMode":[function(e,t,a){var r=function(){function e(){}e.CLAMP="clamp";e.REPEAT="repeat";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextMode":[function(e,t,a){var r=function(){function e(){}e.AUTO="auto";e.WEBGL="webgl";e.FLASH="flash";e.NATIVE="native";return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ContextStage3D":[function(e,t,a){var r=e("awayjs-stagegl/lib/swfobject");var i=e("awayjs-stagegl/lib/aglsl/Sampler");var n=e("awayjs-stagegl/lib/base/ContextGLClearMask");var s=e("awayjs-stagegl/lib/base/ContextGLProgramType");var l=e("awayjs-stagegl/lib/base/CubeTextureFlash");var o=e("awayjs-stagegl/lib/base/IndexBufferFlash");var u=e("awayjs-stagegl/lib/base/OpCodes");var c=e("awayjs-stagegl/lib/base/ProgramFlash");var f=e("awayjs-stagegl/lib/base/TextureFlash");var g=e("awayjs-stagegl/lib/base/VertexBufferFlash");var h=function(){function e(t,a,i){this._cmdStream="";this._resources=new Array;var n="11.0.0";var s={id:t.id};var l={quality:"high",bgcolor:"#ffffff",allowscriptaccess:"sameDomain",allowfullscreen:"true",wmode:"direct"};this._errorCheckingEnabled=false;this._iDriverInfo="Unknown";var o={salign:"tl",id:t.id,name:t["name"]};this._oldCanvas=t.cloneNode();this._oldParent=t.parentNode;var u=this;e.contexts[t.id]=this;function c(e){if(!e.success)return;u._container=e.ref;u._iCallback=a}r.embedSWF("libs/molehill_js_flashbridge.swf",t.id,String(t.width),String(t.height),n,"",s,l,o,c)}Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"driverInfo",{get:function(){return this._iDriverInfo},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"errorCheckingEnabled",{get:function(){return this._errorCheckingEnabled},set:function(e){if(this._errorCheckingEnabled==e)return;this._errorCheckingEnabled=e;this.addStream(String.fromCharCode(u.enableErrorChecking,e?u.trueValue:u.falseValue));this.execute()},enumerable:true,configurable:true});e.prototype._iAddResource=function(e){this._resources.push(e)};e.prototype._iRemoveResource=function(e){this._resources.splice(this._resources.indexOf(e))};e.prototype.createTexture=function(e,t,a,r,i){if(i===void 0){i=0}return new f(this,e,t,a,r)};e.prototype.createCubeTexture=function(e,t,a,r){if(r===void 0){r=0}return new l(this,e,t,a)};e.prototype.setTextureAt=function(t,a){if(a){this.addStream(String.fromCharCode(u.setTextureAt)+t+","+a.id+",")}else{this.addStream(String.fromCharCode(u.clearTextureAt)+t.toString()+",")}if(e.debug)this.execute()};e.prototype.setSamplerStateAt=function(e,t,a,r){};e.prototype.setStencilActions=function(t,a,r,i,n,s){if(t===void 0){t="frontAndBack"}if(a===void 0){a="always"}if(r===void 0){r="keep"}if(i===void 0){i="keep"}if(n===void 0){n="keep"}if(s===void 0){s="leftHanded"}this.addStream(String.fromCharCode(u.setStencilActions)+t+"$"+a+"$"+r+"$"+i+"$"+n+"$");if(e.debug)this.execute()};e.prototype.setStencilReferenceValue=function(t,a,r){if(a===void 0){a=255}if(r===void 0){r=255}this.addStream(String.fromCharCode(u.setStencilReferenceValue,t+u.intMask,a+u.intMask,r+u.intMask));if(e.debug)this.execute()};e.prototype.setCulling=function(t,a){if(a===void 0){a="leftHanded"}this.addStream(String.fromCharCode(u.setCulling)+t+"$");if(e.debug)this.execute()};e.prototype.drawTriangles=function(t,a,r){if(a===void 0){a=0}if(r===void 0){r=-1}a=a||0;if(!r||r<0)r=t.numIndices/3;this.addStream(String.fromCharCode(u.drawTriangles,t.id+u.intMask)+a+","+r+",");if(e.debug)this.execute()};e.prototype.setProgramConstantsFromMatrix=function(e,t,a,r){if(r===void 0){r=false}var i=a.rawData;if(r){this.setProgramConstantsFromArray(e,t,[i[0],i[4],i[8],i[12]],1);this.setProgramConstantsFromArray(e,t+1,[i[1],i[5],i[9],i[13]],1);this.setProgramConstantsFromArray(e,t+2,[i[2],i[6],i[10],i[14]],1);this.setProgramConstantsFromArray(e,t+3,[i[3],i[7],i[11],i[15]],1)}else{this.setProgramConstantsFromArray(e,t,[i[0],i[1],i[2],i[3]],1);this.setProgramConstantsFromArray(e,t+1,[i[4],i[5],i[6],i[7]],1);this.setProgramConstantsFromArray(e,t+2,[i[8],i[9],i[10],i[11]],1);this.setProgramConstantsFromArray(e,t+3,[i[12],i[13],i[14],i[15]],1)}};e.prototype.setProgramConstantsFromArray=function(t,a,r,i){if(i===void 0){i=-1}var n;var l=t==s.VERTEX?u.trueValue:u.falseValue;for(var o=0;o<i;o++){n=o*4;this.addStream(String.fromCharCode(u.setProgramConstant,l,a+o+u.intMask)+r[n]+","+r[n+1]+","+r[n+2]+","+r[n+3]+",");if(e.debug)this.execute()}};e.prototype.setProgram=function(t){this.addStream(String.fromCharCode(u.setProgram,t.id+u.intMask));if(e.debug)this.execute()};e.prototype.present=function(){this.addStream(String.fromCharCode(u.present));this.execute()};e.prototype.clear=function(t,a,r,i,s,l,o){if(t===void 0){t=0}if(a===void 0){a=0}if(r===void 0){r=0}if(i===void 0){i=1}if(s===void 0){s=1}if(l===void 0){l=0}if(o===void 0){o=n.ALL}this.addStream(String.fromCharCode(u.clear)+t+","+a+","+r+","+i+","+s+","+l+","+o+",");if(e.debug)this.execute()
};e.prototype.createProgram=function(){return new c(this)};e.prototype.createVertexBuffer=function(e,t){return new g(this,e,t)};e.prototype.createIndexBuffer=function(e){return new o(this,e)};e.prototype.configureBackBuffer=function(e,t,a,r){if(r===void 0){r=true}this._width=e;this._height=t;this.addStream(String.fromCharCode(u.configureBackBuffer)+e+","+t+",")};e.prototype.drawToBitmapData=function(e){};e.prototype.setVertexBufferAt=function(t,a,r,i){if(r===void 0){r=0}if(i===void 0){i=null}if(a){this.addStream(String.fromCharCode(u.setVertexBufferAt,t+u.intMask)+a.id+","+r+","+i+"$")}else{this.addStream(String.fromCharCode(u.clearVertexBufferAt,t+u.intMask))}if(e.debug)this.execute()};e.prototype.setColorMask=function(t,a,r,i){this.addStream(String.fromCharCode(u.setColorMask,t?u.trueValue:u.falseValue,a?u.trueValue:u.falseValue,r?u.trueValue:u.falseValue,i?u.trueValue:u.falseValue));if(e.debug)this.execute()};e.prototype.setBlendFactors=function(t,a){this.addStream(String.fromCharCode(u.setBlendFactors)+t+"$"+a+"$");if(e.debug)this.execute()};e.prototype.setRenderToTexture=function(t,a,r,i){if(a===void 0){a=false}if(r===void 0){r=0}if(i===void 0){i=0}if(t===null||t===undefined){this.addStream(String.fromCharCode(u.clearRenderToTexture))}else{this.addStream(String.fromCharCode(u.setRenderToTexture,a?u.trueValue:u.falseValue)+t.id+","+(r||0)+",")}if(e.debug)this.execute()};e.prototype.setRenderToBackBuffer=function(){this.addStream(String.fromCharCode(u.clearRenderToTexture));if(e.debug)this.execute()};e.prototype.setScissorRectangle=function(t){if(t){this.addStream(String.fromCharCode(u.setScissorRect)+t.x+","+t.y+","+t.width+","+t.height+",")}else{this.addStream(String.fromCharCode(u.clearScissorRect))}if(e.debug)this.execute()};e.prototype.setDepthTest=function(t,a){this.addStream(String.fromCharCode(u.setDepthTest,t?u.trueValue:u.falseValue)+a+"$");if(e.debug)this.execute()};e.prototype.dispose=function(){if(this._container==null)return;console.log("Context3D dispose, releasing "+this._resources.length+" resources.");while(this._resources.length)this._resources[0].dispose();if(this._container){this.addStream(String.fromCharCode(u.disposeContext));this.execute();r.removeSWF(this._oldCanvas.id);if(this._oldCanvas&&this._oldParent){this._oldParent.appendChild(this._oldCanvas);this._oldParent=null}this._container=null}this._oldCanvas=null};e.prototype.addStream=function(e){this._cmdStream+=e};e.prototype.execute=function(){if(e.logStream)console.log(this._cmdStream);var t=this._container["CallFunction"]('<invoke name="execStage3dOpStream" returntype="javascript"><arguments><string>'+this._cmdStream+"</string></arguments></invoke>");if(Number(t)<=-3)throw"Exec stream failed";this._cmdStream="";return Number(t)};e.contexts=new Object;e.maxvertexconstants=128;e.maxfragconstants=28;e.maxtemp=8;e.maxstreams=8;e.maxtextures=8;e.defaultsampler=new i;e.debug=false;e.logStream=false;return e}();function d(e,t){var a=h.contexts[e];if(a._iCallback){a._iDriverInfo=t;var r=window.setTimeout(function(){window.clearTimeout(r);try{a._iCallback(a)}catch(e){console.log("Callback failed during flash initialization with '"+e.toString()+"'")}},1)}}t.exports=h},{"awayjs-stagegl/lib/aglsl/Sampler":"awayjs-stagegl/lib/aglsl/Sampler","awayjs-stagegl/lib/base/ContextGLClearMask":"awayjs-stagegl/lib/base/ContextGLClearMask","awayjs-stagegl/lib/base/ContextGLProgramType":"awayjs-stagegl/lib/base/ContextGLProgramType","awayjs-stagegl/lib/base/CubeTextureFlash":"awayjs-stagegl/lib/base/CubeTextureFlash","awayjs-stagegl/lib/base/IndexBufferFlash":"awayjs-stagegl/lib/base/IndexBufferFlash","awayjs-stagegl/lib/base/OpCodes":"awayjs-stagegl/lib/base/OpCodes","awayjs-stagegl/lib/base/ProgramFlash":"awayjs-stagegl/lib/base/ProgramFlash","awayjs-stagegl/lib/base/TextureFlash":"awayjs-stagegl/lib/base/TextureFlash","awayjs-stagegl/lib/base/VertexBufferFlash":"awayjs-stagegl/lib/base/VertexBufferFlash","awayjs-stagegl/lib/swfobject":"awayjs-stagegl/lib/swfobject"}],"awayjs-stagegl/lib/base/ContextWebGL":[function(e,t,a){var r=e("awayjs-core/lib/geom/Rectangle");var i=e("awayjs-core/lib/utils/ByteArray");var n=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var s=e("awayjs-stagegl/lib/base/ContextGLClearMask");var l=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var o=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var u=e("awayjs-stagegl/lib/base/ContextGLProgramType");var c=e("awayjs-stagegl/lib/base/ContextGLStencilAction");var f=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var g=e("awayjs-stagegl/lib/base/ContextGLTriangleFace");var h=e("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat");var d=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var p=e("awayjs-stagegl/lib/base/CubeTextureWebGL");var _=e("awayjs-stagegl/lib/base/IndexBufferWebGL");var b=e("awayjs-stagegl/lib/base/ProgramWebGL");var y=e("awayjs-stagegl/lib/base/TextureWebGL");var m=e("awayjs-stagegl/lib/base/SamplerState");var v=e("awayjs-stagegl/lib/base/VertexBufferWebGL");var w=function(){function e(t){this._blendFactorDictionary=new Object;this._compareModeDictionary=new Object;this._stencilActionDictionary=new Object;this._textureIndexDictionary=new Array(8);this._textureTypeDictionary=new Object;this._wrapDictionary=new Object;this._filterDictionary=new Object;this._mipmapFilterDictionary=new Object;this._uniformLocationNameDictionary=new Object;this._vertexBufferDimensionDictionary=new Object;this._indexBufferList=new Array;this._vertexBufferList=new Array;this._textureList=new Array;this._programList=new Array;this._samplerStates=new Array(8);this._stencilReferenceValue=0;this._stencilReadMask=255;this._separateStencil=false;this._container=t;try{this._gl=t.getContext("experimental-webgl",{premultipliedAlpha:false,alpha:false,stencil:true});if(!this._gl)this._gl=t.getContext("webgl",{premultipliedAlpha:false,alpha:false,stencil:true})}catch(a){}if(this._gl){if(this._gl.getExtension("OES_standard_derivatives")){this._standardDerivatives=true}else{this._standardDerivatives=false}this._blendFactorDictionary[n.ONE]=this._gl.ONE;this._blendFactorDictionary[n.DESTINATION_ALPHA]=this._gl.DST_ALPHA;this._blendFactorDictionary[n.DESTINATION_COLOR]=this._gl.DST_COLOR;this._blendFactorDictionary[n.ONE]=this._gl.ONE;this._blendFactorDictionary[n.ONE_MINUS_DESTINATION_ALPHA]=this._gl.ONE_MINUS_DST_ALPHA;this._blendFactorDictionary[n.ONE_MINUS_DESTINATION_COLOR]=this._gl.ONE_MINUS_DST_COLOR;this._blendFactorDictionary[n.ONE_MINUS_SOURCE_ALPHA]=this._gl.ONE_MINUS_SRC_ALPHA;this._blendFactorDictionary[n.ONE_MINUS_SOURCE_COLOR]=this._gl.ONE_MINUS_SRC_COLOR;this._blendFactorDictionary[n.SOURCE_ALPHA]=this._gl.SRC_ALPHA;this._blendFactorDictionary[n.SOURCE_COLOR]=this._gl.SRC_COLOR;this._blendFactorDictionary[n.ZERO]=this._gl.ZERO;this._compareModeDictionary[l.ALWAYS]=this._gl.ALWAYS;this._compareModeDictionary[l.EQUAL]=this._gl.EQUAL;this._compareModeDictionary[l.GREATER]=this._gl.GREATER;this._compareModeDictionary[l.GREATER_EQUAL]=this._gl.GEQUAL;this._compareModeDictionary[l.LESS]=this._gl.LESS;this._compareModeDictionary[l.LESS_EQUAL]=this._gl.LEQUAL;this._compareModeDictionary[l.NEVER]=this._gl.NEVER;this._compareModeDictionary[l.NOT_EQUAL]=this._gl.NOTEQUAL;this._stencilActionDictionary[c.DECREMENT_SATURATE]=this._gl.DECR;this._stencilActionDictionary[c.DECREMENT_WRAP]=this._gl.DECR_WRAP;this._stencilActionDictionary[c.INCREMENT_SATURATE]=this._gl.INCR;this._stencilActionDictionary[c.INCREMENT_WRAP]=this._gl.INCR_WRAP;this._stencilActionDictionary[c.INVERT]=this._gl.INVERT;this._stencilActionDictionary[c.KEEP]=this._gl.KEEP;this._stencilActionDictionary[c.SET]=this._gl.REPLACE;this._stencilActionDictionary[c.ZERO]=this._gl.ZERO;this._textureIndexDictionary[0]=this._gl.TEXTURE0;this._textureIndexDictionary[1]=this._gl.TEXTURE1;this._textureIndexDictionary[2]=this._gl.TEXTURE2;this._textureIndexDictionary[3]=this._gl.TEXTURE3;this._textureIndexDictionary[4]=this._gl.TEXTURE4;this._textureIndexDictionary[5]=this._gl.TEXTURE5;this._textureIndexDictionary[6]=this._gl.TEXTURE6;this._textureIndexDictionary[7]=this._gl.TEXTURE7;this._textureTypeDictionary["texture2d"]=this._gl.TEXTURE_2D;this._textureTypeDictionary["textureCube"]=this._gl.TEXTURE_CUBE_MAP;this._wrapDictionary[d.REPEAT]=this._gl.REPEAT;this._wrapDictionary[d.CLAMP]=this._gl.CLAMP_TO_EDGE;this._filterDictionary[f.LINEAR]=this._gl.LINEAR;this._filterDictionary[f.NEAREST]=this._gl.NEAREST;this._mipmapFilterDictionary[f.LINEAR]=new Object;this._mipmapFilterDictionary[f.LINEAR][o.MIPNEAREST]=this._gl.LINEAR_MIPMAP_NEAREST;this._mipmapFilterDictionary[f.LINEAR][o.MIPLINEAR]=this._gl.LINEAR_MIPMAP_LINEAR;this._mipmapFilterDictionary[f.LINEAR][o.MIPNONE]=this._gl.LINEAR;this._mipmapFilterDictionary[f.NEAREST]=new Object;this._mipmapFilterDictionary[f.NEAREST][o.MIPNEAREST]=this._gl.NEAREST_MIPMAP_NEAREST;this._mipmapFilterDictionary[f.NEAREST][o.MIPLINEAR]=this._gl.NEAREST_MIPMAP_LINEAR;this._mipmapFilterDictionary[f.NEAREST][o.MIPNONE]=this._gl.NEAREST;this._uniformLocationNameDictionary[u.VERTEX]="vc";this._uniformLocationNameDictionary[u.FRAGMENT]="fc";this._vertexBufferDimensionDictionary[h.FLOAT_1]=1;this._vertexBufferDimensionDictionary[h.FLOAT_2]=2;this._vertexBufferDimensionDictionary[h.FLOAT_3]=3;this._vertexBufferDimensionDictionary[h.FLOAT_4]=4;this._vertexBufferDimensionDictionary[h.BYTES_4]=4;this._stencilCompareMode=this._gl.ALWAYS;this._stencilCompareModeBack=this._gl.ALWAYS;this._stencilCompareModeFront=this._gl.ALWAYS}else{alert("WebGL is not available.")}for(var r=0;r<e.MAX_SAMPLERS;++r){this._samplerStates[r]=new m;this._samplerStates[r].wrap=this._gl.REPEAT;this._samplerStates[r].filter=this._gl.LINEAR;this._samplerStates[r].mipfilter=this._gl.LINEAR}}Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"standardDerivatives",{get:function(){return this._standardDerivatives},enumerable:true,configurable:true});e.prototype.gl=function(){return this._gl};e.prototype.clear=function(e,t,a,r,i,n,l){if(e===void 0){e=0}if(t===void 0){t=0}if(a===void 0){a=0}if(r===void 0){r=1}if(i===void 0){i=1}if(n===void 0){n=0}if(l===void 0){l=s.ALL}if(!this._drawing){this.updateBlendStatus();this._drawing=true}var o=0;if(l&s.COLOR)o|=this._gl.COLOR_BUFFER_BIT;if(l&s.STENCIL)o|=this._gl.STENCIL_BUFFER_BIT;if(l&s.DEPTH)o|=this._gl.DEPTH_BUFFER_BIT;this._gl.clearColor(e,t,a,r);this._gl.clearDepth(i);this._gl.clearStencil(n);this._gl.clear(o)};e.prototype.configureBackBuffer=function(e,t,a,r){if(r===void 0){r=true}this._width=e;this._height=t;if(r){this._gl.enable(this._gl.STENCIL_TEST);this._gl.enable(this._gl.DEPTH_TEST)}this._gl.viewport["width"]=e;this._gl.viewport["height"]=t;this._gl.viewport(0,0,e,t)};e.prototype.createCubeTexture=function(e,t,a,r){if(r===void 0){r=0}var i=new p(this._gl,e);this._textureList.push(i);return i};e.prototype.createIndexBuffer=function(e){var t=new _(this._gl,e);this._indexBufferList.push(t);return t};e.prototype.createProgram=function(){var e=new b(this._gl);this._programList.push(e);return e};e.prototype.createTexture=function(e,t,a,r,i){if(i===void 0){i=0}var n=new y(this._gl,e,t);this._textureList.push(n);return n};e.prototype.createVertexBuffer=function(e,t){var a=new v(this._gl,e,t);this._vertexBufferList.push(a);return a};e.prototype.dispose=function(){var e;for(e=0;e<this._indexBufferList.length;++e)this._indexBufferList[e].dispose();this._indexBufferList=null;for(e=0;e<this._vertexBufferList.length;++e)this._vertexBufferList[e].dispose();this._vertexBufferList=null;for(e=0;e<this._textureList.length;++e)this._textureList[e].dispose();this._textureList=null;for(e=0;e<this._programList.length;++e)this._programList[e].dispose();for(e=0;e<this._samplerStates.length;++e)this._samplerStates[e]=null;this._programList=null};e.prototype.drawToBitmapData=function(e){var t=new ArrayBuffer(e.width*e.height*4);this._gl.readPixels(0,0,e.width,e.height,this._gl.RGBA,this._gl.UNSIGNED_BYTE,new Uint8Array(t));var a=new i;a.setArrayBuffer(t);e.setPixels(new r(0,0,e.width,e.height),a)};e.prototype.drawTriangles=function(e,t,a){if(t===void 0){t=0}if(a===void 0){a=-1}if(!this._drawing)throw"Need to clear before drawing if the buffer has not been cleared since the last present() call.";this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,e.glBuffer);this._gl.drawElements(this._gl.TRIANGLES,a==-1?e.numIndices:a*3,this._gl.UNSIGNED_SHORT,t)};e.prototype.present=function(){this._drawing=false};e.prototype.setBlendFactors=function(e,t){this._blendEnabled=true;this._blendSourceFactor=this._blendFactorDictionary[e];this._blendDestinationFactor=this._blendFactorDictionary[t];this.updateBlendStatus()};e.prototype.setColorMask=function(e,t,a,r){this._gl.colorMask(e,t,a,r)};e.prototype.setCulling=function(e,t){if(t===void 0){t="leftHanded"}if(e==g.NONE){this._gl.disable(this._gl.CULL_FACE)}else{this._gl.enable(this._gl.CULL_FACE);this._gl.cullFace(this.translateTriangleFace(e,t))}};e.prototype.setDepthTest=function(e,t){this._gl.depthFunc(this._compareModeDictionary[t]);this._gl.depthMask(e)};e.prototype.setStencilActions=function(e,t,a,r,i,n){if(e===void 0){e="frontAndBack"}if(t===void 0){t="always"}if(a===void 0){a="keep"}if(r===void 0){r="keep"}if(i===void 0){i="keep"}if(n===void 0){n="leftHanded"}this._separateStencil=e!="frontAndBack";var s=this._compareModeDictionary[t];var l=this._stencilActionDictionary[i];var o=this._stencilActionDictionary[r];var u=this._stencilActionDictionary[a];if(!this._separateStencil){this._stencilCompareMode=s;this._gl.stencilFunc(s,this._stencilReferenceValue,this._stencilReadMask);this._gl.stencilOp(l,o,u)}else if(e=="back"){this._stencilCompareModeBack=s;this._gl.stencilFuncSeparate(this._gl.BACK,s,this._stencilReferenceValue,this._stencilReadMask);this._gl.stencilOpSeparate(this._gl.BACK,l,o,u)}else if(e=="front"){this._stencilCompareModeFront=s;this._gl.stencilFuncSeparate(this._gl.FRONT,s,this._stencilReferenceValue,this._stencilReadMask);this._gl.stencilOpSeparate(this._gl.FRONT,l,o,u)}};e.prototype.setStencilReferenceValue=function(e,t,a){this._stencilReferenceValue=e;this._stencilReadMask=t;if(this._separateStencil){this._gl.stencilFuncSeparate(this._gl.FRONT,this._stencilCompareModeFront,e,t);this._gl.stencilFuncSeparate(this._gl.BACK,this._stencilCompareModeBack,e,t)}else{this._gl.stencilFunc(this._stencilCompareMode,e,t)}this._gl.stencilMask(a)};e.prototype.setProgram=function(e){this._currentProgram=e;e.focusProgram()};e.prototype.setProgramConstantsFromMatrix=function(e,t,a,r){if(r===void 0){r=false}var i=a.rawData;if(r){this.setProgramConstantsFromArray(e,t,[i[0],i[4],i[8],i[12]],1);this.setProgramConstantsFromArray(e,t+1,[i[1],i[5],i[9],i[13]],1);this.setProgramConstantsFromArray(e,t+2,[i[2],i[6],i[10],i[14]],1);this.setProgramConstantsFromArray(e,t+3,[i[3],i[7],i[11],i[15]],1)}else{this.setProgramConstantsFromArray(e,t,[i[0],i[1],i[2],i[3]],1);this.setProgramConstantsFromArray(e,t+1,[i[4],i[5],i[6],i[7]],1);this.setProgramConstantsFromArray(e,t+2,[i[8],i[9],i[10],i[11]],1);this.setProgramConstantsFromArray(e,t+3,[i[12],i[13],i[14],i[15]],1)}};e.prototype.setProgramConstantsFromArray=function(e,t,a,r){if(r===void 0){r=-1}var i=this._uniformLocationNameDictionary[e];var n;for(var s=0;s<r;s++){n=s*4;this._gl.uniform4f(this._gl.getUniformLocation(this._currentProgram.glProgram,i+(t+s)),a[n],a[n+1],a[n+2],a[n+3])}};e.prototype.setScissorRectangle=function(e){if(!e){this._gl.disable(this._gl.SCISSOR_TEST);return}this._gl.enable(this._gl.SCISSOR_TEST);this._gl.scissor(e.x,e.y,e.width,e.height)};e.prototype.setTextureAt=function(e,t){var a=this._samplerStates[e];if(this._activeTexture!=e&&(t||a.type)){this._activeTexture=e;this._gl.activeTexture(this._textureIndexDictionary[e])}if(!t){if(a.type){this._gl.bindTexture(a.type,null);a.type=null}return}var r=this._textureTypeDictionary[t.textureType];a.type=r;this._gl.bindTexture(r,t.glTexture);this._gl.uniform1i(this._gl.getUniformLocation(this._currentProgram.glProgram,"fs"+e),e);this._gl.texParameteri(r,this._gl.TEXTURE_WRAP_S,a.wrap);this._gl.texParameteri(r,this._gl.TEXTURE_WRAP_T,a.wrap);this._gl.texParameteri(r,this._gl.TEXTURE_MAG_FILTER,a.filter);this._gl.texParameteri(r,this._gl.TEXTURE_MIN_FILTER,a.mipfilter)};e.prototype.setSamplerStateAt=function(t,a,r,i){if(0<=t&&t<e.MAX_SAMPLERS){this._samplerStates[t].wrap=this._wrapDictionary[a];this._samplerStates[t].filter=this._filterDictionary[r];this._samplerStates[t].mipfilter=this._mipmapFilterDictionary[r][i]}else{throw"Sampler is out of bounds."}};e.prototype.setVertexBufferAt=function(e,t,a,r){if(a===void 0){a=0}if(r===void 0){r=null}var i=this._currentProgram?this._gl.getAttribLocation(this._currentProgram.glProgram,"va"+e):-1;if(!t){if(i>-1)this._gl.disableVertexAttribArray(i);return}this._gl.bindBuffer(this._gl.ARRAY_BUFFER,t.glBuffer);this._gl.enableVertexAttribArray(i);this._gl.vertexAttribPointer(i,this._vertexBufferDimensionDictionary[r],this._gl.FLOAT,false,t.data32PerVertex*4,a*4)};e.prototype.setRenderToTexture=function(e,t,a,r){if(t===void 0){t=false}if(a===void 0){a=0}if(r===void 0){r=0}var i=e;var n=i.frameBuffer;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,n);if(t){this._gl.enable(this._gl.STENCIL_TEST);this._gl.enable(this._gl.DEPTH_TEST)}this._gl.viewport(0,0,i.width,i.height)};e.prototype.setRenderToBackBuffer=function(){this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)};e.prototype.updateBlendStatus=function(){if(this._blendEnabled){this._gl.enable(this._gl.BLEND);this._gl.blendEquation(this._gl.FUNC_ADD);this._gl.blendFunc(this._blendSourceFactor,this._blendDestinationFactor)}else{this._gl.disable(this._gl.BLEND)}};e.prototype.translateTriangleFace=function(e,t){switch(e){case g.BACK:return t=="leftHanded"?this._gl.FRONT:this._gl.BACK;break;case g.FRONT:return t=="leftHanded"?this._gl.BACK:this._gl.FRONT;break;case g.FRONT_AND_BACK:return this._gl.FRONT_AND_BACK;break;default:throw"Unknown ContextGLTriangleFace type."}};e.MAX_SAMPLERS=8;e.modulo=0;return e}();t.exports=w},{"awayjs-core/lib/geom/Rectangle":undefined,"awayjs-core/lib/utils/ByteArray":undefined,"awayjs-stagegl/lib/base/ContextGLBlendFactor":"awayjs-stagegl/lib/base/ContextGLBlendFactor","awayjs-stagegl/lib/base/ContextGLClearMask":"awayjs-stagegl/lib/base/ContextGLClearMask","awayjs-stagegl/lib/base/ContextGLCompareMode":"awayjs-stagegl/lib/base/ContextGLCompareMode","awayjs-stagegl/lib/base/ContextGLMipFilter":"awayjs-stagegl/lib/base/ContextGLMipFilter","awayjs-stagegl/lib/base/ContextGLProgramType":"awayjs-stagegl/lib/base/ContextGLProgramType","awayjs-stagegl/lib/base/ContextGLStencilAction":"awayjs-stagegl/lib/base/ContextGLStencilAction","awayjs-stagegl/lib/base/ContextGLTextureFilter":"awayjs-stagegl/lib/base/ContextGLTextureFilter","awayjs-stagegl/lib/base/ContextGLTriangleFace":"awayjs-stagegl/lib/base/ContextGLTriangleFace","awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat","awayjs-stagegl/lib/base/ContextGLWrapMode":"awayjs-stagegl/lib/base/ContextGLWrapMode","awayjs-stagegl/lib/base/CubeTextureWebGL":"awayjs-stagegl/lib/base/CubeTextureWebGL","awayjs-stagegl/lib/base/IndexBufferWebGL":"awayjs-stagegl/lib/base/IndexBufferWebGL","awayjs-stagegl/lib/base/ProgramWebGL":"awayjs-stagegl/lib/base/ProgramWebGL","awayjs-stagegl/lib/base/SamplerState":"awayjs-stagegl/lib/base/SamplerState","awayjs-stagegl/lib/base/TextureWebGL":"awayjs-stagegl/lib/base/TextureWebGL","awayjs-stagegl/lib/base/VertexBufferWebGL":"awayjs-stagegl/lib/base/VertexBufferWebGL"}],"awayjs-stagegl/lib/base/CubeTextureFlash":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-core/lib/data/BitmapData");var n=e("awayjs-core/lib/utils/ByteArrayBase");var s=e("awayjs-stagegl/lib/base/OpCodes");var l=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var o=function(e){r(t,e);function t(t,a,r,i,n){if(n===void 0){n=false}e.call(this);this._context=t;this._size=a;this._context.addStream(String.fromCharCode(s.initCubeTexture,i?s.trueValue:s.falseValue)+a+","+n+","+r+"$");this._pId=this._context.execute();this._context._iAddResource(this)}Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(s.disposeCubeTexture)+this._pId.toString()+",");this._context.execute();this._context._iRemoveResource(this);this._context=null};t.prototype.uploadFromData=function(e,t,a){if(a===void 0){a=0}if(e instanceof i){e=e.imageData.data}else if(e instanceof HTMLImageElement){var r=document.createElement("canvas");var l=e.width;var o=e.height;r.width=l;r.height=o;var u=r.getContext("2d");u.drawImage(e,0,0);e=u.getImageData(0,0,l,o).data}var c=0;var f=n.internalGetBase64String(e.length,function(){return e[c++]},null);this._context.addStream(String.fromCharCode(s.uploadBytesCubeTexture)+this._pId+","+a+","+t+","+(this.size>>a)+","+f+"%");this._context.execute()};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,a){if(a===void 0){a=false}};return t}(l);t.exports=o},{"awayjs-core/lib/data/BitmapData":undefined,"awayjs-core/lib/utils/ByteArrayBase":undefined,"awayjs-stagegl/lib/base/OpCodes":"awayjs-stagegl/lib/base/OpCodes","awayjs-stagegl/lib/base/ResourceBaseFlash":"awayjs-stagegl/lib/base/ResourceBaseFlash"}],"awayjs-stagegl/lib/base/CubeTextureWebGL":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-core/lib/data/BitmapData");var n=e("awayjs-stagegl/lib/base/TextureBaseWebGL");var s=function(e){r(t,e);function t(t,a){e.call(this,t);this._textureSelectorDictionary=new Array(6);this.textureType="textureCube";this._size=a;this._texture=this._gl.createTexture();this._textureSelectorDictionary[0]=t.TEXTURE_CUBE_MAP_POSITIVE_X;this._textureSelectorDictionary[1]=t.TEXTURE_CUBE_MAP_NEGATIVE_X;this._textureSelectorDictionary[2]=t.TEXTURE_CUBE_MAP_POSITIVE_Y;this._textureSelectorDictionary[3]=t.TEXTURE_CUBE_MAP_NEGATIVE_Y;this._textureSelectorDictionary[4]=t.TEXTURE_CUBE_MAP_POSITIVE_Z;this._textureSelectorDictionary[5]=t.TEXTURE_CUBE_MAP_NEGATIVE_Z}t.prototype.dispose=function(){this._gl.deleteTexture(this._texture)};t.prototype.uploadFromData=function(e,t,a){if(a===void 0){a=0}if(e instanceof i)e=e.imageData;this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,this._texture);this._gl.texImage2D(this._textureSelectorDictionary[t],a,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e);this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,null)};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,a){if(a===void 0){a=false}};Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"glTexture",{get:function(){return this._texture},enumerable:true,configurable:true});return t}(n);t.exports=s},{"awayjs-core/lib/data/BitmapData":undefined,"awayjs-stagegl/lib/base/TextureBaseWebGL":"awayjs-stagegl/lib/base/TextureBaseWebGL"}],"awayjs-stagegl/lib/base/IContextGL":[function(e,t,a){},{}],"awayjs-stagegl/lib/base/ICubeTexture":[function(e,t,a){},{}],"awayjs-stagegl/lib/base/IIndexBuffer":[function(e,t,a){},{}],"awayjs-stagegl/lib/base/IProgram":[function(e,t,a){},{}],"awayjs-stagegl/lib/base/ITextureBase":[function(e,t,a){},{}],"awayjs-stagegl/lib/base/ITexture":[function(e,t,a){},{}],"awayjs-stagegl/lib/base/IVertexBuffer":[function(e,t,a){},{}],"awayjs-stagegl/lib/base/IndexBufferFlash":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-stagegl/lib/base/OpCodes");var n=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var s=function(e){r(t,e);function t(t,a){e.call(this);this._context=t;this._numIndices=a;this._context.addStream(String.fromCharCode(i.initIndexBuffer,a+i.intMask));this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.uploadFromArray=function(e,t,a){this._context.addStream(String.fromCharCode(i.uploadArrayIndexBuffer,this._pId+i.intMask)+e.join()+"#"+t+","+a+",");this._context.execute()};t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(i.disposeIndexBuffer,this._pId+i.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};Object.defineProperty(t.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:true,configurable:true});return t}(n);t.exports=s},{"awayjs-stagegl/lib/base/OpCodes":"awayjs-stagegl/lib/base/OpCodes","awayjs-stagegl/lib/base/ResourceBaseFlash":"awayjs-stagegl/lib/base/ResourceBaseFlash"}],"awayjs-stagegl/lib/base/IndexBufferWebGL":[function(e,t,a){var r=function(){function e(e,t){this._gl=e;this._buffer=this._gl.createBuffer();this._numIndices=t}e.prototype.uploadFromArray=function(e,t,a){this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this._buffer);this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),this._gl.STATIC_DRAW)};e.prototype.dispose=function(){this._gl.deleteBuffer(this._buffer)};Object.defineProperty(e.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:true,configurable:true});return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/OpCodes":[function(e,t,a){var r=function(){function e(){}e.trueValue=32;e.falseValue=33;e.intMask=63;e.drawTriangles=41;e.setProgramConstant=42;e.setProgram=43;e.present=44;e.clear=45;e.initProgram=46;e.initVertexBuffer=47;e.initIndexBuffer=48;e.configureBackBuffer=49;e.uploadArrayIndexBuffer=50;e.uploadArrayVertexBuffer=51;e.uploadAGALBytesProgram=52;e.setVertexBufferAt=53;e.uploadBytesIndexBuffer=54;e.uploadBytesVertexBuffer=55;e.setColorMask=56;e.setDepthTest=57;e.disposeProgram=58;e.disposeContext=59;e.disposeVertexBuffer=61;e.disposeIndexBuffer=63;e.initTexture=64;e.setTextureAt=65;e.uploadBytesTexture=66;e.disposeTexture=67;e.setCulling=68;e.setScissorRect=69;e.clearScissorRect=70;e.setBlendFactors=71;e.setRenderToTexture=72;e.clearTextureAt=73;e.clearVertexBufferAt=74;e.setStencilActions=75;e.setStencilReferenceValue=76;e.initCubeTexture=77;e.disposeCubeTexture=78;e.uploadBytesCubeTexture=79;e.clearRenderToTexture=80;e.enableErrorChecking=81;return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/ProgramFlash":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-stagegl/lib/base/ContextStage3D");var n=e("awayjs-stagegl/lib/base/OpCodes");var s=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var l=function(e){r(t,e);function t(t){e.call(this);this._context=t;this._context.addStream(String.fromCharCode(n.initProgram));this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.upload=function(e,t){this._context.addStream(String.fromCharCode(n.uploadAGALBytesProgram,this._pId+n.intMask)+e.readBase64String(e.length)+"%"+t.readBase64String(t.length)+"%");if(i.debug)this._context.execute()};t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(n.disposeProgram,this._pId+n.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};return t}(s);t.exports=l},{"awayjs-stagegl/lib/base/ContextStage3D":"awayjs-stagegl/lib/base/ContextStage3D","awayjs-stagegl/lib/base/OpCodes":"awayjs-stagegl/lib/base/OpCodes","awayjs-stagegl/lib/base/ResourceBaseFlash":"awayjs-stagegl/lib/base/ResourceBaseFlash"}],"awayjs-stagegl/lib/base/ProgramWebGL":[function(e,t,a){var r=e("awayjs-stagegl/lib/aglsl/AGALTokenizer");var i=e("awayjs-stagegl/lib/aglsl/AGLSLParser");var n=function(){function e(e){this._gl=e;this._program=this._gl.createProgram()}e.prototype.upload=function(t,a){var r=e._aglslParser.parse(e._tokenizer.decribeAGALByteArray(t));var i=e._aglslParser.parse(e._tokenizer.decribeAGALByteArray(a));this._vertexShader=this._gl.createShader(this._gl.VERTEX_SHADER);this._fragmentShader=this._gl.createShader(this._gl.FRAGMENT_SHADER);this._gl.shaderSource(this._vertexShader,r);this._gl.compileShader(this._vertexShader);if(!this._gl.getShaderParameter(this._vertexShader,this._gl.COMPILE_STATUS)){throw new Error(this._gl.getShaderInfoLog(this._vertexShader));return}this._gl.shaderSource(this._fragmentShader,i);this._gl.compileShader(this._fragmentShader);if(!this._gl.getShaderParameter(this._fragmentShader,this._gl.COMPILE_STATUS)){throw new Error(this._gl.getShaderInfoLog(this._fragmentShader));return}this._gl.attachShader(this._program,this._vertexShader);this._gl.attachShader(this._program,this._fragmentShader);this._gl.linkProgram(this._program);if(!this._gl.getProgramParameter(this._program,this._gl.LINK_STATUS)){throw new Error(this._gl.getProgramInfoLog(this._program))}};e.prototype.dispose=function(){this._gl.deleteProgram(this._program)};e.prototype.focusProgram=function(){this._gl.useProgram(this._program)};Object.defineProperty(e.prototype,"glProgram",{get:function(){return this._program},enumerable:true,configurable:true});e._tokenizer=new r;e._aglslParser=new i;return e}();t.exports=n},{"awayjs-stagegl/lib/aglsl/AGALTokenizer":"awayjs-stagegl/lib/aglsl/AGALTokenizer","awayjs-stagegl/lib/aglsl/AGLSLParser":"awayjs-stagegl/lib/aglsl/AGLSLParser"}],"awayjs-stagegl/lib/base/ResourceBaseFlash":[function(e,t,a){var r=function(){function e(){}Object.defineProperty(e.prototype,"id",{get:function(){return this._pId},enumerable:true,configurable:true});e.prototype.dispose=function(){};return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/SamplerState":[function(e,t,a){var r=function(){function e(){}return e}();t.exports=r},{}],"awayjs-stagegl/lib/base/Stage":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-core/lib/geom/Rectangle");var n=e("awayjs-core/lib/events/Event");var s=e("awayjs-core/lib/events/EventDispatcher");var l=e("awayjs-core/lib/textures/RenderTexture");var o=e("awayjs-core/lib/utils/CSS");var u=e("awayjs-stagegl/lib/base/ContextMode");var c=e("awayjs-stagegl/lib/base/ContextGLTextureFormat");var f=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var g=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var h=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var d=e("awayjs-stagegl/lib/base/ContextStage3D");var p=e("awayjs-stagegl/lib/base/ContextWebGL");var _=e("awayjs-stagegl/lib/events/StageEvent");var b=e("awayjs-stagegl/lib/pool/TextureDataPool");var y=e("awayjs-stagegl/lib/pool/ProgramDataPool");var m=function(e){r(t,e);function t(t,a,r,n,s){if(n===void 0){n=false}if(s===void 0){s="baseline"}e.call(this);this._programData=new Array;this._x=0;this._y=0;this._stageIndex=-1;this._antiAlias=0;this._renderTarget=null;this._renderSurfaceSelector=0;this._initialised=false;this._texturePool=new b;this._programDataPool=new y(this);this._container=t;this._stageIndex=a;this._stageManager=r;this._viewPort=new i;this._enableDepthAndStencil=true;o.setElementX(this._container,0);o.setElementY(this._container,0);this.visible=true}t.prototype.getProgramData=function(e,t){return this._programDataPool.getItem(e,t)};t.prototype.setRenderTarget=function(e,t,a){if(t===void 0){t=false}if(a===void 0){a=0}if(this._renderTarget===e&&a==this._renderSurfaceSelector&&this._enableDepthAndStencil==t)return;this._renderTarget=e;this._renderSurfaceSelector=a;this._enableDepthAndStencil=t;if(e instanceof l){this._context.setRenderToTexture(this.getRenderTexture(e),t,this._antiAlias,a)}else{this._context.setRenderToBackBuffer();
this.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil)}};t.prototype.getRenderTexture=function(e){var t=this._texturePool.getItem(e,false);if(!t.texture)t.texture=this._context.createTexture(e.width,e.height,c.BGRA,true);return t.texture};t.prototype.activateBuffer=function(e,t,a,r){if(!t.contexts[this._stageIndex])t.contexts[this._stageIndex]=this._context;if(!t.buffers[this._stageIndex]){t.buffers[this._stageIndex]=this._context.createVertexBuffer(t.data.length/t.dataPerVertex,t.dataPerVertex);t.invalid[this._stageIndex]=true}if(t.invalid[this._stageIndex]){t.buffers[this._stageIndex].uploadFromArray(t.data,0,t.data.length/t.dataPerVertex);t.invalid[this._stageIndex]=false}this._context.setVertexBufferAt(e,t.buffers[this._stageIndex],a,r)};t.prototype.disposeVertexData=function(e){e.buffers[this._stageIndex].dispose();e.buffers[this._stageIndex]=null};t.prototype.activateRenderTexture=function(e,t){this._setSamplerState(e,false,false,false);this._context.setTextureAt(e,this.getRenderTexture(t))};t.prototype.activateTexture=function(e,t,a,r,i){this._setSamplerState(e,a,r,i);var n=this._texturePool.getItem(t,i);if(!n.texture){n.texture=this._context.createTexture(t.width,t.height,c.BGRA,true);n.invalid=true}if(n.invalid){n.invalid=false;if(i){var s=t._iGetMipmapData();var l=s.length;for(var o=0;o<l;o++)n.texture.uploadFromData(s[o],o)}else{n.texture.uploadFromData(t._iGetTextureData(),0)}}this._context.setTextureAt(e,n.texture)};t.prototype.activateCubeTexture=function(e,t,a,r){this._setSamplerState(e,false,a,r);var i=this._texturePool.getItem(t,r);if(!i.texture){i.texture=this._context.createCubeTexture(t.size,c.BGRA,false);i.invalid=true}if(i.invalid){i.invalid=false;for(var n=0;n<6;++n){if(r){var s=t._iGetMipmapData(n);var l=s.length;for(var o=0;o<l;o++)i.texture.uploadFromData(s[o],n,o)}else{i.texture.uploadFromData(t._iGetTextureData(n),n,0)}}}this._context.setTextureAt(e,i.texture)};t.prototype.getIndexBuffer=function(e){if(!e.contexts[this._stageIndex])e.contexts[this._stageIndex]=this._context;if(!e.buffers[this._stageIndex]){e.buffers[this._stageIndex]=this._context.createIndexBuffer(e.data.length);e.invalid[this._stageIndex]=true}if(e.invalid[this._stageIndex]){e.buffers[this._stageIndex].uploadFromArray(e.data,0,e.data.length);e.invalid[this._stageIndex]=false}return e.buffers[this._stageIndex]};t.prototype.disposeIndexData=function(e){e.buffers[this._stageIndex].dispose();e.buffers[this._stageIndex]=null};t.prototype.requestContext=function(e,t,a){var r=this;if(e===void 0){e=false}if(t===void 0){t="baseline"}if(a===void 0){a="auto"}if(this._usesSoftwareRendering!=null)this._usesSoftwareRendering=e;this._profile=t;try{if(a==u.FLASH)new d(this._container,function(e){return r._callback(e)});else this._context=new p(this._container)}catch(i){try{if(a==u.AUTO)new d(this._container,function(e){return r._callback(e)});else this.dispatchEvent(new n(n.ERROR))}catch(i){this.dispatchEvent(new n(n.ERROR))}}if(this._context)this._callback(this._context)};Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width==e)return;o.setElementWidth(this._container,e);this._width=this._viewPort.width=e;this._backBufferDirty=true;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height==e)return;o.setElementHeight(this._container,e);this._height=this._viewPort.height=e;this._backBufferDirty=true;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){if(this._x==e)return;o.setElementX(this._container,e);this._x=this._viewPort.x=e;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){if(this._y==e)return;o.setElementY(this._container,e);this._y=this._viewPort.y=e;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return o.getElementVisibility(this._container)},set:function(e){o.setElementVisibility(this._container,e)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:true,configurable:true});t.prototype.notifyViewportUpdated=function(){if(this._viewportDirty)return;this._viewportDirty=true;this._viewportUpdated=new _(_.VIEWPORT_UPDATED);this.dispatchEvent(this._viewportUpdated)};t.prototype.notifyEnterFrame=function(){if(!this._enterFrame)this._enterFrame=new n(n.ENTER_FRAME);this.dispatchEvent(this._enterFrame)};t.prototype.notifyExitFrame=function(){if(!this._exitFrame)this._exitFrame=new n(n.EXIT_FRAME);this.dispatchEvent(this._exitFrame)};Object.defineProperty(t.prototype,"profile",{get:function(){return this._profile},enumerable:true,configurable:true});t.prototype.dispose=function(){this._stageManager.iRemoveStage(this);this.freeContext();this._stageManager=null;this._stageIndex=-1};t.prototype.configureBackBuffer=function(e,t,a,r){this.width=e;this.height=t;this._antiAlias=a;this._enableDepthAndStencil=r;if(this._context)this._context.configureBackBuffer(e,t,a,r)};Object.defineProperty(t.prototype,"enableDepthAndStencil",{get:function(){return this._enableDepthAndStencil},set:function(e){this._enableDepthAndStencil=e;this._backBufferDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderTarget",{get:function(){return this._renderTarget},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderSurfaceSelector",{get:function(){return this._renderSurfaceSelector},enumerable:true,configurable:true});t.prototype.clear=function(){if(!this._context)return;if(this._backBufferDirty){this.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil);this._backBufferDirty=false}this._context.clear((this._color&4278190080)>>>24,(this._color&16711680)>>>16,(this._color&65280)>>>8,this._color&255);this._bufferClear=true};t.prototype.addEventListener=function(t,a){e.prototype.addEventListener.call(this,t,a)};t.prototype.removeEventListener=function(t,a){e.prototype.removeEventListener.call(this,t,a)};Object.defineProperty(t.prototype,"scissorRect",{get:function(){return this._scissorRect},set:function(e){this._scissorRect=e;this._context.setScissorRectangle(this._scissorRect)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stageIndex",{get:function(){return this._stageIndex},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"usesSoftwareRendering",{get:function(){return this._usesSoftwareRendering},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"antiAlias",{get:function(){return this._antiAlias},set:function(e){this._antiAlias=e;this._backBufferDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewPort",{get:function(){this._viewportDirty=false;return this._viewPort},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bufferClear",{get:function(){return this._bufferClear},set:function(e){this._bufferClear=e},enumerable:true,configurable:true});t.prototype.registerProgram=function(e){var t=0;while(this._programData[t]!=null)t++;this._programData[t]=e;e.id=t};t.prototype.unRegisterProgram=function(e){this._programData[e.id]=null;e.id=-1};t.prototype.freeContext=function(){if(this._context){this._context.dispose();this.dispatchEvent(new _(_.CONTEXT_DISPOSED))}this._context=null;this._initialised=false};t.prototype.onEnterFrame=function(e){if(!this._context)return;this.clear();this.notifyEnterFrame();if(!this._context)this._context.present();this.notifyExitFrame()};t.prototype.recoverFromDisposal=function(){if(!this._context)return false;return true};t.prototype._callback=function(e){this._context=e;this._container=this._context.container;if(this._width&&this._height)this._context.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil);this.dispatchEvent(new _(this._initialised?_.CONTEXT_RECREATED:_.CONTEXT_CREATED));this._initialised=true};t.prototype._setSamplerState=function(e,t,a,r){var i=t?h.REPEAT:h.CLAMP;var n=a?g.LINEAR:g.NEAREST;var s=r?f.MIPLINEAR:f.MIPNONE;this._context.setSamplerStateAt(e,i,n,s)};return t}(s);t.exports=m},{"awayjs-core/lib/events/Event":undefined,"awayjs-core/lib/events/EventDispatcher":undefined,"awayjs-core/lib/geom/Rectangle":undefined,"awayjs-core/lib/textures/RenderTexture":undefined,"awayjs-core/lib/utils/CSS":undefined,"awayjs-stagegl/lib/base/ContextGLMipFilter":"awayjs-stagegl/lib/base/ContextGLMipFilter","awayjs-stagegl/lib/base/ContextGLTextureFilter":"awayjs-stagegl/lib/base/ContextGLTextureFilter","awayjs-stagegl/lib/base/ContextGLTextureFormat":"awayjs-stagegl/lib/base/ContextGLTextureFormat","awayjs-stagegl/lib/base/ContextGLWrapMode":"awayjs-stagegl/lib/base/ContextGLWrapMode","awayjs-stagegl/lib/base/ContextMode":"awayjs-stagegl/lib/base/ContextMode","awayjs-stagegl/lib/base/ContextStage3D":"awayjs-stagegl/lib/base/ContextStage3D","awayjs-stagegl/lib/base/ContextWebGL":"awayjs-stagegl/lib/base/ContextWebGL","awayjs-stagegl/lib/events/StageEvent":"awayjs-stagegl/lib/events/StageEvent","awayjs-stagegl/lib/pool/ProgramDataPool":"awayjs-stagegl/lib/pool/ProgramDataPool","awayjs-stagegl/lib/pool/TextureDataPool":"awayjs-stagegl/lib/pool/TextureDataPool"}],"awayjs-stagegl/lib/base/TextureBaseWebGL":[function(e,t,a){var r=e("awayjs-core/lib/errors/AbstractMethodError");var i=function(){function e(e){this.textureType="";this._gl=e}e.prototype.dispose=function(){throw"Abstract method must be overridden."};Object.defineProperty(e.prototype,"glTexture",{get:function(){throw new r},enumerable:true,configurable:true});return e}();t.exports=i},{"awayjs-core/lib/errors/AbstractMethodError":undefined}],"awayjs-stagegl/lib/base/TextureFlash":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-core/lib/data/BitmapData");var n=e("awayjs-core/lib/utils/ByteArrayBase");var s=e("awayjs-stagegl/lib/base/OpCodes");var l=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var o=function(e){r(t,e);function t(t,a,r,i,n,l){if(l===void 0){l=false}e.call(this);this._context=t;this._width=a;this._height=r;this._context.addStream(String.fromCharCode(s.initTexture,n?s.trueValue:s.falseValue)+a+","+r+","+l+","+i+"$");this._pId=this._context.execute();this._context._iAddResource(this)}Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(s.disposeTexture)+this._pId.toString()+",");this._context.execute();this._context._iRemoveResource(this);this._context=null};t.prototype.uploadFromData=function(e,t){if(t===void 0){t=0}if(e instanceof i){e=e.imageData.data}else if(e instanceof HTMLImageElement){var a=document.createElement("canvas");var r=e.width;var l=e.height;a.width=r;a.height=l;var o=a.getContext("2d");o.drawImage(e,0,0);e=o.getImageData(0,0,r,l).data}var u=0;var c=n.internalGetBase64String(e.length,function(){return e[u++]},null);this._context.addStream(String.fromCharCode(s.uploadBytesTexture)+this._pId+","+t+","+(this._width>>t)+","+(this._height>>t)+","+c+"%");this._context.execute()};return t}(l);t.exports=o},{"awayjs-core/lib/data/BitmapData":undefined,"awayjs-core/lib/utils/ByteArrayBase":undefined,"awayjs-stagegl/lib/base/OpCodes":"awayjs-stagegl/lib/base/OpCodes","awayjs-stagegl/lib/base/ResourceBaseFlash":"awayjs-stagegl/lib/base/ResourceBaseFlash"}],"awayjs-stagegl/lib/base/TextureWebGL":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-core/lib/data/BitmapData");var n=e("awayjs-stagegl/lib/base/TextureBaseWebGL");var s=function(e){r(t,e);function t(t,a,r){e.call(this,t);this.textureType="texture2d";this._width=a;this._height=r;this._glTexture=this._gl.createTexture()}t.prototype.dispose=function(){this._gl.deleteTexture(this._glTexture)};Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"frameBuffer",{get:function(){if(!this._frameBuffer){this._frameBuffer=this._gl.createFramebuffer();this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._frameBuffer);this._gl.bindTexture(this._gl.TEXTURE_2D,this._glTexture);this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._width,this._height,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null);var e=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,e);this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._width,this._height);this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._glTexture,0);this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,e);this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,null);this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return this._frameBuffer},enumerable:true,configurable:true});t.prototype.uploadFromData=function(e,t){if(t===void 0){t=0}if(e instanceof i)e=e.imageData;this._gl.bindTexture(this._gl.TEXTURE_2D,this._glTexture);this._gl.texImage2D(this._gl.TEXTURE_2D,t,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e);this._gl.bindTexture(this._gl.TEXTURE_2D,null)};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,a){if(a===void 0){a=false}var r=this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc")};Object.defineProperty(t.prototype,"glTexture",{get:function(){return this._glTexture},enumerable:true,configurable:true});t.prototype.generateMipmaps=function(){};return t}(n);t.exports=s},{"awayjs-core/lib/data/BitmapData":undefined,"awayjs-stagegl/lib/base/TextureBaseWebGL":"awayjs-stagegl/lib/base/TextureBaseWebGL"}],"awayjs-stagegl/lib/base/VertexBufferFlash":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-stagegl/lib/base/OpCodes");var n=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var s=function(e){r(t,e);function t(t,a,r){e.call(this);this._context=t;this._numVertices=a;this._data32PerVertex=r;this._context.addStream(String.fromCharCode(i.initVertexBuffer,r+i.intMask)+a.toString()+",");this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.uploadFromArray=function(e,t,a){this._context.addStream(String.fromCharCode(i.uploadArrayVertexBuffer,this._pId+i.intMask)+e.join()+"#"+[t,a].join()+",");this._context.execute()};Object.defineProperty(t.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"data32PerVertex",{get:function(){return this._data32PerVertex},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(i.disposeVertexBuffer,this._pId+i.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};return t}(n);t.exports=s},{"awayjs-stagegl/lib/base/OpCodes":"awayjs-stagegl/lib/base/OpCodes","awayjs-stagegl/lib/base/ResourceBaseFlash":"awayjs-stagegl/lib/base/ResourceBaseFlash"}],"awayjs-stagegl/lib/base/VertexBufferWebGL":[function(e,t,a){var r=function(){function e(e,t,a){this._gl=e;this._buffer=this._gl.createBuffer();this._numVertices=t;this._data32PerVertex=a}e.prototype.uploadFromArray=function(e,t,a){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer);this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(e),this._gl.STATIC_DRAW)};Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"data32PerVertex",{get:function(){return this._data32PerVertex},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:true,configurable:true});e.prototype.dispose=function(){this._gl.deleteBuffer(this._buffer)};return e}();t.exports=r},{}],"awayjs-stagegl/lib/events/StageEvent":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-core/lib/events/Event");var n=function(e){r(t,e);function t(t){e.call(this,t)}t.CONTEXT_CREATED="contextCreated";t.CONTEXT_DISPOSED="contextDisposed";t.CONTEXT_RECREATED="contextRecreated";t.VIEWPORT_UPDATED="viewportUpdated";return t}(i);t.exports=n},{"awayjs-core/lib/events/Event":undefined}],"awayjs-stagegl/lib/managers/StageManager":[function(e,t,a){var r=this.__extends||function(e,t){for(var a in t)if(t.hasOwnProperty(a))e[a]=t[a];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var i=e("awayjs-core/lib/events/EventDispatcher");var n=e("awayjs-core/lib/errors/ArgumentError");var s=e("awayjs-stagegl/lib/base/Stage");var l=e("awayjs-stagegl/lib/events/StageEvent");var o=function(e){r(t,e);function t(){var a=this;e.call(this);this._stages=new Array(t.STAGE_MAX_QUANTITY);this._onContextCreatedDelegate=function(e){return a.onContextCreated(e)}}t.getInstance=function(){if(this._instance==null)this._instance=new t;return this._instance};t.prototype.getStageAt=function(e,a,r,i){if(a===void 0){a=false}if(r===void 0){r="baseline"}if(i===void 0){i="auto"}if(e<0||e>=t.STAGE_MAX_QUANTITY)throw new n("Index is out of bounds [0.."+t.STAGE_MAX_QUANTITY+"]");if(!this._stages[e]){t._numStages++;var o=document.createElement("canvas");o.id="stage"+e;document.body.appendChild(o);var u=this._stages[e]=new s(o,e,this,a,r);u.addEventListener(l.CONTEXT_CREATED,this._onContextCreatedDelegate);u.requestContext(a,r,i)}return u};t.prototype.iRemoveStage=function(e){t._numStages--;e.removeEventListener(l.CONTEXT_CREATED,this._onContextCreatedDelegate);this._stages[e.stageIndex]=null};t.prototype.getFreeStage=function(e,t,a){if(e===void 0){e=false}if(t===void 0){t="baseline"}if(a===void 0){a="auto"}var r=0;var i=this._stages.length;while(r<i){if(!this._stages[r])return this.getStageAt(r,e,t,a);++r}return null};Object.defineProperty(t.prototype,"hasFreeStage",{get:function(){return t._numStages<t.STAGE_MAX_QUANTITY?true:false},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsFree",{get:function(){return t.STAGE_MAX_QUANTITY-t._numStages},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsUsed",{get:function(){return t._numStages},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsTotal",{get:function(){return this._stages.length},enumerable:true,configurable:true});t.prototype.onContextCreated=function(e){};t.STAGE_MAX_QUANTITY=8;t._numStages=0;return t}(i);t.exports=o},{"awayjs-core/lib/errors/ArgumentError":undefined,"awayjs-core/lib/events/EventDispatcher":undefined,"awayjs-stagegl/lib/base/Stage":"awayjs-stagegl/lib/base/Stage","awayjs-stagegl/lib/events/StageEvent":"awayjs-stagegl/lib/events/StageEvent"}],"awayjs-stagegl/lib/pool/IndexDataPool":[function(e,t,a){var r=e("awayjs-stagegl/lib/pool/IndexData");var i=function(){function e(){}e.getItem=function(t,a,i){var n=e._pool[t.id]||(e._pool[t.id]=new Array);var s=n[a]||(n[a]=new r(a));s.updateData(i,t.indices,t.numVertices);return s};e.disposeItem=function(e,t){var a=this._pool[e];a[t].dispose();a[t]=null};e.prototype.disposeData=function(t){var a=e._pool[t];var r=a.length;for(var i=0;i<r;i++){a[i].dispose();a[i]=null}e._pool[t]=null};e._pool=new Object;return e}();t.exports=i},{"awayjs-stagegl/lib/pool/IndexData":"awayjs-stagegl/lib/pool/IndexData"}],"awayjs-stagegl/lib/pool/IndexData":[function(e,t,a){var r=function(){function e(e){this._dataDirty=true;this.invalid=new Array(8);this.contexts=new Array(8);this.buffers=new Array(8);this.level=e}e.prototype.updateData=function(t,a,r){if(this._dataDirty){this._dataDirty=false;if(a.length<e.LIMIT_INDICES&&r<e.LIMIT_VERTS){this.indexMappings=null;this.originalIndices=null;this.setData(a);this.offset=a.length}else{var i;var n;var s;var l;var o;var u=new Array;this.indexMappings=new Array(a.length);this.originalIndices=new Array;i=this.indexMappings.length;while(i--)this.indexMappings[i]=-1;var c;var f;s=0;n=a.length;i=t;o=0;while(i<n&&s+3<e.LIMIT_INDICES&&o+3<e.LIMIT_VERTS){for(l=0;l<3;l++){c=a[i+l];if(this.indexMappings[c]>=0){f=this.indexMappings[c]}else{f=o++;this.indexMappings[c]=f;this.originalIndices.push(c)}u[s+l]=f}s+=3;i+=3}this.setData(u);this.offset=i}}};e.prototype.invalidateData=function(){this._dataDirty=true};e.prototype.dispose=function(){for(var e=0;e<8;++e){if(this.contexts[e]){this.buffers[e].dispose();this.buffers[e]=null;this.contexts[e]=null}}};e.prototype.disposeBuffers=function(){for(var e=0;e<8;++e){if(this.buffers[e]){this.buffers[e].dispose();this.buffers[e]=null}}};e.prototype.invalidateBuffers=function(){for(var e=0;e<8;++e)this.invalid[e]=true};e.prototype.setData=function(e){if(this.data&&this.data.length!=e.length)this.disposeBuffers();else this.invalidateBuffers();this.data=e};e.LIMIT_VERTS=65535;e.LIMIT_INDICES=16777215;return e}();t.exports=r},{}],"awayjs-stagegl/lib/pool/ProgramDataPool":[function(e,t,a){var r=e("awayjs-stagegl/lib/pool/ProgramData");var i=function(){function e(e){this._pool=new Object;this._stage=e}e.prototype.getItem=function(e,t){var a=e+t;return this._pool[a]||(this._pool[a]=new r(this,this._stage,e,t))};e.prototype.disposeItem=function(e){this._pool[e]=null};return e}();t.exports=i},{"awayjs-stagegl/lib/pool/ProgramData":"awayjs-stagegl/lib/pool/ProgramData"}],"awayjs-stagegl/lib/pool/ProgramData":[function(e,t,a){var r=function(){function e(e,t,a,r){this.usages=0;this._pool=e;this.stage=t;this.vertexString=a;this.fragmentString=r;this.stage.registerProgram(this)}e.prototype.dispose=function(){this.usages--;if(!this.usages){this._pool.disposeItem(this.vertexString+this.fragmentString);this.stage.unRegisterProgram(this);if(this.program)this.program.dispose()}this.program=null};e.PROGRAMDATA_ID_COUNT=0;return e}();t.exports=r},{}],"awayjs-stagegl/lib/pool/TextureDataPool":[function(e,t,a){var r=e("awayjs-stagegl/lib/pool/TextureData");var i=function(){function e(){this._pool=new Object}e.prototype.getItem=function(e,t){var a=this._pool[e.id]||(this._pool[e.id]=e._iAddTextureData(new r(this,e,t)));if(!a.mipmap&&t){a.mipmap=true;a.invalidate()}return a};e.prototype.disposeItem=function(e){e._iRemoveTextureData(this._pool[e.id]);this._pool[e.id]=null};return e}();t.exports=i},{"awayjs-stagegl/lib/pool/TextureData":"awayjs-stagegl/lib/pool/TextureData"}],"awayjs-stagegl/lib/pool/TextureData":[function(e,t,a){var r=function(){function e(e,t,a){this._pool=e;this.textureProxy=t;this.mipmap=a}e.prototype.dispose=function(){this._pool.disposeItem(this.textureProxy);this.texture.dispose();this.texture=null};e.prototype.invalidate=function(){this.invalid=true};return e}();t.exports=r},{}],"awayjs-stagegl/lib/pool/VertexDataPool":[function(e,t,a){var r=e("awayjs-core/lib/data/SubGeometryBase");var i=e("awayjs-stagegl/lib/pool/VertexData");var n=function(){function e(){}e.getItem=function(t,a,n){if(t.concatenateArrays)n=r.VERTEX_DATA;var s=e._pool[t.id]||(e._pool[t.id]=new Object);var l=s[n]||(s[n]=new Array);var o=l[a.level]||(l[a.level]=new i(t,n));o.updateData(a.originalIndices,a.indexMappings);return o};e.disposeItem=function(t,a,r){var i=e._pool[t.id];var n=i[r];n[a].dispose();n[a]=null};e.prototype.disposeData=function(t){var a=e._pool[t.id];for(var r in a){var i=a[r];var n=i.length;for(var s=0;s<n;s++){i[s].dispose();i[s]=null}}e._pool[t.id]=null};e._pool=new Object;return e}();t.exports=n},{"awayjs-core/lib/data/SubGeometryBase":undefined,"awayjs-stagegl/lib/pool/VertexData":"awayjs-stagegl/lib/pool/VertexData"}],"awayjs-stagegl/lib/pool/VertexData":[function(e,t,a){var r=e("awayjs-core/lib/data/SubGeometryBase");var i=e("awayjs-core/lib/events/SubGeometryEvent");var n=function(){function e(e,t){var a=this;this._dataDirty=true;this.invalid=new Array(8);this.buffers=new Array(8);this.contexts=new Array(8);this._subGeometry=e;this._dataType=t;this._onVerticesUpdatedDelegate=function(e){return a._onVerticesUpdated(e)};this._subGeometry.addEventListener(i.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)}e.prototype.updateData=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}if(this._dataDirty){this._dataDirty=false;this.dataPerVertex=this._subGeometry.getStride(this._dataType);var a=this._subGeometry[this._dataType];if(t==null){this.setData(a)}else{var r=new Array(e.length*this.dataPerVertex);var i;var n;var s=0;var l=0;while(s<e.length){i=e[s];n=t[i]*this.dataPerVertex;i*=this.dataPerVertex;for(l=0;l<this.dataPerVertex;l++)r[n+l]=a[i+l];s++}this.setData(r)}}};e.prototype.dispose=function(){for(var e=0;e<8;++e){if(this.contexts[e]){this.buffers[e].dispose();this.buffers[e]=null;this.contexts[e]=null}}};e.prototype.disposeBuffers=function(){for(var e=0;e<8;++e){if(this.buffers[e]){this.buffers[e].dispose();this.buffers[e]=null}}};e.prototype.invalidateBuffers=function(){for(var e=0;e<8;++e)this.invalid[e]=true};e.prototype.setData=function(e){if(this.data&&this.data.length!=e.length)this.disposeBuffers();else this.invalidateBuffers();this.data=e};e.prototype._onVerticesUpdated=function(e){var t=this._subGeometry.concatenateArrays?r.VERTEX_DATA:e.dataType;if(t==this._dataType)this._dataDirty=true};return e}();t.exports=n},{"awayjs-core/lib/data/SubGeometryBase":undefined,"awayjs-core/lib/events/SubGeometryEvent":undefined}],"awayjs-stagegl/lib/swfobject":[function(e,t,a){var r=function(){var e="undefined",t="object",a="Shockwave Flash",i="ShockwaveFlash.ShockwaveFlash",n="application/x-shockwave-flash",s="SWFObjectExprInst",l="onreadystatechange",o=window,u=document,c=navigator,f=false,g=[D],h=[],d=[],p=[],_,b,y,m,v=false,w=false,x,E,T=true,S=function(){var r=typeof u.getElementById!=e&&typeof u.getElementsByTagName!=e&&typeof u.createElement!=e,s=c.userAgent.toLowerCase(),l=c.platform.toLowerCase(),g=l?/win/.test(l):/win/.test(s),h=l?/mac/.test(l):/mac/.test(s),d=/webkit/.test(s)?parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,p=!+"1",_=[0,0,0],b=null;if(typeof c.plugins!=e&&typeof c.plugins[a]==t){b=c.plugins[a].description;if(b&&!(typeof c.mimeTypes!=e&&c.mimeTypes[n]&&!c.mimeTypes[n].enabledPlugin)){f=true;p=false;b=b.replace(/^.*\s+(\S+\s+\S+$)/,"$1");_[0]=parseInt(b.replace(/^(.*)\..*$/,"$1"),10);_[1]=parseInt(b.replace(/^.*\.(.*)\s.*$/,"$1"),10);_[2]=/[a-zA-Z]/.test(b)?parseInt(b.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof o.ActiveXObject!=e){try{var y=new ActiveXObject(i);if(y){b=y.GetVariable("$version");if(b){p=true;b=b.split(" ")[1].split(",");_=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)]}}}catch(m){}}return{w3:r,pv:_,wk:d,ie:p,win:g,mac:h}}(),A=function(){if(!S.w3){return}if(typeof u.readyState!=e&&u.readyState=="complete"||typeof u.readyState==e&&(u.getElementsByTagName("body")[0]||u.body)){C()}if(!v){if(typeof u.addEventListener!=e){u.addEventListener("DOMContentLoaded",C,false)}if(S.ie&&S.win){u.attachEvent(l,function(){if(u.readyState=="complete"){u.detachEvent(l,arguments.callee);C()}});if(o==top){(function(){if(v){return}try{u.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()})()}}if(S.wk){(function(){if(v){return}if(!/loaded|complete/.test(u.readyState)){setTimeout(arguments.callee,0);return}C()})()}R(C)}}();function C(){if(v){return}try{var e=u.getElementsByTagName("body")[0].appendChild(W("span"));e.parentNode.removeChild(e)}catch(t){return}v=true;var a=g.length;for(var r=0;r<a;r++){g[r]()}}function j(e){if(v){e()}else{g[g.length]=e}}function R(t){if(typeof o.addEventListener!=e){o.addEventListener("load",t,false)}else if(typeof u.addEventListener!=e){u.addEventListener("load",t,false)}else if(typeof o.attachEvent!=e){z(o,"onload",t)}else if(typeof o.onload=="function"){var a=o.onload;o.onload=function(){a();t()}}else{o.onload=t}}function D(){if(f){B()}else{L()}}function B(){var a=u.getElementsByTagName("body")[0];var r=W(t);r.setAttribute("type",n);var i=a.appendChild(r);if(i){var s=0;(function(){if(typeof i.GetVariable!=e){var t=i.GetVariable("$version");if(t){t=t.split(" ")[1].split(",");S.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)]}}else if(s<10){s++;setTimeout(arguments.callee,10);return}a.removeChild(r);i=null;L()})()}else{L()}}function L(){var t=h.length;if(t>0){for(var a=0;a<t;a++){var r=h[a].id;var i=h[a].callbackFn;var n={success:false,id:r};if(S.pv[0]>0){var s=V(r);if(s){if(X(h[a].swfVersion)&&!(S.wk&&S.wk<312)){Y(r,true);if(i){n.success=true;n.ref=I(r);i(n)}}else if(h[a].expressInstall&&P()){var l={};l.data=h[a].expressInstall;l.width=s.getAttribute("width")||"0";l.height=s.getAttribute("height")||"0";if(s.getAttribute("class")){l.styleclass=s.getAttribute("class")}if(s.getAttribute("align")){l.align=s.getAttribute("align")}var o={};var u=s.getElementsByTagName("param");var c=u.length;for(var f=0;f<c;f++){if(u[f].getAttribute("name").toLowerCase()!="movie"){o[u[f].getAttribute("name")]=u[f].getAttribute("value")}}F(l,o,r,i)}else{O(s);if(i){i(n)}}}}else{Y(r,true);if(i){var g=I(r);if(g&&typeof g.SetVariable!=e){n.success=true;n.ref=g}i(n)}}}}}function I(a){var r=null;var i=V(a);if(i&&i.nodeName=="OBJECT"){if(typeof i.SetVariable!=e){r=i}else{var n=i.getElementsByTagName(t)[0];if(n){r=n}}}return r}function P(){return!w&&X("6.0.65")&&(S.win||S.mac)&&!(S.wk&&S.wk<312)}function F(t,a,r,i){w=true;y=i||null;m={success:false,id:r};var n=V(r);if(n){if(n.nodeName=="OBJECT"){_=M(n);b=null}else{_=n;b=r}t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310){t.width="310"}if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137){t.height="137"}u.title=u.title.slice(0,47)+" - Flash Player Installation";var l=S.ie&&S.win?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+l+"&MMdoctitle="+u.title;if(typeof a.flashvars!=e){a.flashvars+="&"+o}else{a.flashvars=o}if(S.ie&&S.win&&n.readyState!=4){var c=W("div");r+="SWFObjectNew";c.setAttribute("id",r);n.parentNode.insertBefore(c,n);n.style.display="none";(function(){if(n.readyState==4){n.parentNode.removeChild(n)}else{setTimeout(arguments.callee,10)}})()}N(t,a,r)}}function O(e){if(S.ie&&S.win&&e.readyState!=4){var t=W("div");e.parentNode.insertBefore(t,e);t.parentNode.replaceChild(M(e),t);e.style.display="none";(function(){if(e.readyState==4){e.parentNode.removeChild(e)}else{setTimeout(arguments.callee,10)}})()}else{e.parentNode.replaceChild(M(e),e)}}function M(e){var a=W("div");if(S.win&&S.ie){a.innerHTML=e.innerHTML}else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var n=i.length;for(var s=0;s<n;s++){if(!(i[s].nodeType==1&&i[s].nodeName=="PARAM")&&!(i[s].nodeType==8)){a.appendChild(i[s].cloneNode(true))}}}}}return a}function N(a,r,i){var s,l=V(i);if(S.wk&&S.wk<312){return s}if(l){if(typeof a.id==e){a.id=i}if(S.ie&&S.win){var o="";for(var u in a){if(a[u]!=Object.prototype[u]){if(u.toLowerCase()=="data"){r.movie=a[u]
}else if(u.toLowerCase()=="styleclass"){o+=' class="'+a[u]+'"'}else if(u.toLowerCase()!="classid"){o+=" "+u+'="'+a[u]+'"'}}}var c="";for(var f in r){if(r[f]!=Object.prototype[f]){c+='<param name="'+f+'" value="'+r[f]+'" />'}}l.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+c+"</object>";d[d.length]=a.id;s=V(a.id)}else{var g=W(t);g.setAttribute("type",n);for(var h in a){if(a[h]!=Object.prototype[h]){if(h.toLowerCase()=="styleclass"){g.setAttribute("class",a[h])}else if(h.toLowerCase()!="classid"){g.setAttribute(h,a[h])}}}for(var p in r){if(r[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"){U(g,p,r[p])}}l.parentNode.replaceChild(g,l);s=g}}return s}function U(e,t,a){var r=W("param");r.setAttribute("name",t);r.setAttribute("value",a);e.appendChild(r)}function k(e){var t=V(e);if(t&&t.nodeName=="OBJECT"){if(S.ie&&S.win){t.style.display="none";(function(){if(t.readyState==4){G(e)}else{setTimeout(arguments.callee,10)}})()}else{t.parentNode.removeChild(t)}}}function G(e){var t=V(e);if(t){for(var a in t){if(typeof t[a]=="function"){t[a]=null}}t.parentNode.removeChild(t)}}function V(e){var t=null;try{t=u.getElementById(e)}catch(a){}return t}function W(e){return u.createElement(e)}function z(e,t,a){e.attachEvent(t,a);p[p.length]=[e,t,a]}function X(e){var t=S.pv,a=e.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return t[0]>a[0]||t[0]==a[0]&&t[1]>a[1]||t[0]==a[0]&&t[1]==a[1]&&t[2]>=a[2]?true:false}function H(a,r,i,n){if(S.ie&&S.mac){return}var s=u.getElementsByTagName("head")[0];if(!s){return}var l=i&&typeof i=="string"?i:"screen";if(n){x=null;E=null}if(!x||E!=l){var o=W("style");o.setAttribute("type","text/css");o.setAttribute("media",l);x=s.appendChild(o);if(S.ie&&S.win&&typeof u.styleSheets!=e&&u.styleSheets.length>0){x=u.styleSheets[u.styleSheets.length-1]}E=l}if(S.ie&&S.win){if(x&&typeof x.addRule==t){x.addRule(a,r)}}else{if(x&&typeof u.createTextNode!=e){x.appendChild(u.createTextNode(a+" {"+r+"}"))}}}function Y(e,t){if(!T){return}var a=t?"visible":"hidden";if(v&&V(e)){V(e).style.visibility=a}else{H("#"+e,"visibility:"+a)}}function $(t){var a=/[\\\"<>\.;]/;var r=a.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var Q=function(){if(S.ie&&S.win){window.attachEvent("onunload",function(){var e=p.length;for(var t=0;t<e;t++){p[t][0].detachEvent(p[t][1],p[t][2])}var a=d.length;for(var i=0;i<a;i++){k(d[i])}for(var n in S){S[n]=null}S=null;for(var s in r){r[s]=null}r=null})}}();return{registerObject:function(e,t,a,r){if(S.w3&&e&&t){var i={};i.id=e;i.swfVersion=t;i.expressInstall=a;i.callbackFn=r;h[h.length]=i;Y(e,false)}else if(r){r({success:false,id:e})}},getObjectById:function(e){if(S.w3){return I(e)}},embedSWF:function(a,r,i,n,s,l,o,u,c,f){var g={success:false,id:r};if(S.w3&&!(S.wk&&S.wk<312)&&a&&r&&i&&n&&s){Y(r,false);j(function(){i+="";n+="";var h={};if(c&&typeof c===t){for(var d in c){h[d]=c[d]}}h.data=a;h.width=i;h.height=n;var p={};if(u&&typeof u===t){for(var _ in u){p[_]=u[_]}}if(o&&typeof o===t){for(var b in o){if(typeof p.flashvars!=e){p.flashvars+="&"+b+"="+o[b]}else{p.flashvars=b+"="+o[b]}}}if(X(s)){var y=N(h,p,r);if(h.id==r){Y(r,true)}g.success=true;g.ref=y}else if(l&&P()){h.data=l;F(h,p,r,f);return}else{Y(r,true)}if(f){f(g)}})}else if(f){f(g)}},switchOffAutoHideShow:function(){T=false},ua:S,getFlashPlayerVersion:function(){return{major:S.pv[0],minor:S.pv[1],release:S.pv[2]}},hasFlashPlayerVersion:X,createSWF:function(e,t,a){if(S.w3){return N(e,t,a)}else{return undefined}},showExpressInstall:function(e,t,a,r){if(S.w3&&P()){F(e,t,a,r)}},removeSWF:function(e){if(S.w3){k(e)}},createCSS:function(e,t,a,r){if(S.w3){H(e,t,a,r)}},addDomLoadEvent:j,addLoadEvent:R,getQueryParamValue:function(e){var t=u.location.search||u.location.hash;if(t){if(/\?/.test(t)){t=t.split("?")[1]}if(e==null){return $(t)}var a=t.split("&");for(var r=0;r<a.length;r++){if(a[r].substring(0,a[r].indexOf("="))==e){return $(a[r].substring(a[r].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(w){var e=V(s);if(e&&_){e.parentNode.replaceChild(_,e);if(b){Y(b,true);if(S.ie&&S.win){_.style.display="block"}}if(y){y(m)}}w=false}}}}();t.exports=r},{}]},{},[]);

//# sourceMappingURL=awayjs-stagegl.min.js.map