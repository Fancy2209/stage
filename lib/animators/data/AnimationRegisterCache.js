var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var ShaderRegisterCache = require("awayjs-stagegl/lib/materials/compilation/ShaderRegisterCache");
var ShaderRegisterElement = require("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement");
/**
 * ...
 */
var AnimationRegisterCache = (function (_super) {
    __extends(AnimationRegisterCache, _super);
    function AnimationRegisterCache(profile) {
        _super.call(this, profile);
        this.indexDictionary = new Object();
        this.vertexConstantData = new Array();
        this.fragmentConstantData = new Array();
    }
    AnimationRegisterCache.prototype.reset = function () {
        _super.prototype.reset.call(this);
        this.rotationRegisters = new Array();
        this.positionAttribute = this.getRegisterFromString(this.sourceRegisters[0]);
        this.scaleAndRotateTarget = this.getRegisterFromString(this.targetRegisters[0]);
        this.addVertexTempUsages(this.scaleAndRotateTarget, 1);
        for (var i = 1; i < this.targetRegisters.length; i++) {
            this.rotationRegisters.push(this.getRegisterFromString(this.targetRegisters[i]));
            this.addVertexTempUsages(this.rotationRegisters[i - 1], 1);
        }
        this.scaleAndRotateTarget = new ShaderRegisterElement(this.scaleAndRotateTarget.regName, this.scaleAndRotateTarget.index); //only use xyz, w is used as vertexLife
        //allot const register
        this.vertexZeroConst = this.getFreeVertexConstant();
        this.vertexZeroConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 0);
        this.vertexOneConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 1);
        this.vertexTwoConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 2);
        //allot temp register
        this.positionTarget = this.getFreeVertexVectorTemp();
        this.addVertexTempUsages(this.positionTarget, 1);
        this.positionTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);
        if (this.needVelocity) {
            this.velocityTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.velocityTarget, 1);
            this.velocityTarget = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index);
            this.vertexTime = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index, 3);
            this.vertexLife = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index, 3);
        }
        else {
            var tempTime = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(tempTime, 1);
            this.vertexTime = new ShaderRegisterElement(tempTime.regName, tempTime.index, 0);
            this.vertexLife = new ShaderRegisterElement(tempTime.regName, tempTime.index, 1);
        }
    };
    AnimationRegisterCache.prototype.setUVSourceAndTarget = function (UVAttribute, UVVaring) {
        this.uvVar = this.getRegisterFromString(UVVaring);
        this.uvAttribute = this.getRegisterFromString(UVAttribute);
        //uv action is processed after normal actions,so use offsetTarget as uvTarget
        this.uvTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);
    };
    AnimationRegisterCache.prototype.setRegisterIndex = function (node, parameterIndex /*int*/, registerIndex /*int*/) {
        //8 should be enough for any node.
        var t = this.indexDictionary[node.id];
        if (t == null)
            t = this.indexDictionary[node.id] = new Array(8);
        t[parameterIndex] = registerIndex;
    };
    AnimationRegisterCache.prototype.getRegisterIndex = function (node, parameterIndex /*int*/) {
        return this.indexDictionary[node.id][parameterIndex];
    };
    AnimationRegisterCache.prototype.getInitCode = function () {
        var len = this.sourceRegisters.length;
        var code = "";
        for (var i = 0; i < len; i++)
            code += "mov " + this.targetRegisters[i] + "," + this.sourceRegisters[i] + "\n";
        code += "mov " + this.positionTarget + ".xyz," + this.vertexZeroConst.toString() + "\n";
        if (this.needVelocity)
            code += "mov " + this.velocityTarget + ".xyz," + this.vertexZeroConst.toString() + "\n";
        return code;
    };
    AnimationRegisterCache.prototype.getCombinationCode = function () {
        return "add " + this.scaleAndRotateTarget + ".xyz," + this.scaleAndRotateTarget + ".xyz," + this.positionTarget + ".xyz\n";
    };
    AnimationRegisterCache.prototype.initColorRegisters = function () {
        var code = "";
        if (this.hasColorMulNode) {
            this.colorMulTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.colorMulTarget, 1);
            this.colorMulVary = this.getFreeVarying();
            code += "mov " + this.colorMulTarget + "," + this.vertexOneConst + "\n";
        }
        if (this.hasColorAddNode) {
            this.colorAddTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.colorAddTarget, 1);
            this.colorAddVary = this.getFreeVarying();
            code += "mov " + this.colorAddTarget + "," + this.vertexZeroConst + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getColorPassCode = function () {
        var code = "";
        if (this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {
            if (this.hasColorMulNode)
                code += "mov " + this.colorMulVary + "," + this.colorMulTarget + "\n";
            if (this.hasColorAddNode)
                code += "mov " + this.colorAddVary + "," + this.colorAddTarget + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getColorCombinationCode = function (shadedTarget) {
        var code = "";
        if (this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {
            var colorTarget = this.getRegisterFromString(shadedTarget);
            this.addFragmentTempUsages(colorTarget, 1);
            if (this.hasColorMulNode)
                code += "mul " + colorTarget + "," + colorTarget + "," + this.colorMulVary + "\n";
            if (this.hasColorAddNode)
                code += "add " + colorTarget + "," + colorTarget + "," + this.colorAddVary + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getRegisterFromString = function (code) {
        var temp = code.split(/(\d+)/);
        return new ShaderRegisterElement(temp[0], parseInt(temp[1]));
    };
    Object.defineProperty(AnimationRegisterCache.prototype, "numVertexConstant", {
        get: function () {
            return this._numVertexConstant;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AnimationRegisterCache.prototype, "numFragmentConstant", {
        get: function () {
            return this._numFragmentConstant;
        },
        enumerable: true,
        configurable: true
    });
    AnimationRegisterCache.prototype.setDataLength = function () {
        this._numVertexConstant = this.numUsedVertexConstants - this.vertexConstantOffset;
        this._numFragmentConstant = this.numUsedFragmentConstants - this.fragmentConstantOffset;
        this.vertexConstantData.length = this._numVertexConstant * 4;
        this.fragmentConstantData.length = this._numFragmentConstant * 4;
    };
    AnimationRegisterCache.prototype.setVertexConst = function (index /*int*/, x, y, z, w) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (z === void 0) { z = 0; }
        if (w === void 0) { w = 0; }
        var _index = (index - this.vertexConstantOffset) * 4;
        this.vertexConstantData[_index++] = x;
        this.vertexConstantData[_index++] = y;
        this.vertexConstantData[_index++] = z;
        this.vertexConstantData[_index] = w;
    };
    AnimationRegisterCache.prototype.setVertexConstFromArray = function (index /*int*/, data) {
        var _index = (index - this.vertexConstantOffset) * 4;
        for (var i = 0; i < data.length; i++)
            this.vertexConstantData[_index++] = data[i];
    };
    AnimationRegisterCache.prototype.setVertexConstFromMatrix = function (index /*int*/, matrix) {
        var rawData = matrix.rawData;
        var _index = (index - this.vertexConstantOffset) * 4;
        this.vertexConstantData[_index++] = rawData[0];
        this.vertexConstantData[_index++] = rawData[4];
        this.vertexConstantData[_index++] = rawData[8];
        this.vertexConstantData[_index++] = rawData[12];
        this.vertexConstantData[_index++] = rawData[1];
        this.vertexConstantData[_index++] = rawData[5];
        this.vertexConstantData[_index++] = rawData[9];
        this.vertexConstantData[_index++] = rawData[13];
        this.vertexConstantData[_index++] = rawData[2];
        this.vertexConstantData[_index++] = rawData[6];
        this.vertexConstantData[_index++] = rawData[10];
        this.vertexConstantData[_index++] = rawData[14];
        this.vertexConstantData[_index++] = rawData[3];
        this.vertexConstantData[_index++] = rawData[7];
        this.vertexConstantData[_index++] = rawData[11];
        this.vertexConstantData[_index] = rawData[15];
    };
    AnimationRegisterCache.prototype.setFragmentConst = function (index /*int*/, x, y, z, w) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (z === void 0) { z = 0; }
        if (w === void 0) { w = 0; }
        var _index = (index - this.fragmentConstantOffset) * 4;
        this.fragmentConstantData[_index++] = x;
        this.fragmentConstantData[_index++] = y;
        this.fragmentConstantData[_index++] = z;
        this.fragmentConstantData[_index] = w;
    };
    return AnimationRegisterCache;
})(ShaderRegisterCache);
module.exports = AnimationRegisterCache;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdG9ycy9kYXRhL2FuaW1hdGlvbnJlZ2lzdGVyY2FjaGUudHMiXSwibmFtZXMiOlsiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZSIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuY29uc3RydWN0b3IiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnJlc2V0IiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5zZXRVVlNvdXJjZUFuZFRhcmdldCIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0UmVnaXN0ZXJJbmRleCIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuZ2V0UmVnaXN0ZXJJbmRleCIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuZ2V0SW5pdENvZGUiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmdldENvbWJpbmF0aW9uQ29kZSIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuaW5pdENvbG9yUmVnaXN0ZXJzIiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5nZXRDb2xvclBhc3NDb2RlIiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5nZXRDb2xvckNvbWJpbmF0aW9uQ29kZSIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nIiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5udW1WZXJ0ZXhDb25zdGFudCIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUubnVtRnJhZ21lbnRDb25zdGFudCIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0RGF0YUxlbmd0aCIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VmVydGV4Q29uc3QiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnNldFZlcnRleENvbnN0RnJvbUFycmF5IiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5zZXRWZXJ0ZXhDb25zdEZyb21NYXRyaXgiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnNldEZyYWdtZW50Q29uc3QiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUdBLElBQU8sbUJBQW1CLFdBQWEsOERBQThELENBQUMsQ0FBQztBQUN2RyxJQUFPLHFCQUFxQixXQUFZLGdFQUFnRSxDQUFDLENBQUM7QUFHMUcsQUFHQTs7R0FERztJQUNHLHNCQUFzQjtJQUFTQSxVQUEvQkEsc0JBQXNCQSxVQUE0QkE7SUE4Q3ZEQSxTQTlDS0Esc0JBQXNCQSxDQThDZkEsT0FBY0E7UUFFekJDLGtCQUFNQSxPQUFPQSxDQUFDQSxDQUFDQTtRQWZSQSxvQkFBZUEsR0FBVUEsSUFBSUEsTUFBTUEsRUFBRUEsQ0FBQ0E7UUEySnZDQSx1QkFBa0JBLEdBQWlCQSxJQUFJQSxLQUFLQSxFQUFVQSxDQUFDQTtRQUN2REEseUJBQW9CQSxHQUFpQkEsSUFBSUEsS0FBS0EsRUFBVUEsQ0FBQ0E7SUE1SWhFQSxDQUFDQTtJQUVNRCxzQ0FBS0EsR0FBWkE7UUFFQ0UsZ0JBQUtBLENBQUNBLEtBQUtBLFdBQUVBLENBQUNBO1FBRWRBLElBQUlBLENBQUNBLGlCQUFpQkEsR0FBR0EsSUFBSUEsS0FBS0EsRUFBeUJBLENBQUNBO1FBQzVEQSxJQUFJQSxDQUFDQSxpQkFBaUJBLEdBQUdBLElBQUlBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDN0VBLElBQUlBLENBQUNBLG9CQUFvQkEsR0FBR0EsSUFBSUEsQ0FBQ0EscUJBQXFCQSxDQUFDQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNoRkEsSUFBSUEsQ0FBQ0EsbUJBQW1CQSxDQUFDQSxJQUFJQSxDQUFDQSxvQkFBb0JBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBRXZEQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFrQkEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0E7WUFDckVBLElBQUlBLENBQUNBLGlCQUFpQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EscUJBQXFCQSxDQUFDQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNqRkEsSUFBSUEsQ0FBQ0EsbUJBQW1CQSxDQUFDQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQzVEQSxDQUFDQTtRQUVEQSxJQUFJQSxDQUFDQSxvQkFBb0JBLEdBQUdBLElBQUlBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxPQUFPQSxFQUFFQSxJQUFJQSxDQUFDQSxvQkFBb0JBLENBQUNBLEtBQUtBLENBQUNBLEVBQUVBLHVDQUF1Q0E7UUFFbEtBLEFBRUFBLHNCQUZzQkE7UUFFdEJBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLENBQUNBLHFCQUFxQkEsRUFBRUEsQ0FBQ0E7UUFDcERBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLElBQUlBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsT0FBT0EsRUFBRUEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDOUdBLElBQUlBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsT0FBT0EsRUFBRUEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDN0dBLElBQUlBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsT0FBT0EsRUFBRUEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFN0dBLEFBQ0FBLHFCQURxQkE7UUFDckJBLElBQUlBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLENBQUNBLHVCQUF1QkEsRUFBRUEsQ0FBQ0E7UUFDckRBLElBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDakRBLElBQUlBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsT0FBT0EsRUFBRUEsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFFeEdBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLENBQUNBO1lBQ3ZCQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxDQUFDQSx1QkFBdUJBLEVBQUVBLENBQUNBO1lBQ3JEQSxJQUFJQSxDQUFDQSxtQkFBbUJBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ2pEQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1lBQ3hHQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ3ZHQSxJQUFJQSxDQUFDQSxVQUFVQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQ3hHQSxDQUFDQTtRQUFDQSxJQUFJQSxD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QUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQ2hEQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQ2hEQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQ2hEQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQ2hEQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQy9DQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1FBQ2hEQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLE1BQU1BLENBQUNBLEdBQUdBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO0lBRS9DQSxDQUFDQTtJQUVNakIsaURBQWdCQSxHQUF2QkEsVUFBd0JBLEtBQUtBLENBQVFBLE9BQURBLEFBQVFBLEVBQUVBLENBQVlBLEVBQUVBLENBQVlBLEVBQUVBLENBQVlBLEVBQUVBLENBQVlBO1FBQXREa0IsaUJBQVlBLEdBQVpBLEtBQVlBO1FBQUVBLGlCQUFZQSxHQUFaQSxLQUFZQTtRQUFFQSxpQkFBWUEsR0FBWkEsS0FBWUE7UUFBRUEsaUJBQVlBLEdBQVpBLEtBQVlBO1FBRW5HQSxJQUFJQSxNQUFNQSxHQUFrQkEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0Esc0JBQXNCQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQTtRQUNwRUEsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUN4Q0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUN4Q0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUN4Q0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtJQUN2Q0EsQ0FBQ0E7SUFDRmxCLDZCQUFDQTtBQUFEQSxDQW5RQSxBQW1RQ0EsRUFuUW9DLG1CQUFtQixFQW1RdkQ7QUFFRCxBQUFnQyxpQkFBdkIsc0JBQXNCLENBQUMiLCJmaWxlIjoiYW5pbWF0b3JzL2RhdGEvQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvcm9iYmF0ZW1hbi9XZWJzdG9ybVByb2plY3RzL2F3YXlqcy1zdGFnZWdsLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBbmltYXRpb25Ob2RlQmFzZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9hbmltYXRvcnMvbm9kZXMvQW5pbWF0aW9uTm9kZUJhc2VcIik7XG5pbXBvcnQgTWF0cml4M0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9nZW9tL01hdHJpeDNEXCIpO1xuXG5pbXBvcnQgU2hhZGVyUmVnaXN0ZXJDYWNoZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9tYXRlcmlhbHMvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJDYWNoZVwiKTtcbmltcG9ydCBTaGFkZXJSZWdpc3RlckVsZW1lbnRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL21hdGVyaWFscy9jb21waWxhdGlvbi9TaGFkZXJSZWdpc3RlckVsZW1lbnRcIik7XG5cblxuLyoqXG4gKiAuLi5cbiAqL1xuY2xhc3MgQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZSBleHRlbmRzIFNoYWRlclJlZ2lzdGVyQ2FjaGVcbntcblx0Ly92ZXJ0ZXhcblx0cHVibGljIHBvc2l0aW9uQXR0cmlidXRlOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0cHVibGljIHV2QXR0cmlidXRlOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0cHVibGljIHBvc2l0aW9uVGFyZ2V0OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0cHVibGljIHNjYWxlQW5kUm90YXRlVGFyZ2V0OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0cHVibGljIHZlbG9jaXR5VGFyZ2V0OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0cHVibGljIHZlcnRleFRpbWU6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgdmVydGV4TGlmZTpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdHB1YmxpYyB2ZXJ0ZXhaZXJvQ29uc3Q6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgdmVydGV4T25lQ29uc3Q6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgdmVydGV4VHdvQ29uc3Q6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgdXZUYXJnZXQ6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgY29sb3JBZGRUYXJnZXQ6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgY29sb3JNdWxUYXJnZXQ6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHQvL3Zhcnlcblx0cHVibGljIGNvbG9yQWRkVmFyeTpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdHB1YmxpYyBjb2xvck11bFZhcnk6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXG5cdC8vZnJhZ21lbnRcblxuXHRwdWJsaWMgdXZWYXI6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXG5cdC8vdGhlc2UgYXJlIHRhcmdldHMgb25seSBuZWVkIHRvIHJvdGF0ZSAoIG5vcm1hbCBhbmQgdGFuZ2VudCApXG5cdHB1YmxpYyByb3RhdGlvblJlZ2lzdGVyczpBcnJheTxTaGFkZXJSZWdpc3RlckVsZW1lbnQ+O1xuXG5cdHB1YmxpYyBuZWVkRnJhZ21lbnRBbmltYXRpb246Ym9vbGVhbjtcblx0cHVibGljIG5lZWRVVkFuaW1hdGlvbjpib29sZWFuO1xuXG5cdHB1YmxpYyBzb3VyY2VSZWdpc3RlcnM6QXJyYXk8c3RyaW5nPjtcblx0cHVibGljIHRhcmdldFJlZ2lzdGVyczpBcnJheTxzdHJpbmc+O1xuXG5cdHByaXZhdGUgaW5kZXhEaWN0aW9uYXJ5Ok9iamVjdCA9IG5ldyBPYmplY3QoKTtcblxuXHQvL3NldCB0cnVlIGlmIGhhcyBhbiBub2RlIHdoaWNoIHdpbGwgY2hhbmdlIFVWXG5cdHB1YmxpYyBoYXNVVk5vZGU6Ym9vbGVhbjtcblx0Ly9zZXQgaWYgdGhlIG90aGVyIG5vZGVzIG5lZWQgdG8gYWNjZXNzIHRoZSB2ZWxvY2l0eVxuXHRwdWJsaWMgbmVlZFZlbG9jaXR5OmJvb2xlYW47XG5cdC8vc2V0IGlmIGhhcyBhIGJpbGxib2FyZCBub2RlLlxuXHRwdWJsaWMgaGFzQmlsbGJvYXJkOmJvb2xlYW47XG5cdC8vc2V0IGlmIGhhcyBhbiBub2RlIHdoaWNoIHdpbGwgYXBwbHkgY29sb3IgbXVsdGlwbGUgb3BlcmF0aW9uXG5cdHB1YmxpYyBoYXNDb2xvck11bE5vZGU6Ym9vbGVhbjtcblx0Ly9zZXQgaWYgaGFzIGFuIG5vZGUgd2hpY2ggd2lsbCBhcHBseSBjb2xvciBhZGQgb3BlcmF0aW9uXG5cdHB1YmxpYyBoYXNDb2xvckFkZE5vZGU6Ym9vbGVhbjtcblxuXHRjb25zdHJ1Y3Rvcihwcm9maWxlOnN0cmluZylcblx0e1xuXHRcdHN1cGVyKHByb2ZpbGUpO1xuXHR9XG5cblx0cHVibGljIHJlc2V0KClcblx0e1xuXHRcdHN1cGVyLnJlc2V0KCk7XG5cblx0XHR0aGlzLnJvdGF0aW9uUmVnaXN0ZXJzID0gbmV3IEFycmF5PFNoYWRlclJlZ2lzdGVyRWxlbWVudD4oKTtcblx0XHR0aGlzLnBvc2l0aW9uQXR0cmlidXRlID0gdGhpcy5nZXRSZWdpc3RlckZyb21TdHJpbmcodGhpcy5zb3VyY2VSZWdpc3RlcnNbMF0pO1xuXHRcdHRoaXMuc2NhbGVBbmRSb3RhdGVUYXJnZXQgPSB0aGlzLmdldFJlZ2lzdGVyRnJvbVN0cmluZyh0aGlzLnRhcmdldFJlZ2lzdGVyc1swXSk7XG5cdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMuc2NhbGVBbmRSb3RhdGVUYXJnZXQsIDEpO1xuXG5cdFx0Zm9yICh2YXIgaTpudW1iZXIgLyppbnQqLyA9IDE7IGkgPCB0aGlzLnRhcmdldFJlZ2lzdGVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGhpcy5yb3RhdGlvblJlZ2lzdGVycy5wdXNoKHRoaXMuZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nKHRoaXMudGFyZ2V0UmVnaXN0ZXJzW2ldKSk7XG5cdFx0XHR0aGlzLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5yb3RhdGlvblJlZ2lzdGVyc1tpIC0gMV0sIDEpO1xuXHRcdH1cblxuXHRcdHRoaXMuc2NhbGVBbmRSb3RhdGVUYXJnZXQgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMuc2NhbGVBbmRSb3RhdGVUYXJnZXQucmVnTmFtZSwgdGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldC5pbmRleCk7IC8vb25seSB1c2UgeHl6LCB3IGlzIHVzZWQgYXMgdmVydGV4TGlmZVxuXG5cdFx0Ly9hbGxvdCBjb25zdCByZWdpc3RlclxuXG5cdFx0dGhpcy52ZXJ0ZXhaZXJvQ29uc3QgPSB0aGlzLmdldEZyZWVWZXJ0ZXhDb25zdGFudCgpO1xuXHRcdHRoaXMudmVydGV4WmVyb0NvbnN0ID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnZlcnRleFplcm9Db25zdC5yZWdOYW1lLCB0aGlzLnZlcnRleFplcm9Db25zdC5pbmRleCwgMCk7XG5cdFx0dGhpcy52ZXJ0ZXhPbmVDb25zdCA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGhpcy52ZXJ0ZXhaZXJvQ29uc3QucmVnTmFtZSwgdGhpcy52ZXJ0ZXhaZXJvQ29uc3QuaW5kZXgsIDEpO1xuXHRcdHRoaXMudmVydGV4VHdvQ29uc3QgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMudmVydGV4WmVyb0NvbnN0LnJlZ05hbWUsIHRoaXMudmVydGV4WmVyb0NvbnN0LmluZGV4LCAyKTtcblxuXHRcdC8vYWxsb3QgdGVtcCByZWdpc3RlclxuXHRcdHRoaXMucG9zaXRpb25UYXJnZXQgPSB0aGlzLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCk7XG5cdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMucG9zaXRpb25UYXJnZXQsIDEpO1xuXHRcdHRoaXMucG9zaXRpb25UYXJnZXQgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMucG9zaXRpb25UYXJnZXQucmVnTmFtZSwgdGhpcy5wb3NpdGlvblRhcmdldC5pbmRleCk7XG5cblx0XHRpZiAodGhpcy5uZWVkVmVsb2NpdHkpIHtcblx0XHRcdHRoaXMudmVsb2NpdHlUYXJnZXQgPSB0aGlzLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCk7XG5cdFx0XHR0aGlzLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy52ZWxvY2l0eVRhcmdldCwgMSk7XG5cdFx0XHR0aGlzLnZlbG9jaXR5VGFyZ2V0ID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnZlbG9jaXR5VGFyZ2V0LnJlZ05hbWUsIHRoaXMudmVsb2NpdHlUYXJnZXQuaW5kZXgpO1xuXHRcdFx0dGhpcy52ZXJ0ZXhUaW1lID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnZlbG9jaXR5VGFyZ2V0LnJlZ05hbWUsIHRoaXMudmVsb2NpdHlUYXJnZXQuaW5kZXgsIDMpO1xuXHRcdFx0dGhpcy52ZXJ0ZXhMaWZlID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnBvc2l0aW9uVGFyZ2V0LnJlZ05hbWUsIHRoaXMucG9zaXRpb25UYXJnZXQuaW5kZXgsIDMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgdGVtcFRpbWU6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gdGhpcy5nZXRGcmVlVmVydGV4VmVjdG9yVGVtcCgpO1xuXHRcdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRlbXBUaW1lLCAxKTtcblx0XHRcdHRoaXMudmVydGV4VGltZSA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGVtcFRpbWUucmVnTmFtZSwgdGVtcFRpbWUuaW5kZXgsIDApO1xuXHRcdFx0dGhpcy52ZXJ0ZXhMaWZlID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0ZW1wVGltZS5yZWdOYW1lLCB0ZW1wVGltZS5pbmRleCwgMSk7XG5cdFx0fVxuXG5cdH1cblxuXHRwdWJsaWMgc2V0VVZTb3VyY2VBbmRUYXJnZXQoVVZBdHRyaWJ1dGU6c3RyaW5nLCBVVlZhcmluZzpzdHJpbmcpXG5cdHtcblx0XHR0aGlzLnV2VmFyID0gdGhpcy5nZXRSZWdpc3RlckZyb21TdHJpbmcoVVZWYXJpbmcpO1xuXHRcdHRoaXMudXZBdHRyaWJ1dGUgPSB0aGlzLmdldFJlZ2lzdGVyRnJvbVN0cmluZyhVVkF0dHJpYnV0ZSk7XG5cdFx0Ly91diBhY3Rpb24gaXMgcHJvY2Vzc2VkIGFmdGVyIG5vcm1hbCBhY3Rpb25zLHNvIHVzZSBvZmZzZXRUYXJnZXQgYXMgdXZUYXJnZXRcblx0XHR0aGlzLnV2VGFyZ2V0ID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnBvc2l0aW9uVGFyZ2V0LnJlZ05hbWUsIHRoaXMucG9zaXRpb25UYXJnZXQuaW5kZXgpO1xuXHR9XG5cblx0cHVibGljIHNldFJlZ2lzdGVySW5kZXgobm9kZTpBbmltYXRpb25Ob2RlQmFzZSwgcGFyYW1ldGVySW5kZXg6bnVtYmVyIC8qaW50Ki8sIHJlZ2lzdGVySW5kZXg6bnVtYmVyIC8qaW50Ki8pXG5cdHtcblx0XHQvLzggc2hvdWxkIGJlIGVub3VnaCBmb3IgYW55IG5vZGUuXG5cdFx0dmFyIHQ6QXJyYXk8bnVtYmVyPiAvKmludCovID0gdGhpcy5pbmRleERpY3Rpb25hcnlbbm9kZS5pZF07XG5cblx0XHRpZiAodCA9PSBudWxsKVxuXHRcdFx0dCA9IHRoaXMuaW5kZXhEaWN0aW9uYXJ5W25vZGUuaWRdID0gbmV3IEFycmF5PG51bWJlcj4oOCkgLyppbnQqLztcblxuXHRcdHRbcGFyYW1ldGVySW5kZXhdID0gcmVnaXN0ZXJJbmRleDtcblx0fVxuXG5cdHB1YmxpYyBnZXRSZWdpc3RlckluZGV4KG5vZGU6QW5pbWF0aW9uTm9kZUJhc2UsIHBhcmFtZXRlckluZGV4Om51bWJlciAvKmludCovKTpudW1iZXIgLyppbnQqL1xuXHR7XG5cdFx0cmV0dXJuICg8QXJyYXk8bnVtYmVyPj4gdGhpcy5pbmRleERpY3Rpb25hcnlbbm9kZS5pZF0pW3BhcmFtZXRlckluZGV4XTtcblx0fVxuXG5cdHB1YmxpYyBnZXRJbml0Q29kZSgpOnN0cmluZ1xuXHR7XG5cdFx0dmFyIGxlbjpudW1iZXIgLyppbnQqLyA9IHRoaXMuc291cmNlUmVnaXN0ZXJzLmxlbmd0aDtcblx0XHR2YXIgY29kZTpzdHJpbmcgPSBcIlwiO1xuXHRcdGZvciAodmFyIGk6bnVtYmVyIC8qaW50Ki8gPSAwOyBpIDwgbGVuOyBpKyspXG5cdFx0XHRjb2RlICs9IFwibW92IFwiICsgdGhpcy50YXJnZXRSZWdpc3RlcnNbaV0gKyBcIixcIiArIHRoaXMuc291cmNlUmVnaXN0ZXJzW2ldICsgXCJcXG5cIjtcblxuXHRcdGNvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLnBvc2l0aW9uVGFyZ2V0ICsgXCIueHl6LFwiICsgdGhpcy52ZXJ0ZXhaZXJvQ29uc3QudG9TdHJpbmcoKSArIFwiXFxuXCI7XG5cblx0XHRpZiAodGhpcy5uZWVkVmVsb2NpdHkpXG5cdFx0XHRjb2RlICs9IFwibW92IFwiICsgdGhpcy52ZWxvY2l0eVRhcmdldCArIFwiLnh5eixcIiArIHRoaXMudmVydGV4WmVyb0NvbnN0LnRvU3RyaW5nKCkgKyBcIlxcblwiO1xuXG5cdFx0cmV0dXJuIGNvZGU7XG5cdH1cblxuXHRwdWJsaWMgZ2V0Q29tYmluYXRpb25Db2RlKCk6c3RyaW5nXG5cdHtcblx0XHRyZXR1cm4gXCJhZGQgXCIgKyB0aGlzLnNjYWxlQW5kUm90YXRlVGFyZ2V0ICsgXCIueHl6LFwiICsgdGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldCArIFwiLnh5eixcIiArIHRoaXMucG9zaXRpb25UYXJnZXQgKyBcIi54eXpcXG5cIjtcblx0fVxuXG5cdHB1YmxpYyBpbml0Q29sb3JSZWdpc3RlcnMoKTpzdHJpbmdcblx0e1xuXHRcdHZhciBjb2RlOnN0cmluZyA9IFwiXCI7XG5cdFx0aWYgKHRoaXMuaGFzQ29sb3JNdWxOb2RlKSB7XG5cdFx0XHR0aGlzLmNvbG9yTXVsVGFyZ2V0ID0gdGhpcy5nZXRGcmVlVmVydGV4VmVjdG9yVGVtcCgpO1xuXHRcdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMuY29sb3JNdWxUYXJnZXQsIDEpO1xuXHRcdFx0dGhpcy5jb2xvck11bFZhcnkgPSB0aGlzLmdldEZyZWVWYXJ5aW5nKCk7XG5cdFx0XHRjb2RlICs9IFwibW92IFwiICsgdGhpcy5jb2xvck11bFRhcmdldCArIFwiLFwiICsgdGhpcy52ZXJ0ZXhPbmVDb25zdCArIFwiXFxuXCI7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmhhc0NvbG9yQWRkTm9kZSkge1xuXHRcdFx0dGhpcy5jb2xvckFkZFRhcmdldCA9IHRoaXMuZ2V0RnJlZVZlcnRleFZlY3RvclRlbXAoKTtcblx0XHRcdHRoaXMuYWRkVmVydGV4VGVtcFVzYWdlcyh0aGlzLmNvbG9yQWRkVGFyZ2V0LCAxKTtcblx0XHRcdHRoaXMuY29sb3JBZGRWYXJ5ID0gdGhpcy5nZXRGcmVlVmFyeWluZygpO1xuXHRcdFx0Y29kZSArPSBcIm1vdiBcIiArIHRoaXMuY29sb3JBZGRUYXJnZXQgKyBcIixcIiArIHRoaXMudmVydGV4WmVyb0NvbnN0ICsgXCJcXG5cIjtcblx0XHR9XG5cdFx0cmV0dXJuIGNvZGU7XG5cdH1cblxuXHRwdWJsaWMgZ2V0Q29sb3JQYXNzQ29kZSgpOnN0cmluZ1xuXHR7XG5cdFx0dmFyIGNvZGU6c3RyaW5nID0gXCJcIjtcblx0XHRpZiAodGhpcy5uZWVkRnJhZ21lbnRBbmltYXRpb24gJiYgKHRoaXMuaGFzQ29sb3JBZGROb2RlIHx8IHRoaXMuaGFzQ29sb3JNdWxOb2RlKSkge1xuXHRcdFx0aWYgKHRoaXMuaGFzQ29sb3JNdWxOb2RlKVxuXHRcdFx0XHRjb2RlICs9IFwibW92IFwiICsgdGhpcy5jb2xvck11bFZhcnkgKyBcIixcIiArIHRoaXMuY29sb3JNdWxUYXJnZXQgKyBcIlxcblwiO1xuXHRcdFx0aWYgKHRoaXMuaGFzQ29sb3JBZGROb2RlKVxuXHRcdFx0XHRjb2RlICs9IFwibW92IFwiICsgdGhpcy5jb2xvckFkZFZhcnkgKyBcIixcIiArIHRoaXMuY29sb3JBZGRUYXJnZXQgKyBcIlxcblwiO1xuXHRcdH1cblx0XHRyZXR1cm4gY29kZTtcblx0fVxuXG5cdHB1YmxpYyBnZXRDb2xvckNvbWJpbmF0aW9uQ29kZShzaGFkZWRUYXJnZXQ6c3RyaW5nKTpzdHJpbmdcblx0e1xuXHRcdHZhciBjb2RlOnN0cmluZyA9IFwiXCI7XG5cdFx0aWYgKHRoaXMubmVlZEZyYWdtZW50QW5pbWF0aW9uICYmICh0aGlzLmhhc0NvbG9yQWRkTm9kZSB8fCB0aGlzLmhhc0NvbG9yTXVsTm9kZSkpIHtcblx0XHRcdHZhciBjb2xvclRhcmdldDpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLmdldFJlZ2lzdGVyRnJvbVN0cmluZyhzaGFkZWRUYXJnZXQpO1xuXHRcdFx0dGhpcy5hZGRGcmFnbWVudFRlbXBVc2FnZXMoY29sb3JUYXJnZXQsIDEpO1xuXHRcdFx0aWYgKHRoaXMuaGFzQ29sb3JNdWxOb2RlKVxuXHRcdFx0XHRjb2RlICs9IFwibXVsIFwiICsgY29sb3JUYXJnZXQgKyBcIixcIiArIGNvbG9yVGFyZ2V0ICsgXCIsXCIgKyB0aGlzLmNvbG9yTXVsVmFyeSArIFwiXFxuXCI7XG5cdFx0XHRpZiAodGhpcy5oYXNDb2xvckFkZE5vZGUpXG5cdFx0XHRcdGNvZGUgKz0gXCJhZGQgXCIgKyBjb2xvclRhcmdldCArIFwiLFwiICsgY29sb3JUYXJnZXQgKyBcIixcIiArIHRoaXMuY29sb3JBZGRWYXJ5ICsgXCJcXG5cIjtcblx0XHR9XG5cdFx0cmV0dXJuIGNvZGU7XG5cdH1cblxuXHRwcml2YXRlIGdldFJlZ2lzdGVyRnJvbVN0cmluZyhjb2RlOnN0cmluZyk6U2hhZGVyUmVnaXN0ZXJFbGVtZW50XG5cdHtcblx0XHR2YXIgdGVtcDpBcnJheTxzdHJpbmc+ID0gY29kZS5zcGxpdCgvKFxcZCspLyk7XG5cdFx0cmV0dXJuIG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGVtcFswXSwgcGFyc2VJbnQodGVtcFsxXSkpO1xuXHR9XG5cblx0cHVibGljIHZlcnRleENvbnN0YW50RGF0YTpBcnJheTxudW1iZXI+ID0gbmV3IEFycmF5PG51bWJlcj4oKTtcblx0cHVibGljIGZyYWdtZW50Q29uc3RhbnREYXRhOkFycmF5PG51bWJlcj4gPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xuXG5cdHByaXZhdGUgX251bVZlcnRleENvbnN0YW50Om51bWJlciAvKmludCovO1xuXHRwcml2YXRlIF9udW1GcmFnbWVudENvbnN0YW50Om51bWJlciAvKmludCovO1xuXG5cdHB1YmxpYyBnZXQgbnVtVmVydGV4Q29uc3RhbnQoKTpudW1iZXIgLyppbnQqL1xuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX251bVZlcnRleENvbnN0YW50O1xuXHR9XG5cblx0cHVibGljIGdldCBudW1GcmFnbWVudENvbnN0YW50KCk6bnVtYmVyIC8qaW50Ki9cblx0e1xuXHRcdHJldHVybiB0aGlzLl9udW1GcmFnbWVudENvbnN0YW50O1xuXHR9XG5cblx0cHVibGljIHNldERhdGFMZW5ndGgoKVxuXHR7XG5cdFx0dGhpcy5fbnVtVmVydGV4Q29uc3RhbnQgPSB0aGlzLm51bVVzZWRWZXJ0ZXhDb25zdGFudHMgLSB0aGlzLnZlcnRleENvbnN0YW50T2Zmc2V0O1xuXHRcdHRoaXMuX251bUZyYWdtZW50Q29uc3RhbnQgPSB0aGlzLm51bVVzZWRGcmFnbWVudENvbnN0YW50cyAtIHRoaXMuZnJhZ21lbnRDb25zdGFudE9mZnNldDtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YS5sZW5ndGggPSB0aGlzLl9udW1WZXJ0ZXhDb25zdGFudCo0O1xuXHRcdHRoaXMuZnJhZ21lbnRDb25zdGFudERhdGEubGVuZ3RoID0gdGhpcy5fbnVtRnJhZ21lbnRDb25zdGFudCo0O1xuXHR9XG5cblx0cHVibGljIHNldFZlcnRleENvbnN0KGluZGV4Om51bWJlciAvKmludCovLCB4Om51bWJlciA9IDAsIHk6bnVtYmVyID0gMCwgejpudW1iZXIgPSAwLCB3Om51bWJlciA9IDApXG5cdHtcblx0XHR2YXIgX2luZGV4Om51bWJlciAvKmludCovID0gKGluZGV4IC0gdGhpcy52ZXJ0ZXhDb25zdGFudE9mZnNldCkqNDtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSB4O1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHk7XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gejtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXhdID0gdztcblx0fVxuXG5cdHB1YmxpYyBzZXRWZXJ0ZXhDb25zdEZyb21BcnJheShpbmRleDpudW1iZXIgLyppbnQqLywgZGF0YTpBcnJheTxudW1iZXI+KVxuXHR7XG5cdFx0dmFyIF9pbmRleDpudW1iZXIgLyppbnQqLyA9IChpbmRleCAtIHRoaXMudmVydGV4Q29uc3RhbnRPZmZzZXQpKjQ7XG5cdFx0Zm9yICh2YXIgaTpudW1iZXIgLyppbnQqLyA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKVxuXHRcdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gZGF0YVtpXTtcblx0fVxuXG5cdHB1YmxpYyBzZXRWZXJ0ZXhDb25zdEZyb21NYXRyaXgoaW5kZXg6bnVtYmVyIC8qaW50Ki8sIG1hdHJpeDpNYXRyaXgzRClcblx0e1xuXHRcdHZhciByYXdEYXRhOkFycmF5PG51bWJlcj4gPSBtYXRyaXgucmF3RGF0YTtcblx0XHR2YXIgX2luZGV4Om51bWJlciAvKmludCovID0gKGluZGV4IC0gdGhpcy52ZXJ0ZXhDb25zdGFudE9mZnNldCkqNDtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzBdO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbNF07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVs4XTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzEyXTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzFdO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbNV07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVs5XTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzEzXTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzJdO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbNl07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVsxMF07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVsxNF07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVszXTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzddO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMTFdO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleF0gPSByYXdEYXRhWzE1XTtcblxuXHR9XG5cblx0cHVibGljIHNldEZyYWdtZW50Q29uc3QoaW5kZXg6bnVtYmVyIC8qaW50Ki8sIHg6bnVtYmVyID0gMCwgeTpudW1iZXIgPSAwLCB6Om51bWJlciA9IDAsIHc6bnVtYmVyID0gMClcblx0e1xuXHRcdHZhciBfaW5kZXg6bnVtYmVyIC8qaW50Ki8gPSAoaW5kZXggLSB0aGlzLmZyYWdtZW50Q29uc3RhbnRPZmZzZXQpKjQ7XG5cdFx0dGhpcy5mcmFnbWVudENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSB4O1xuXHRcdHRoaXMuZnJhZ21lbnRDb25zdGFudERhdGFbX2luZGV4KytdID0geTtcblx0XHR0aGlzLmZyYWdtZW50Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHo7XG5cdFx0dGhpcy5mcmFnbWVudENvbnN0YW50RGF0YVtfaW5kZXhdID0gdztcblx0fVxufVxuXG5leHBvcnQgPSBBbmltYXRpb25SZWdpc3RlckNhY2hlOyJdfQ==