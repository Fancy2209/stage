var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var swfobject = require("awayjs-stagegl/lib/swfobject");
var Sampler = require("awayjs-stagegl/lib/aglsl/Sampler");
var ContextGLBase = require("awayjs-stagegl/lib/core/stagegl/ContextGLBase");
var ContextGLClearMask = require("awayjs-stagegl/lib/core/stagegl/ContextGLClearMask");
var ContextGLProgramType = require("awayjs-stagegl/lib/core/stagegl/ContextGLProgramType");
var CubeTextureFlash = require("awayjs-stagegl/lib/core/stagegl/CubeTextureFlash");
var IndexBufferFlash = require("awayjs-stagegl/lib/core/stagegl/IndexBufferFlash");
var OpCodes = require("awayjs-stagegl/lib/core/stagegl/OpCodes");
var ProgramFlash = require("awayjs-stagegl/lib/core/stagegl/ProgramFlash");
var TextureFlash = require("awayjs-stagegl/lib/core/stagegl/TextureFlash");
var VertexBufferFlash = require("awayjs-stagegl/lib/core/stagegl/VertexBufferFlash");
var ContextStage3D = (function (_super) {
    __extends(ContextStage3D, _super);
    //TODO: get rid of hack that fixes including definition file
    function ContextStage3D(container, stageIndex, callback, include) {
        _super.call(this, stageIndex);
        this._cmdStream = "";
        this._resources = new Array();
        var swfVersionStr = "11.0.0";
        // To use express install, set to playerProductInstall.swf, otherwise the empty string.
        var flashvars = {
            id: container.id
        };
        var params = {
            quality: "high",
            bgcolor: "#ffffff",
            allowscriptaccess: "sameDomain",
            allowfullscreen: "true",
            wmode: "direct"
        };
        this._errorCheckingEnabled = false;
        this._iDriverInfo = "Unknown";
        var attributes = {
            salign: "tl",
            id: container.id,
            name: container["name"] //TODO: needed?
        };
        this._oldCanvas = container.cloneNode(); // keep the old one to restore on dispose
        this._oldParent = container.parentNode;
        var context3dObj = this;
        ContextStage3D.contexts[container.id] = this;
        function callbackSWFObject(callbackInfo) {
            if (!callbackInfo.success)
                return;
            context3dObj._pContainer = callbackInfo.ref;
            context3dObj._iCallback = callback;
        }
        swfobject.embedSWF("../libs/molehill_js_flashbridge.swf", container.id, String(container.width), String(container.height), swfVersionStr, "", flashvars, params, attributes, callbackSWFObject);
    }
    Object.defineProperty(ContextStage3D.prototype, "container", {
        get: function () {
            return this._pContainer;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextStage3D.prototype, "driverInfo", {
        get: function () {
            return this._iDriverInfo;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextStage3D.prototype, "errorCheckingEnabled", {
        get: function () {
            return this._errorCheckingEnabled;
        },
        set: function (value) {
            if (this._errorCheckingEnabled == value)
                return;
            this._errorCheckingEnabled = value;
            this.addStream(String.fromCharCode(OpCodes.enableErrorChecking, value ? OpCodes.trueValue : OpCodes.falseValue));
            this.execute();
        },
        enumerable: true,
        configurable: true
    });
    ContextStage3D.prototype._iAddResource = function (resource) {
        this._resources.push(resource);
    };
    ContextStage3D.prototype._iRemoveResource = function (resource) {
        this._resources.splice(this._resources.indexOf(resource));
    };
    ContextStage3D.prototype.createTexture = function (width, height, format, optimizeForRenderToTexture, streamingLevels) {
        if (streamingLevels === void 0) { streamingLevels = 0; }
        //TODO:streaming
        return new TextureFlash(this, width, height, format, optimizeForRenderToTexture);
    };
    ContextStage3D.prototype.createCubeTexture = function (size, format, optimizeForRenderToTexture, streamingLevels) {
        if (streamingLevels === void 0) { streamingLevels = 0; }
        //TODO:streaming
        return new CubeTextureFlash(this, size, format, optimizeForRenderToTexture);
    };
    ContextStage3D.prototype.setTextureAt = function (sampler, texture) {
        if (texture) {
            this.addStream(String.fromCharCode(OpCodes.setTextureAt) + sampler + "," + texture.id + ",");
        }
        else {
            this.addStream(String.fromCharCode(OpCodes.clearTextureAt) + sampler.toString() + ",");
        }
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setSamplerStateAt = function (sampler, wrap, filter, mipfilter) {
        //nothing to do here
    };
    ContextStage3D.prototype.setStencilActions = function (triangleFace, compareMode, actionOnBothPass, actionOnDepthFail, actionOnDepthPassStencilFail) {
        if (triangleFace === void 0) { triangleFace = "frontAndBack"; }
        if (compareMode === void 0) { compareMode = "always"; }
        if (actionOnBothPass === void 0) { actionOnBothPass = "keep"; }
        if (actionOnDepthFail === void 0) { actionOnDepthFail = "keep"; }
        if (actionOnDepthPassStencilFail === void 0) { actionOnDepthPassStencilFail = "keep"; }
        this.addStream(String.fromCharCode(OpCodes.setStencilActions) + triangleFace + "$" + compareMode + "$" + actionOnBothPass + "$" + actionOnDepthFail + "$" + actionOnDepthPassStencilFail + "$");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setStencilReferenceValue = function (referenceValue, readMask, writeMask) {
        if (readMask === void 0) { readMask = 255; }
        if (writeMask === void 0) { writeMask = 255; }
        this.addStream(String.fromCharCode(OpCodes.setStencilReferenceValue, referenceValue + OpCodes.intMask, readMask + OpCodes.intMask, writeMask + OpCodes.intMask));
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setCulling = function (triangleFaceToCull, coordinateSystem) {
        if (coordinateSystem === void 0) { coordinateSystem = "leftHanded"; }
        //TODO implement coordinateSystem option
        this.addStream(String.fromCharCode(OpCodes.setCulling) + triangleFaceToCull + "$");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.drawTriangles = function (indexBuffer, firstIndex, numTriangles) {
        if (firstIndex === void 0) { firstIndex = 0; }
        if (numTriangles === void 0) { numTriangles = -1; }
        firstIndex = firstIndex || 0;
        if (!numTriangles || numTriangles < 0)
            numTriangles = indexBuffer.numIndices / 3;
        this.addStream(String.fromCharCode(OpCodes.drawTriangles, indexBuffer.id + OpCodes.intMask) + firstIndex + "," + numTriangles + ",");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setProgramConstantsFromMatrix = function (programType, firstRegister, matrix, transposedMatrix) {
        //this._gl.uniformMatrix4fv(this._gl.getUniformLocation(this._currentProgram.glProgram, this._uniformLocationNameDictionary[programType]), !transposedMatrix, new Float32Array(matrix.rawData));
        if (transposedMatrix === void 0) { transposedMatrix = false; }
        //TODO remove special case for WebGL matrix calls?
        var d = matrix.rawData;
        if (transposedMatrix) {
            this.setProgramConstantsFromArray(programType, firstRegister, [d[0], d[4], d[8], d[12]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 1, [d[1], d[5], d[9], d[13]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 2, [d[2], d[6], d[10], d[14]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 3, [d[3], d[7], d[11], d[15]], 1);
        }
        else {
            this.setProgramConstantsFromArray(programType, firstRegister, [d[0], d[1], d[2], d[3]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 1, [d[4], d[5], d[6], d[7]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 2, [d[8], d[9], d[10], d[11]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 3, [d[12], d[13], d[14], d[15]], 1);
        }
    };
    ContextStage3D.prototype.setProgramConstantsFromArray = function (programType, firstRegister, data, numRegisters) {
        if (numRegisters === void 0) { numRegisters = -1; }
        var startIndex;
        var target = (programType == ContextGLProgramType.VERTEX) ? OpCodes.trueValue : OpCodes.falseValue;
        for (var i = 0; i < numRegisters; i++) {
            startIndex = i * 4;
            this.addStream(String.fromCharCode(OpCodes.setProgramConstant, target, (firstRegister + i) + OpCodes.intMask) + data[startIndex] + "," + data[startIndex + 1] + "," + data[startIndex + 2] + "," + data[startIndex + 3] + ",");
            if (ContextStage3D.debug)
                this.execute();
        }
    };
    ContextStage3D.prototype.setProgram = function (program) {
        this.addStream(String.fromCharCode(OpCodes.setProgram, program.id + OpCodes.intMask));
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.present = function () {
        this.addStream(String.fromCharCode(OpCodes.present));
        this.execute();
    };
    ContextStage3D.prototype.clear = function (red, green, blue, alpha, depth, stencil, mask) {
        if (red === void 0) { red = 0; }
        if (green === void 0) { green = 0; }
        if (blue === void 0) { blue = 0; }
        if (alpha === void 0) { alpha = 1; }
        if (depth === void 0) { depth = 1; }
        if (stencil === void 0) { stencil = 0; }
        if (mask === void 0) { mask = ContextGLClearMask.ALL; }
        this.addStream(String.fromCharCode(OpCodes.clear) + red + "," + green + "," + blue + "," + alpha + "," + depth + "," + stencil + "," + mask + ",");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.createProgram = function () {
        return new ProgramFlash(this);
    };
    ContextStage3D.prototype.createVertexBuffer = function (numVertices, data32PerVertex) {
        return new VertexBufferFlash(this, numVertices, data32PerVertex);
    };
    ContextStage3D.prototype.createIndexBuffer = function (numIndices) {
        return new IndexBufferFlash(this, numIndices);
    };
    ContextStage3D.prototype.configureBackBuffer = function (width, height, antiAlias, enableDepthAndStencil) {
        if (enableDepthAndStencil === void 0) { enableDepthAndStencil = true; }
        _super.prototype.configureBackBuffer.call(this, width, height, antiAlias, enableDepthAndStencil);
        //TODO: add Anitalias setting
        this.addStream(String.fromCharCode(OpCodes.configureBackBuffer) + width + "," + height + ",");
    };
    ContextStage3D.prototype.drawToBitmapData = function (destination) {
        //TODO
    };
    ContextStage3D.prototype.setVertexBufferAt = function (index, buffer, bufferOffset, format) {
        if (bufferOffset === void 0) { bufferOffset = 0; }
        if (format === void 0) { format = null; }
        if (buffer) {
            this.addStream(String.fromCharCode(OpCodes.setVertexBufferAt, index + OpCodes.intMask) + buffer.id + "," + bufferOffset + "," + format + "$");
        }
        else {
            this.addStream(String.fromCharCode(OpCodes.clearVertexBufferAt, index + OpCodes.intMask));
        }
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setColorMask = function (red, green, blue, alpha) {
        this.addStream(String.fromCharCode(OpCodes.setColorMask, red ? OpCodes.trueValue : OpCodes.falseValue, green ? OpCodes.trueValue : OpCodes.falseValue, blue ? OpCodes.trueValue : OpCodes.falseValue, alpha ? OpCodes.trueValue : OpCodes.falseValue));
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setBlendFactors = function (sourceFactor, destinationFactor) {
        this.addStream(String.fromCharCode(OpCodes.setBlendFactors) + sourceFactor + "$" + destinationFactor + "$");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setRenderToTexture = function (target, enableDepthAndStencil, antiAlias, surfaceSelector) {
        if (enableDepthAndStencil === void 0) { enableDepthAndStencil = false; }
        if (antiAlias === void 0) { antiAlias = 0; }
        if (surfaceSelector === void 0) { surfaceSelector = 0; }
        if (target === null || target === undefined) {
            this.addStream(String.fromCharCode(OpCodes.clearRenderToTexture));
        }
        else {
            this.addStream(String.fromCharCode(OpCodes.setRenderToTexture, enableDepthAndStencil ? OpCodes.trueValue : OpCodes.falseValue) + target.id + "," + (antiAlias || 0) + ",");
        }
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setRenderToBackBuffer = function () {
        this.addStream(String.fromCharCode(OpCodes.clearRenderToTexture));
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setScissorRectangle = function (rectangle) {
        if (rectangle) {
            this.addStream(String.fromCharCode(OpCodes.setScissorRect) + rectangle.x + "," + rectangle.y + "," + rectangle.width + "," + rectangle.height + ",");
        }
        else {
            this.addStream(String.fromCharCode(OpCodes.clearScissorRect));
        }
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setDepthTest = function (depthMask, passCompareMode) {
        this.addStream(String.fromCharCode(OpCodes.setDepthTest, depthMask ? OpCodes.trueValue : OpCodes.falseValue) + passCompareMode + "$");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.dispose = function () {
        if (this._pContainer == null)
            return;
        console.log("Context3D dispose, releasing " + this._resources.length + " resources.");
        while (this._resources.length)
            this._resources[0].dispose();
        if (this._pContainer) {
            // encode command
            this.addStream(String.fromCharCode(OpCodes.disposeContext));
            this.execute();
            swfobject.removeSWF(this._oldCanvas.id);
            if (this._oldCanvas && this._oldParent) {
                this._oldParent.appendChild(this._oldCanvas);
                this._oldParent = null;
            }
            this._pContainer = null;
        }
        this._oldCanvas = null;
    };
    ContextStage3D.prototype.addStream = function (stream) {
        this._cmdStream += stream;
    };
    ContextStage3D.prototype.execute = function () {
        if (ContextStage3D.logStream)
            console.log(this._cmdStream);
        var result = this._pContainer["CallFunction"]("<invoke name=\"execStage3dOpStream\" returntype=\"javascript\"><arguments><string>" + this._cmdStream + "</string></arguments></invoke>");
        if (Number(result) <= -3)
            throw "Exec stream failed";
        this._cmdStream = "";
        return Number(result);
    };
    ContextStage3D.contexts = new Object();
    ContextStage3D.maxvertexconstants = 128;
    ContextStage3D.maxfragconstants = 28;
    ContextStage3D.maxtemp = 8;
    ContextStage3D.maxstreams = 8;
    ContextStage3D.maxtextures = 8;
    ContextStage3D.defaultsampler = new Sampler();
    ContextStage3D.debug = false;
    ContextStage3D.logStream = false;
    return ContextStage3D;
})(ContextGLBase);
/**
* global function for flash callback
*/
function mountain_js_context_available(id, driverInfo) {
    var ctx = ContextStage3D.contexts[id];
    if (ctx._iCallback) {
        ctx._iDriverInfo = driverInfo;
        // get out of the current JS stack frame and call back from flash player
        var timeOutId = window.setTimeout(function () {
            window.clearTimeout(timeOutId);
            try {
                ctx._iCallback(ctx);
            }
            catch (e) {
                console.log("Callback failed during flash initialization with '" + e.toString() + "'");
            }
        }, 1);
    }
}
module.exports = ContextStage3D;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvc3RhZ2VnbC9jb250ZXh0c3RhZ2UzZC50cyJdLCJuYW1lcyI6WyJDb250ZXh0U3RhZ2UzRCIsIkNvbnRleHRTdGFnZTNELmNvbnN0cnVjdG9yIiwiQ29udGV4dFN0YWdlM0QuY29uc3RydWN0b3IuY2FsbGJhY2tTV0ZPYmplY3QiLCJDb250ZXh0U3RhZ2UzRC5jb250YWluZXIiLCJDb250ZXh0U3RhZ2UzRC5kcml2ZXJJbmZvIiwiQ29udGV4dFN0YWdlM0QuZXJyb3JDaGVja2luZ0VuYWJsZWQiLCJDb250ZXh0U3RhZ2UzRC5faUFkZFJlc291cmNlIiwiQ29udGV4dFN0YWdlM0QuX2lSZW1vdmVSZXNvdXJjZSIsIkNvbnRleHRTdGFnZTNELmNyZWF0ZVRleHR1cmUiLCJDb250ZXh0U3RhZ2UzRC5jcmVhdGVDdWJlVGV4dHVyZSIsIkNvbnRleHRTdGFnZTNELnNldFRleHR1cmVBdCIsIkNvbnRleHRTdGFnZTNELnNldFNhbXBsZXJTdGF0ZUF0IiwiQ29udGV4dFN0YWdlM0Quc2V0U3RlbmNpbEFjdGlvbnMiLCJDb250ZXh0U3RhZ2UzRC5zZXRTdGVuY2lsUmVmZXJlbmNlVmFsdWUiLCJDb250ZXh0U3RhZ2UzRC5zZXRDdWxsaW5nIiwiQ29udGV4dFN0YWdlM0QuZHJhd1RyaWFuZ2xlcyIsIkNvbnRleHRTdGFnZTNELnNldFByb2dyYW1Db25zdGFudHNGcm9tTWF0cml4IiwiQ29udGV4dFN0YWdlM0Quc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21BcnJheSIsIkNvbnRleHRTdGFnZTNELnNldFByb2dyYW0iLCJDb250ZXh0U3RhZ2UzRC5wcmVzZW50IiwiQ29udGV4dFN0YWdlM0QuY2xlYXIiLCJDb250ZXh0U3RhZ2UzRC5jcmVhdGVQcm9ncmFtIiwiQ29udGV4dFN0YWdlM0QuY3JlYXRlVmVydGV4QnVmZmVyIiwiQ29udGV4dFN0YWdlM0QuY3JlYXRlSW5kZXhCdWZmZXIiLCJDb250ZXh0U3RhZ2UzRC5jb25maWd1cmVCYWNrQnVmZmVyIiwiQ29udGV4dFN0YWdlM0QuZHJhd1RvQml0bWFwRGF0YSIsIkNvbnRleHRTdGFnZTNELnNldFZlcnRleEJ1ZmZlckF0IiwiQ29udGV4dFN0YWdlM0Quc2V0Q29sb3JNYXNrIiwiQ29udGV4dFN0YWdlM0Quc2V0QmxlbmRGYWN0b3JzIiwiQ29udGV4dFN0YWdlM0Quc2V0UmVuZGVyVG9UZXh0dXJlIiwiQ29udGV4dFN0YWdlM0Quc2V0UmVuZGVyVG9CYWNrQnVmZmVyIiwiQ29udGV4dFN0YWdlM0Quc2V0U2Npc3NvclJlY3RhbmdsZSIsIkNvbnRleHRTdGFnZTNELnNldERlcHRoVGVzdCIsIkNvbnRleHRTdGFnZTNELmRpc3Bvc2UiLCJDb250ZXh0U3RhZ2UzRC5hZGRTdHJlYW0iLCJDb250ZXh0U3RhZ2UzRC5leGVjdXRlIiwibW91bnRhaW5fanNfY29udGV4dF9hdmFpbGFibGUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBLElBQU8sU0FBUyxXQUFlLDhCQUE4QixDQUFDLENBQUM7QUFDL0QsSUFBTyxPQUFPLFdBQWdCLGtDQUFrQyxDQUFDLENBQUM7QUFDbEUsSUFBTyxhQUFhLFdBQWMsK0NBQStDLENBQUMsQ0FBQztBQUNuRixJQUFPLGtCQUFrQixXQUFhLG9EQUFvRCxDQUFDLENBQUM7QUFDNUYsSUFBTyxvQkFBb0IsV0FBYSxzREFBc0QsQ0FBQyxDQUFDO0FBQ2hHLElBQU8sZ0JBQWdCLFdBQWMsa0RBQWtELENBQUMsQ0FBQztBQUV6RixJQUFPLGdCQUFnQixXQUFjLGtEQUFrRCxDQUFDLENBQUM7QUFDekYsSUFBTyxPQUFPLFdBQWdCLHlDQUF5QyxDQUFDLENBQUM7QUFDekUsSUFBTyxZQUFZLFdBQWUsOENBQThDLENBQUMsQ0FBQztBQUNsRixJQUFPLFlBQVksV0FBZSw4Q0FBOEMsQ0FBQyxDQUFDO0FBRWxGLElBQU8saUJBQWlCLFdBQWEsbURBQW1ELENBQUMsQ0FBQztBQUUxRixJQUFNLGNBQWM7SUFBU0EsVUFBdkJBLGNBQWNBLFVBQXNCQTtJQWtEekNBLDREQUE0REE7SUFDNURBLFNBbkRLQSxjQUFj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REE7WUFDOUNBLENBQUNBLEdBQVlBLE1BQU1BLENBQUNBLE9BQU9BLENBQUNBO1FBQ2hDQSxFQUFFQSxDQUFDQSxDQUFDQSxnQkFBZ0JBLENBQUNBLENBQUNBLENBQUNBO1lBQ3RCQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQzlGQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ2xHQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ25HQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQ3BHQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNQQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQzdGQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ2pHQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ25HQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNB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QSxDQUFDQSxDQUFDQTtJQUNyREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDcEJBLEdBQUdBLENBQUNBLFlBQVlBLEdBQUdBLFVBQVVBLENBQUNBO1FBQzlCQSxBQUNBQSx3RUFEd0VBO1lBQ3BFQSxTQUFTQSxHQUFHQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQTtZQUVqQyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQy9CLElBQUEsQ0FBQztnQkFDQSxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLENBQUU7WUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBVCxDQUFDO2dCQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0RBQW9ELEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQ3hGLENBQUM7UUFDRixDQUFDLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO0lBQ1BBLENBQUNBO0FBQ0ZBLENBQUNBO0FBckJELGlCQUFTLGNBQWMsQ0FBQyIsImZpbGUiOiJjb3JlL3N0YWdlZ2wvQ29udGV4dFN0YWdlM0QuanMiLCJzb3VyY2VSb290IjoiL1VzZXJzL3JvYmJhdGVtYW4vV2Vic3Rvcm1Qcm9qZWN0cy9hd2F5anMtc3RhZ2VnbC8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQml0bWFwRGF0YVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9iYXNlL0JpdG1hcERhdGFcIik7XG5pbXBvcnQgTWF0cml4M0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9nZW9tL01hdHJpeDNEXCIpO1xuaW1wb3J0IFJlY3RhbmdsZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9nZW9tL1JlY3RhbmdsZVwiKTtcblxuaW1wb3J0IHN3Zm9iamVjdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvc3dmb2JqZWN0XCIpO1xuaW1wb3J0IFNhbXBsZXJcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYWdsc2wvU2FtcGxlclwiKTtcbmltcG9ydCBDb250ZXh0R0xCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9zdGFnZWdsL0NvbnRleHRHTEJhc2VcIik7XG5pbXBvcnQgQ29udGV4dEdMQ2xlYXJNYXNrXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvc3RhZ2VnbC9Db250ZXh0R0xDbGVhck1hc2tcIik7XG5pbXBvcnQgQ29udGV4dEdMUHJvZ3JhbVR5cGVcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9zdGFnZWdsL0NvbnRleHRHTFByb2dyYW1UeXBlXCIpO1xuaW1wb3J0IEN1YmVUZXh0dXJlRmxhc2hcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9jb3JlL3N0YWdlZ2wvQ3ViZVRleHR1cmVGbGFzaFwiKTtcbmltcG9ydCBJQ29udGV4dFN0YWdlR0xcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9jb3JlL3N0YWdlZ2wvSUNvbnRleHRTdGFnZUdMXCIpO1xuaW1wb3J0IEluZGV4QnVmZmVyRmxhc2hcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9jb3JlL3N0YWdlZ2wvSW5kZXhCdWZmZXJGbGFzaFwiKTtcbmltcG9ydCBPcENvZGVzXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvc3RhZ2VnbC9PcENvZGVzXCIpO1xuaW1wb3J0IFByb2dyYW1GbGFzaFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9zdGFnZWdsL1Byb2dyYW1GbGFzaFwiKTtcbmltcG9ydCBUZXh0dXJlRmxhc2hcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvc3RhZ2VnbC9UZXh0dXJlRmxhc2hcIik7XG5pbXBvcnQgUmVzb3VyY2VCYXNlRmxhc2hcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9zdGFnZWdsL1Jlc291cmNlQmFzZUZsYXNoXCIpO1xuaW1wb3J0IFZlcnRleEJ1ZmZlckZsYXNoXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvc3RhZ2VnbC9WZXJ0ZXhCdWZmZXJGbGFzaFwiKTtcblxuY2xhc3MgQ29udGV4dFN0YWdlM0QgZXh0ZW5kcyBDb250ZXh0R0xCYXNlIGltcGxlbWVudHMgSUNvbnRleHRTdGFnZUdMXG57XG5cdHB1YmxpYyBzdGF0aWMgY29udGV4dHM6T2JqZWN0ID0gbmV3IE9iamVjdCgpO1xuXHRwdWJsaWMgc3RhdGljIG1heHZlcnRleGNvbnN0YW50czpudW1iZXIgPSAxMjg7XG5cdHB1YmxpYyBzdGF0aWMgbWF4ZnJhZ2NvbnN0YW50czpudW1iZXIgPSAyODtcblx0cHVibGljIHN0YXRpYyBtYXh0ZW1wOm51bWJlciA9IDg7XG5cdHB1YmxpYyBzdGF0aWMgbWF4c3RyZWFtczpudW1iZXIgPSA4O1xuXHRwdWJsaWMgc3RhdGljIG1heHRleHR1cmVzOm51bWJlciA9IDg7XG5cdHB1YmxpYyBzdGF0aWMgZGVmYXVsdHNhbXBsZXIgPSBuZXcgU2FtcGxlcigpO1xuXG5cdHB1YmxpYyBfaURyaXZlckluZm87XG5cblx0cHJpdmF0ZSBfY21kU3RyZWFtOnN0cmluZyA9IFwiXCI7XG5cdHByaXZhdGUgX2Vycm9yQ2hlY2tpbmdFbmFibGVkOmJvb2xlYW47XG5cdHByaXZhdGUgX3Jlc291cmNlczpBcnJheTxSZXNvdXJjZUJhc2VGbGFzaD47XG5cdHByaXZhdGUgX29sZENhbnZhczpIVE1MQ2FudmFzRWxlbWVudDtcblx0cHJpdmF0ZSBfb2xkUGFyZW50OkhUTUxFbGVtZW50O1xuXG5cblx0cHVibGljIHN0YXRpYyBkZWJ1Zzpib29sZWFuID0gZmFsc2U7XG5cdHB1YmxpYyBzdGF0aWMgbG9nU3RyZWFtOmJvb2xlYW4gPSBmYWxzZTtcblxuXHRwdWJsaWMgX2lDYWxsYmFjazooY29udGV4dDpJQ29udGV4dFN0YWdlR0wpID0+IHZvaWQ7XG5cblx0cHVibGljIGdldCBjb250YWluZXIoKTpIVE1MRWxlbWVudFxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX3BDb250YWluZXI7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IGRyaXZlckluZm8oKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX2lEcml2ZXJJbmZvO1xuXHR9XG5cblx0cHVibGljIGdldCBlcnJvckNoZWNraW5nRW5hYmxlZCgpOmJvb2xlYW5cblx0e1xuXHRcdHJldHVybiB0aGlzLl9lcnJvckNoZWNraW5nRW5hYmxlZDtcblx0fVxuXG5cdHB1YmxpYyBzZXQgZXJyb3JDaGVja2luZ0VuYWJsZWQodmFsdWU6Ym9vbGVhbilcblx0e1xuXHRcdGlmICh0aGlzLl9lcnJvckNoZWNraW5nRW5hYmxlZCA9PSB2YWx1ZSlcblx0XHRcdHJldHVybjtcblxuXHRcdHRoaXMuX2Vycm9yQ2hlY2tpbmdFbmFibGVkID0gdmFsdWU7XG5cblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuZW5hYmxlRXJyb3JDaGVja2luZywgdmFsdWU/IE9wQ29kZXMudHJ1ZVZhbHVlIDogT3BDb2Rlcy5mYWxzZVZhbHVlKSk7XG5cdFx0dGhpcy5leGVjdXRlKCk7XG5cdH1cblxuXHQvL1RPRE86IGdldCByaWQgb2YgaGFjayB0aGF0IGZpeGVzIGluY2x1ZGluZyBkZWZpbml0aW9uIGZpbGVcblx0Y29uc3RydWN0b3IoY29udGFpbmVyOkhUTUxDYW52YXNFbGVtZW50LCBzdGFnZUluZGV4Om51bWJlciwgY2FsbGJhY2s6KGNvbnRleHQ6SUNvbnRleHRTdGFnZUdMKSA9PiB2b2lkLCBpbmNsdWRlPzpTYW1wbGVyKVxuXHR7XG5cdFx0c3VwZXIoc3RhZ2VJbmRleCk7XG5cblx0XHR0aGlzLl9yZXNvdXJjZXMgPSBuZXcgQXJyYXk8UmVzb3VyY2VCYXNlRmxhc2g+KCk7XG5cblx0XHR2YXIgc3dmVmVyc2lvblN0ciA9IFwiMTEuMC4wXCI7XG5cblx0XHQvLyBUbyB1c2UgZXhwcmVzcyBpbnN0YWxsLCBzZXQgdG8gcGxheWVyUHJvZHVjdEluc3RhbGwuc3dmLCBvdGhlcndpc2UgdGhlIGVtcHR5IHN0cmluZy5cblx0XHR2YXIgZmxhc2h2YXJzID0ge1xuXHRcdFx0aWQ6Y29udGFpbmVyLmlkXG5cdFx0fTtcblxuXHRcdHZhciBwYXJhbXMgPSB7XG5cdFx0XHRxdWFsaXR5OlwiaGlnaFwiLFxuXHRcdFx0Ymdjb2xvcjpcIiNmZmZmZmZcIixcblx0XHRcdGFsbG93c2NyaXB0YWNjZXNzOlwic2FtZURvbWFpblwiLFxuXHRcdFx0YWxsb3dmdWxsc2NyZWVuOlwidHJ1ZVwiLFxuXHRcdFx0d21vZGU6XCJkaXJlY3RcIlxuXHRcdH07XG5cblx0XHR0aGlzLl9lcnJvckNoZWNraW5nRW5hYmxlZCA9IGZhbHNlO1xuXHRcdHRoaXMuX2lEcml2ZXJJbmZvID0gXCJVbmtub3duXCI7XG5cblx0XHR2YXIgYXR0cmlidXRlcyA9IHtcblx0XHRcdHNhbGlnbjpcInRsXCIsXG5cdFx0XHRpZDpjb250YWluZXIuaWQsXG5cdFx0XHRuYW1lOmNvbnRhaW5lcltcIm5hbWVcIl0gLy9UT0RPOiBuZWVkZWQ/XG5cdFx0fTtcblxuXHRcdHRoaXMuX29sZENhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD4gY29udGFpbmVyLmNsb25lTm9kZSgpOyAvLyBrZWVwIHRoZSBvbGQgb25lIHRvIHJlc3RvcmUgb24gZGlzcG9zZVxuXHRcdHRoaXMuX29sZFBhcmVudCA9IDxIVE1MRWxlbWVudD4gY29udGFpbmVyLnBhcmVudE5vZGU7XG5cblx0XHR2YXIgY29udGV4dDNkT2JqID0gdGhpcztcblx0XHRDb250ZXh0U3RhZ2UzRC5jb250ZXh0c1tjb250YWluZXIuaWRdID0gdGhpcztcblxuXHRcdGZ1bmN0aW9uIGNhbGxiYWNrU1dGT2JqZWN0KGNhbGxiYWNrSW5mbylcblx0XHR7XG5cdFx0XHRpZiAoIWNhbGxiYWNrSW5mby5zdWNjZXNzKVxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdGNvbnRleHQzZE9iai5fcENvbnRhaW5lciA9IGNhbGxiYWNrSW5mby5yZWY7XG5cdFx0XHRjb250ZXh0M2RPYmouX2lDYWxsYmFjayA9IGNhbGxiYWNrO1xuXHRcdH1cblxuXHRcdHN3Zm9iamVjdC5lbWJlZFNXRihcIi4uL2xpYnMvbW9sZWhpbGxfanNfZmxhc2hicmlkZ2Uuc3dmXCIsIGNvbnRhaW5lci5pZCwgU3RyaW5nKGNvbnRhaW5lci53aWR0aCksIFN0cmluZyhjb250YWluZXIuaGVpZ2h0KSwgc3dmVmVyc2lvblN0ciwgXCJcIiwgZmxhc2h2YXJzLCBwYXJhbXMsIGF0dHJpYnV0ZXMsIGNhbGxiYWNrU1dGT2JqZWN0KTtcblx0fVxuXG5cdHB1YmxpYyBfaUFkZFJlc291cmNlKHJlc291cmNlOlJlc291cmNlQmFzZUZsYXNoKVxuXHR7XG5cdFx0dGhpcy5fcmVzb3VyY2VzLnB1c2gocmVzb3VyY2UpO1xuXHR9XG5cblx0cHVibGljIF9pUmVtb3ZlUmVzb3VyY2UocmVzb3VyY2U6UmVzb3VyY2VCYXNlRmxhc2gpXG5cdHtcblx0XHR0aGlzLl9yZXNvdXJjZXMuc3BsaWNlKHRoaXMuX3Jlc291cmNlcy5pbmRleE9mKHJlc291cmNlKSk7XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlVGV4dHVyZSh3aWR0aDpudW1iZXIsIGhlaWdodDpudW1iZXIsIGZvcm1hdDpzdHJpbmcsIG9wdGltaXplRm9yUmVuZGVyVG9UZXh0dXJlOmJvb2xlYW4sIHN0cmVhbWluZ0xldmVsczpudW1iZXIgPSAwKTpUZXh0dXJlRmxhc2hcblx0e1xuXHRcdC8vVE9ETzpzdHJlYW1pbmdcblx0XHRyZXR1cm4gbmV3IFRleHR1cmVGbGFzaCh0aGlzLCB3aWR0aCwgaGVpZ2h0LCBmb3JtYXQsIG9wdGltaXplRm9yUmVuZGVyVG9UZXh0dXJlKTtcblx0fVxuXG5cdHB1YmxpYyBjcmVhdGVDdWJlVGV4dHVyZShzaXplOm51bWJlciwgZm9ybWF0OnN0cmluZywgb3B0aW1pemVGb3JSZW5kZXJUb1RleHR1cmU6Ym9vbGVhbiwgc3RyZWFtaW5nTGV2ZWxzOm51bWJlciA9IDApOkN1YmVUZXh0dXJlRmxhc2hcblx0e1xuXHRcdC8vVE9ETzpzdHJlYW1pbmdcblx0XHRyZXR1cm4gbmV3IEN1YmVUZXh0dXJlRmxhc2godGhpcywgc2l6ZSwgZm9ybWF0LCBvcHRpbWl6ZUZvclJlbmRlclRvVGV4dHVyZSk7XG5cdH1cblxuXG5cdHB1YmxpYyBzZXRUZXh0dXJlQXQoc2FtcGxlcjpudW1iZXIsIHRleHR1cmU6UmVzb3VyY2VCYXNlRmxhc2gpXG5cdHtcblx0XHRpZiAodGV4dHVyZSkge1xuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldFRleHR1cmVBdCkgKyBzYW1wbGVyICsgXCIsXCIgKyB0ZXh0dXJlLmlkICsgXCIsXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuY2xlYXJUZXh0dXJlQXQpICsgc2FtcGxlci50b1N0cmluZygpICsgXCIsXCIpO1xuXHRcdH1cblxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1Zylcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xuXHR9XG5cblx0cHVibGljIHNldFNhbXBsZXJTdGF0ZUF0KHNhbXBsZXI6bnVtYmVyLCB3cmFwOnN0cmluZywgZmlsdGVyOnN0cmluZywgbWlwZmlsdGVyOnN0cmluZyk6dm9pZFxuXHR7XG5cdFx0Ly9ub3RoaW5nIHRvIGRvIGhlcmVcblx0fVxuXG5cdHB1YmxpYyBzZXRTdGVuY2lsQWN0aW9ucyh0cmlhbmdsZUZhY2U6c3RyaW5nID0gXCJmcm9udEFuZEJhY2tcIiwgY29tcGFyZU1vZGU6c3RyaW5nID0gXCJhbHdheXNcIiwgYWN0aW9uT25Cb3RoUGFzczpzdHJpbmcgPSBcImtlZXBcIiwgYWN0aW9uT25EZXB0aEZhaWw6c3RyaW5nID0gXCJrZWVwXCIsIGFjdGlvbk9uRGVwdGhQYXNzU3RlbmNpbEZhaWw6c3RyaW5nID0gXCJrZWVwXCIpXG5cdHtcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0U3RlbmNpbEFjdGlvbnMpICsgdHJpYW5nbGVGYWNlICsgXCIkXCIgKyBjb21wYXJlTW9kZSArIFwiJFwiICsgYWN0aW9uT25Cb3RoUGFzcyArIFwiJFwiICsgYWN0aW9uT25EZXB0aEZhaWwgKyBcIiRcIiArIGFjdGlvbk9uRGVwdGhQYXNzU3RlbmNpbEZhaWwgKyBcIiRcIik7XG5cblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXG5cdFx0XHR0aGlzLmV4ZWN1dGUoKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRTdGVuY2lsUmVmZXJlbmNlVmFsdWUocmVmZXJlbmNlVmFsdWU6bnVtYmVyLCByZWFkTWFzazpudW1iZXIgPSAyNTUsIHdyaXRlTWFzazpudW1iZXIgPSAyNTUpXG5cdHtcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0U3RlbmNpbFJlZmVyZW5jZVZhbHVlLCByZWZlcmVuY2VWYWx1ZSArIE9wQ29kZXMuaW50TWFzaywgcmVhZE1hc2sgKyBPcENvZGVzLmludE1hc2ssIHdyaXRlTWFzayArIE9wQ29kZXMuaW50TWFzaykpO1xuXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmRlYnVnKVxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XG5cdH1cblxuXHRwdWJsaWMgc2V0Q3VsbGluZyh0cmlhbmdsZUZhY2VUb0N1bGw6c3RyaW5nLCBjb29yZGluYXRlU3lzdGVtOnN0cmluZyA9IFwibGVmdEhhbmRlZFwiKVxuXHR7XG5cdFx0Ly9UT0RPIGltcGxlbWVudCBjb29yZGluYXRlU3lzdGVtIG9wdGlvblxuXHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5zZXRDdWxsaW5nKSArIHRyaWFuZ2xlRmFjZVRvQ3VsbCArIFwiJFwiKTtcblxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1Zylcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xuXHR9XG5cblx0cHVibGljIGRyYXdUcmlhbmdsZXMoaW5kZXhCdWZmZXI6SW5kZXhCdWZmZXJGbGFzaCwgZmlyc3RJbmRleDpudW1iZXIgPSAwLCBudW1UcmlhbmdsZXM6bnVtYmVyID0gLTEpXG5cdHtcblx0XHRmaXJzdEluZGV4ID0gZmlyc3RJbmRleCB8fCAwO1xuXHRcdGlmICghbnVtVHJpYW5nbGVzIHx8IG51bVRyaWFuZ2xlcyA8IDApXG5cdFx0XHRudW1UcmlhbmdsZXMgPSBpbmRleEJ1ZmZlci5udW1JbmRpY2VzLzM7XG5cblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuZHJhd1RyaWFuZ2xlcywgaW5kZXhCdWZmZXIuaWQgKyBPcENvZGVzLmludE1hc2spICsgZmlyc3RJbmRleCArIFwiLFwiICsgbnVtVHJpYW5nbGVzICsgXCIsXCIpO1xuXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmRlYnVnKVxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XG5cdH1cblxuXHRwdWJsaWMgc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21NYXRyaXgocHJvZ3JhbVR5cGU6c3RyaW5nLCBmaXJzdFJlZ2lzdGVyOm51bWJlciwgbWF0cml4Ok1hdHJpeDNELCB0cmFuc3Bvc2VkTWF0cml4OmJvb2xlYW4gPSBmYWxzZSlcblx0e1xuXHRcdC8vdGhpcy5fZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLl9nbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5fY3VycmVudFByb2dyYW0uZ2xQcm9ncmFtLCB0aGlzLl91bmlmb3JtTG9jYXRpb25OYW1lRGljdGlvbmFyeVtwcm9ncmFtVHlwZV0pLCAhdHJhbnNwb3NlZE1hdHJpeCwgbmV3IEZsb2F0MzJBcnJheShtYXRyaXgucmF3RGF0YSkpO1xuXG5cdFx0Ly9UT0RPIHJlbW92ZSBzcGVjaWFsIGNhc2UgZm9yIFdlYkdMIG1hdHJpeCBjYWxscz9cblx0XHR2YXIgZDpudW1iZXJbXSA9IG1hdHJpeC5yYXdEYXRhO1xuXHRcdGlmICh0cmFuc3Bvc2VkTWF0cml4KSB7XG5cdFx0XHR0aGlzLnNldFByb2dyYW1Db25zdGFudHNGcm9tQXJyYXkocHJvZ3JhbVR5cGUsIGZpcnN0UmVnaXN0ZXIsIFsgZFswXSwgZFs0XSwgZFs4XSwgZFsxMl0gXSwgMSk7XG5cdFx0XHR0aGlzLnNldFByb2dyYW1Db25zdGFudHNGcm9tQXJyYXkocHJvZ3JhbVR5cGUsIGZpcnN0UmVnaXN0ZXIgKyAxLCBbIGRbMV0sIGRbNV0sIGRbOV0sIGRbMTNdIF0sIDEpO1xuXHRcdFx0dGhpcy5zZXRQcm9ncmFtQ29uc3RhbnRzRnJvbUFycmF5KHByb2dyYW1UeXBlLCBmaXJzdFJlZ2lzdGVyICsgMiwgWyBkWzJdLCBkWzZdLCBkWzEwXSwgZFsxNF0gXSwgMSk7XG5cdFx0XHR0aGlzLnNldFByb2dyYW1Db25zdGFudHNGcm9tQXJyYXkocHJvZ3JhbVR5cGUsIGZpcnN0UmVnaXN0ZXIgKyAzLCBbIGRbM10sIGRbN10sIGRbMTFdLCBkWzE1XSBdLCAxKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zZXRQcm9ncmFtQ29uc3RhbnRzRnJvbUFycmF5KHByb2dyYW1UeXBlLCBmaXJzdFJlZ2lzdGVyLCBbIGRbMF0sIGRbMV0sIGRbMl0sIGRbM10gXSwgMSk7XG5cdFx0XHR0aGlzLnNldFByb2dyYW1Db25zdGFudHNGcm9tQXJyYXkocHJvZ3JhbVR5cGUsIGZpcnN0UmVnaXN0ZXIgKyAxLCBbIGRbNF0sIGRbNV0sIGRbNl0sIGRbN10gXSwgMSk7XG5cdFx0XHR0aGlzLnNldFByb2dyYW1Db25zdGFudHNGcm9tQXJyYXkocHJvZ3JhbVR5cGUsIGZpcnN0UmVnaXN0ZXIgKyAyLCBbIGRbOF0sIGRbOV0sIGRbMTBdLCBkWzExXSBdLCAxKTtcblx0XHRcdHRoaXMuc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21BcnJheShwcm9ncmFtVHlwZSwgZmlyc3RSZWdpc3RlciArIDMsIFsgZFsxMl0sIGRbMTNdLCBkWzE0XSwgZFsxNV0gXSwgMSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHNldFByb2dyYW1Db25zdGFudHNGcm9tQXJyYXkocHJvZ3JhbVR5cGU6c3RyaW5nLCBmaXJzdFJlZ2lzdGVyOm51bWJlciwgZGF0YTpudW1iZXJbXSwgbnVtUmVnaXN0ZXJzOm51bWJlciA9IC0xKVxuXHR7XG5cdFx0dmFyIHN0YXJ0SW5kZXg6bnVtYmVyO1xuXHRcdHZhciB0YXJnZXQ6bnVtYmVyID0gKHByb2dyYW1UeXBlID09IENvbnRleHRHTFByb2dyYW1UeXBlLlZFUlRFWCk/IE9wQ29kZXMudHJ1ZVZhbHVlIDogT3BDb2Rlcy5mYWxzZVZhbHVlO1xuXHRcdGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IG51bVJlZ2lzdGVyczsgaSsrKSB7XG5cdFx0XHRzdGFydEluZGV4ID0gaSo0O1xuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldFByb2dyYW1Db25zdGFudCwgdGFyZ2V0LCAoZmlyc3RSZWdpc3RlciArIGkpICsgT3BDb2Rlcy5pbnRNYXNrKSArIGRhdGFbc3RhcnRJbmRleF0gKyBcIixcIiArIGRhdGFbc3RhcnRJbmRleCArIDFdICsgXCIsXCIgKyBkYXRhW3N0YXJ0SW5kZXggKyAyXSArIFwiLFwiICsgZGF0YVtzdGFydEluZGV4ICsgM10gKyBcIixcIik7XG5cblx0XHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1Zylcblx0XHRcdFx0dGhpcy5leGVjdXRlKCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHNldFByb2dyYW0ocHJvZ3JhbTpQcm9ncmFtRmxhc2gpXG5cdHtcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0UHJvZ3JhbSwgcHJvZ3JhbS5pZCArIE9wQ29kZXMuaW50TWFzaykpO1xuXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmRlYnVnKVxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XG5cdH1cblxuXHRwdWJsaWMgcHJlc2VudCgpXG5cdHtcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMucHJlc2VudCkpO1xuXHRcdHRoaXMuZXhlY3V0ZSgpO1xuXHR9XG5cblx0cHVibGljIGNsZWFyKHJlZDpudW1iZXIgPSAwLCBncmVlbjpudW1iZXIgPSAwLCBibHVlOm51bWJlciA9IDAsIGFscGhhOm51bWJlciA9IDEsIGRlcHRoOm51bWJlciA9IDEsIHN0ZW5jaWw6bnVtYmVyID0gMCwgbWFzazpudW1iZXIgPSBDb250ZXh0R0xDbGVhck1hc2suQUxMKVxuXHR7XG5cdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLmNsZWFyKSArIHJlZCArIFwiLFwiICsgZ3JlZW4gKyBcIixcIiArIGJsdWUgKyBcIixcIiArIGFscGhhICsgXCIsXCIgKyBkZXB0aCArIFwiLFwiICsgc3RlbmNpbCArIFwiLFwiICsgbWFzayArIFwiLFwiKTtcblxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1Zylcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xuXHR9XG5cblx0cHVibGljIGNyZWF0ZVByb2dyYW0oKTpQcm9ncmFtRmxhc2hcblx0e1xuXHRcdHJldHVybiBuZXcgUHJvZ3JhbUZsYXNoKHRoaXMpO1xuXHR9XG5cblx0cHVibGljIGNyZWF0ZVZlcnRleEJ1ZmZlcihudW1WZXJ0aWNlczpudW1iZXIsIGRhdGEzMlBlclZlcnRleDpudW1iZXIpOlZlcnRleEJ1ZmZlckZsYXNoXG5cdHtcblx0XHRyZXR1cm4gbmV3IFZlcnRleEJ1ZmZlckZsYXNoKHRoaXMsIG51bVZlcnRpY2VzLCBkYXRhMzJQZXJWZXJ0ZXgpO1xuXHR9XG5cblx0cHVibGljIGNyZWF0ZUluZGV4QnVmZmVyKG51bUluZGljZXM6bnVtYmVyKTpJbmRleEJ1ZmZlckZsYXNoXG5cdHtcblx0XHRyZXR1cm4gbmV3IEluZGV4QnVmZmVyRmxhc2godGhpcywgbnVtSW5kaWNlcyk7XG5cdH1cblxuXHRwdWJsaWMgY29uZmlndXJlQmFja0J1ZmZlcih3aWR0aDpudW1iZXIsIGhlaWdodDpudW1iZXIsIGFudGlBbGlhczpudW1iZXIsIGVuYWJsZURlcHRoQW5kU3RlbmNpbDpib29sZWFuID0gdHJ1ZSlcblx0e1xuXHRcdHN1cGVyLmNvbmZpZ3VyZUJhY2tCdWZmZXIod2lkdGgsIGhlaWdodCwgYW50aUFsaWFzLCBlbmFibGVEZXB0aEFuZFN0ZW5jaWwpO1xuXG5cdFx0Ly9UT0RPOiBhZGQgQW5pdGFsaWFzIHNldHRpbmdcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuY29uZmlndXJlQmFja0J1ZmZlcikgKyB3aWR0aCArIFwiLFwiICsgaGVpZ2h0ICsgXCIsXCIpO1xuXHR9XG5cblx0cHVibGljIGRyYXdUb0JpdG1hcERhdGEoZGVzdGluYXRpb246Qml0bWFwRGF0YSlcblx0e1xuXHRcdC8vVE9ET1xuXHR9XG5cblx0cHVibGljIHNldFZlcnRleEJ1ZmZlckF0KGluZGV4Om51bWJlciwgYnVmZmVyOlZlcnRleEJ1ZmZlckZsYXNoLCBidWZmZXJPZmZzZXQ6bnVtYmVyID0gMCwgZm9ybWF0OnN0cmluZyA9IG51bGwpXG5cdHtcblx0XHRpZiAoYnVmZmVyKSB7XG5cdFx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0VmVydGV4QnVmZmVyQXQsIGluZGV4ICsgT3BDb2Rlcy5pbnRNYXNrKSArIGJ1ZmZlci5pZCArIFwiLFwiICsgYnVmZmVyT2Zmc2V0ICsgXCIsXCIgKyBmb3JtYXQgKyBcIiRcIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5jbGVhclZlcnRleEJ1ZmZlckF0LCBpbmRleCArIE9wQ29kZXMuaW50TWFzaykpO1xuXHRcdH1cblxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1Zylcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xuXHR9XG5cblx0cHVibGljIHNldENvbG9yTWFzayhyZWQ6Ym9vbGVhbiwgZ3JlZW46Ym9vbGVhbiwgYmx1ZTpib29sZWFuLCBhbHBoYTpib29sZWFuKVxuXHR7XG5cdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldENvbG9yTWFzaywgcmVkPyBPcENvZGVzLnRydWVWYWx1ZSA6IE9wQ29kZXMuZmFsc2VWYWx1ZSwgZ3JlZW4/IE9wQ29kZXMudHJ1ZVZhbHVlIDogT3BDb2Rlcy5mYWxzZVZhbHVlLCBibHVlPyBPcENvZGVzLnRydWVWYWx1ZSA6IE9wQ29kZXMuZmFsc2VWYWx1ZSwgYWxwaGE/IE9wQ29kZXMudHJ1ZVZhbHVlIDogT3BDb2Rlcy5mYWxzZVZhbHVlKSk7XG5cblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXG5cdFx0XHR0aGlzLmV4ZWN1dGUoKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRCbGVuZEZhY3RvcnMoc291cmNlRmFjdG9yOnN0cmluZywgZGVzdGluYXRpb25GYWN0b3I6c3RyaW5nKVxuXHR7XG5cdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldEJsZW5kRmFjdG9ycykgKyBzb3VyY2VGYWN0b3IgKyBcIiRcIiArIGRlc3RpbmF0aW9uRmFjdG9yICsgXCIkXCIpO1xuXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmRlYnVnKVxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XG5cdH1cblxuXHRwdWJsaWMgc2V0UmVuZGVyVG9UZXh0dXJlKHRhcmdldDpSZXNvdXJjZUJhc2VGbGFzaCwgZW5hYmxlRGVwdGhBbmRTdGVuY2lsOmJvb2xlYW4gPSBmYWxzZSwgYW50aUFsaWFzOm51bWJlciA9IDAsIHN1cmZhY2VTZWxlY3RvcjpudW1iZXIgPSAwKVxuXHR7XG5cdFx0aWYgKHRhcmdldCA9PT0gbnVsbCB8fCB0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLmNsZWFyUmVuZGVyVG9UZXh0dXJlKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5zZXRSZW5kZXJUb1RleHR1cmUsIGVuYWJsZURlcHRoQW5kU3RlbmNpbD8gT3BDb2Rlcy50cnVlVmFsdWUgOiBPcENvZGVzLmZhbHNlVmFsdWUpICsgdGFyZ2V0LmlkICsgXCIsXCIgKyAoYW50aUFsaWFzIHx8IDApICsgXCIsXCIpO1xuXHRcdH1cblxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1Zylcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xuXHR9XG5cblxuXHRwdWJsaWMgc2V0UmVuZGVyVG9CYWNrQnVmZmVyKClcblx0e1xuXHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5jbGVhclJlbmRlclRvVGV4dHVyZSkpO1xuXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmRlYnVnKVxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XG5cdH1cblxuXHRwdWJsaWMgc2V0U2Npc3NvclJlY3RhbmdsZShyZWN0YW5nbGU6UmVjdGFuZ2xlKVxuXHR7XG5cdFx0aWYgKHJlY3RhbmdsZSkge1xuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldFNjaXNzb3JSZWN0KSArIHJlY3RhbmdsZS54ICsgXCIsXCIgKyByZWN0YW5nbGUueSArIFwiLFwiICsgcmVjdGFuZ2xlLndpZHRoICsgXCIsXCIgKyByZWN0YW5nbGUuaGVpZ2h0ICsgXCIsXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuY2xlYXJTY2lzc29yUmVjdCkpO1xuXHRcdH1cblxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1Zylcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xuXHR9XG5cblx0cHVibGljIHNldERlcHRoVGVzdChkZXB0aE1hc2s6Ym9vbGVhbiwgcGFzc0NvbXBhcmVNb2RlOnN0cmluZylcblx0e1xuXHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5zZXREZXB0aFRlc3QsIGRlcHRoTWFzaz8gT3BDb2Rlcy50cnVlVmFsdWUgOiBPcENvZGVzLmZhbHNlVmFsdWUpICsgcGFzc0NvbXBhcmVNb2RlICsgXCIkXCIpO1xuXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmRlYnVnKVxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XG5cdH1cblxuXHRwdWJsaWMgZGlzcG9zZSgpXG5cdHtcblx0XHRpZiAodGhpcy5fcENvbnRhaW5lciA9PSBudWxsKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0Y29uc29sZS5sb2coXCJDb250ZXh0M0QgZGlzcG9zZSwgcmVsZWFzaW5nIFwiICsgdGhpcy5fcmVzb3VyY2VzLmxlbmd0aCArIFwiIHJlc291cmNlcy5cIik7XG5cblx0XHR3aGlsZSAodGhpcy5fcmVzb3VyY2VzLmxlbmd0aClcblx0XHRcdHRoaXMuX3Jlc291cmNlc1swXS5kaXNwb3NlKCk7XG5cblx0XHRpZiAodGhpcy5fcENvbnRhaW5lcikge1xuXHRcdFx0Ly8gZW5jb2RlIGNvbW1hbmRcblx0XHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5kaXNwb3NlQ29udGV4dCkpO1xuXHRcdFx0dGhpcy5leGVjdXRlKCk7XG5cdFx0XHRzd2ZvYmplY3QucmVtb3ZlU1dGKHRoaXMuX29sZENhbnZhcy5pZCk7XG5cdFx0XHRpZiAodGhpcy5fb2xkQ2FudmFzICYmIHRoaXMuX29sZFBhcmVudCkge1xuXHRcdFx0XHR0aGlzLl9vbGRQYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5fb2xkQ2FudmFzKTtcblx0XHRcdFx0dGhpcy5fb2xkUGFyZW50ID0gbnVsbDtcblx0XHRcdH1cblx0XHRcdHRoaXMuX3BDb250YWluZXIgPSBudWxsO1xuXHRcdH1cblxuXHRcdHRoaXMuX29sZENhbnZhcyA9IG51bGw7XG5cdH1cblxuXHRwdWJsaWMgYWRkU3RyZWFtKHN0cmVhbTpzdHJpbmcpXG5cdHtcblx0XHR0aGlzLl9jbWRTdHJlYW0gKz0gc3RyZWFtO1xuXHR9XG5cblx0cHVibGljIGV4ZWN1dGUoKTpudW1iZXJcblx0e1xuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5sb2dTdHJlYW0pXG5cdFx0XHRjb25zb2xlLmxvZyh0aGlzLl9jbWRTdHJlYW0pO1xuXG5cdFx0dmFyIHJlc3VsdDpudW1iZXIgPSB0aGlzLl9wQ29udGFpbmVyW1wiQ2FsbEZ1bmN0aW9uXCJdKFwiPGludm9rZSBuYW1lPVxcXCJleGVjU3RhZ2UzZE9wU3RyZWFtXFxcIiByZXR1cm50eXBlPVxcXCJqYXZhc2NyaXB0XFxcIj48YXJndW1lbnRzPjxzdHJpbmc+XCIgKyB0aGlzLl9jbWRTdHJlYW0gKyBcIjwvc3RyaW5nPjwvYXJndW1lbnRzPjwvaW52b2tlPlwiKTtcblxuXHRcdGlmIChOdW1iZXIocmVzdWx0KSA8PSAtMylcblx0XHRcdHRocm93IFwiRXhlYyBzdHJlYW0gZmFpbGVkXCI7XG5cblx0XHR0aGlzLl9jbWRTdHJlYW0gPSBcIlwiO1xuXG5cdFx0cmV0dXJuIE51bWJlcihyZXN1bHQpO1xuXHR9XG59XG5cbmV4cG9ydCA9IENvbnRleHRTdGFnZTNEO1xuXG4vKipcbiogZ2xvYmFsIGZ1bmN0aW9uIGZvciBmbGFzaCBjYWxsYmFja1xuKi9cbmZ1bmN0aW9uIG1vdW50YWluX2pzX2NvbnRleHRfYXZhaWxhYmxlKGlkLCBkcml2ZXJJbmZvKVxue1xuXHR2YXIgY3R4OkNvbnRleHRTdGFnZTNEID0gQ29udGV4dFN0YWdlM0QuY29udGV4dHNbaWRdO1xuXHRpZiAoY3R4Ll9pQ2FsbGJhY2spIHtcblx0XHRjdHguX2lEcml2ZXJJbmZvID0gZHJpdmVySW5mbztcblx0XHQvLyBnZXQgb3V0IG9mIHRoZSBjdXJyZW50IEpTIHN0YWNrIGZyYW1lIGFuZCBjYWxsIGJhY2sgZnJvbSBmbGFzaCBwbGF5ZXJcblx0XHR2YXIgdGltZU91dElkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKClcblx0XHR7XG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVPdXRJZCk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjdHguX2lDYWxsYmFjayhjdHgpO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkNhbGxiYWNrIGZhaWxlZCBkdXJpbmcgZmxhc2ggaW5pdGlhbGl6YXRpb24gd2l0aCAnXCIgKyBlLnRvU3RyaW5nKCkgKyBcIidcIik7XG5cdFx0XHR9XG5cdFx0fSwgMSk7XG5cdH1cbn1cbiJdfQ==