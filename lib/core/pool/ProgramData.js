/**
 *
 * @class away.pool.ProgramDataBase
 */
var ProgramData = (function () {
    function ProgramData(pool, context, key) {
        this.usages = 0;
        this._pool = pool;
        this.context = context;
        this._key = key;
        this.context.registerProgram(this);
    }
    /**
     *
     */
    ProgramData.prototype.dispose = function () {
        this.usages--;
        if (!this.usages) {
            this._pool.disposeItem(this._key);
            this.context.unRegisterProgram(this);
            if (this.program)
                this.program.dispose();
        }
        this.program = null;
    };
    ProgramData.PROGRAMDATA_ID_COUNT = 0;
    return ProgramData;
})();
module.exports = ProgramData;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1zdGFnZWdsL2xpYi9jb3JlL3Bvb2wvcHJvZ3JhbWRhdGEudHMiXSwibmFtZXMiOlsiUHJvZ3JhbURhdGEiLCJQcm9ncmFtRGF0YS5jb25zdHJ1Y3RvciIsIlByb2dyYW1EYXRhLmRpc3Bvc2UiXSwibWFwcGluZ3MiOiJBQUlBLEFBSUE7OztHQURHO0lBQ0csV0FBVztJQWVoQkEsU0FmS0EsV0FBV0EsQ0FlSkEsSUFBb0JBLEVBQUVBLE9BQXFCQSxFQUFFQSxHQUFVQTtRQU41REMsV0FBTUEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7UUFReEJBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO1FBQ2xCQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxPQUFPQSxDQUFDQTtRQUN2QkEsSUFBSUEsQ0FBQ0EsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7UUFDaEJBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO0lBQ3BDQSxDQUFDQTtJQUVERDs7T0FFR0E7SUFDSUEsNkJBQU9BLEdBQWRBO1FBRUNFLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBO1FBRWRBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ2xCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUVsQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUVyQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7Z0JBQ2hCQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtRQUN6QkEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDckJBLENBQUNBO0lBdENhRixnQ0FBb0JBLEdBQVVBLENBQUNBLENBQUNBO0lBdUMvQ0Esa0JBQUNBO0FBQURBLENBekNBLEFBeUNDQSxJQUFBO0FBRUQsQUFBcUIsaUJBQVosV0FBVyxDQUFDIiwiZmlsZSI6ImNvcmUvcG9vbC9Qcm9ncmFtRGF0YS5qcyIsInNvdXJjZVJvb3QiOiIuLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvZ3JhbURhdGFQb29sXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9wb29sL1Byb2dyYW1EYXRhUG9vbFwiKTtcbmltcG9ydCBDb250ZXh0R0xCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9zdGFnZWdsL0NvbnRleHRHTEJhc2VcIik7XG5pbXBvcnQgSVByb2dyYW1cdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvY29yZS9zdGFnZWdsL0lQcm9ncmFtXCIpO1xuXG4vKipcbiAqXG4gKiBAY2xhc3MgYXdheS5wb29sLlByb2dyYW1EYXRhQmFzZVxuICovXG5jbGFzcyBQcm9ncmFtRGF0YVxue1xuXHRwdWJsaWMgc3RhdGljIFBST0dSQU1EQVRBX0lEX0NPVU5UOm51bWJlciA9IDA7XG5cblx0cHJpdmF0ZSBfcG9vbDpQcm9ncmFtRGF0YVBvb2w7XG5cdHByaXZhdGUgX2tleTpzdHJpbmc7XG5cblx0cHVibGljIGNvbnRleHQ6Q29udGV4dEdMQmFzZTtcblxuXHRwdWJsaWMgdXNhZ2VzOm51bWJlciA9IDA7XG5cblx0cHVibGljIHByb2dyYW06SVByb2dyYW07XG5cblx0cHVibGljIGlkOm51bWJlcjtcblxuXHRjb25zdHJ1Y3Rvcihwb29sOlByb2dyYW1EYXRhUG9vbCwgY29udGV4dDpDb250ZXh0R0xCYXNlLCBrZXk6c3RyaW5nKVxuXHR7XG5cdFx0dGhpcy5fcG9vbCA9IHBvb2w7XG5cdFx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcblx0XHR0aGlzLl9rZXkgPSBrZXk7XG5cdFx0dGhpcy5jb250ZXh0LnJlZ2lzdGVyUHJvZ3JhbSh0aGlzKTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGRpc3Bvc2UoKVxuXHR7XG5cdFx0dGhpcy51c2FnZXMtLTtcblxuXHRcdGlmICghdGhpcy51c2FnZXMpIHtcblx0XHRcdHRoaXMuX3Bvb2wuZGlzcG9zZUl0ZW0odGhpcy5fa2V5KTtcblxuXHRcdFx0dGhpcy5jb250ZXh0LnVuUmVnaXN0ZXJQcm9ncmFtKHRoaXMpO1xuXG5cdFx0XHRpZiAodGhpcy5wcm9ncmFtKVxuXHRcdFx0XHR0aGlzLnByb2dyYW0uZGlzcG9zZSgpO1xuXHRcdH1cblxuXHRcdHRoaXMucHJvZ3JhbSA9IG51bGw7XG5cdH1cbn1cblxuZXhwb3J0ID0gUHJvZ3JhbURhdGE7Il19