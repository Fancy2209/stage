/**
 *
 * @class away.pool.ProgramDataBase
 */
var ProgramData = (function () {
    function ProgramData(pool, context, key) {
        this.usages = 0;
        this._pool = pool;
        this.context = context;
        this._key = key;
        this.context.registerProgram(this);
    }
    /**
     *
     */
    ProgramData.prototype.dispose = function () {
        this.usages--;
        if (!this.usages) {
            this._pool.disposeItem(this._key);
            this.context.unRegisterProgram(this);
            if (this.program)
                this.program.dispose();
        }
        this.program = null;
    };
    ProgramData.PROGRAMDATA_ID_COUNT = 0;
    return ProgramData;
})();
module.exports = ProgramData;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvcG9vbC9wcm9ncmFtZGF0YS50cyJdLCJuYW1lcyI6WyJQcm9ncmFtRGF0YSIsIlByb2dyYW1EYXRhLmNvbnN0cnVjdG9yIiwiUHJvZ3JhbURhdGEuZGlzcG9zZSJdLCJtYXBwaW5ncyI6IkFBSUEsQUFJQTs7O0dBREc7SUFDRyxXQUFXO0lBZWhCQSxTQWZLQSxXQUFXQSxDQWVKQSxJQUFvQkEsRUFBRUEsT0FBcUJBLEVBQUVBLEdBQVVBO1FBTjVEQyxXQUFNQSxHQUFVQSxDQUFDQSxDQUFDQTtRQVF4QkEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDbEJBLElBQUlBLENBQUNBLE9BQU9BLEdBQUdBLE9BQU9BLENBQUNBO1FBQ3ZCQSxJQUFJQSxDQUFDQSxJQUFJQSxHQUFHQSxHQUFHQSxDQUFDQTtRQUNoQkEsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDcENBLENBQUNBO0lBRUREOztPQUVHQTtJQUNJQSw2QkFBT0EsR0FBZEE7UUFFQ0UsSUFBSUEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0E7UUFFZEEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbEJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBRWxDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxpQkFBaUJBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBRXJDQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQTtnQkFDaEJBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO1FBQ3pCQSxDQUFDQTtRQUVEQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxJQUFJQSxDQUFDQTtJQUNyQkEsQ0FBQ0E7SUF0Q2FGLGdDQUFvQkEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7SUF1Qy9DQSxrQkFBQ0E7QUFBREEsQ0F6Q0EsQUF5Q0NBLElBQUE7QUFFRCxBQUFxQixpQkFBWixXQUFXLENBQUMiLCJmaWxlIjoiY29yZS9wb29sL1Byb2dyYW1EYXRhLmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9yb2JiYXRlbWFuL1dlYnN0b3JtUHJvamVjdHMvYXdheWpzLXN0YWdlZ2wvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2dyYW1EYXRhUG9vbFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvcG9vbC9Qcm9ncmFtRGF0YVBvb2xcIik7XG5pbXBvcnQgQ29udGV4dEdMQmFzZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvc3RhZ2VnbC9Db250ZXh0R0xCYXNlXCIpO1xuaW1wb3J0IElQcm9ncmFtXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvc3RhZ2VnbC9JUHJvZ3JhbVwiKTtcblxuLyoqXG4gKlxuICogQGNsYXNzIGF3YXkucG9vbC5Qcm9ncmFtRGF0YUJhc2VcbiAqL1xuY2xhc3MgUHJvZ3JhbURhdGFcbntcblx0cHVibGljIHN0YXRpYyBQUk9HUkFNREFUQV9JRF9DT1VOVDpudW1iZXIgPSAwO1xuXG5cdHByaXZhdGUgX3Bvb2w6UHJvZ3JhbURhdGFQb29sO1xuXHRwcml2YXRlIF9rZXk6c3RyaW5nO1xuXG5cdHB1YmxpYyBjb250ZXh0OkNvbnRleHRHTEJhc2U7XG5cblx0cHVibGljIHVzYWdlczpudW1iZXIgPSAwO1xuXG5cdHB1YmxpYyBwcm9ncmFtOklQcm9ncmFtO1xuXG5cdHB1YmxpYyBpZDpudW1iZXI7XG5cblx0Y29uc3RydWN0b3IocG9vbDpQcm9ncmFtRGF0YVBvb2wsIGNvbnRleHQ6Q29udGV4dEdMQmFzZSwga2V5OnN0cmluZylcblx0e1xuXHRcdHRoaXMuX3Bvb2wgPSBwb29sO1xuXHRcdHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cdFx0dGhpcy5fa2V5ID0ga2V5O1xuXHRcdHRoaXMuY29udGV4dC5yZWdpc3RlclByb2dyYW0odGhpcyk7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyBkaXNwb3NlKClcblx0e1xuXHRcdHRoaXMudXNhZ2VzLS07XG5cblx0XHRpZiAoIXRoaXMudXNhZ2VzKSB7XG5cdFx0XHR0aGlzLl9wb29sLmRpc3Bvc2VJdGVtKHRoaXMuX2tleSk7XG5cblx0XHRcdHRoaXMuY29udGV4dC51blJlZ2lzdGVyUHJvZ3JhbSh0aGlzKTtcblxuXHRcdFx0aWYgKHRoaXMucHJvZ3JhbSlcblx0XHRcdFx0dGhpcy5wcm9ncmFtLmRpc3Bvc2UoKTtcblx0XHR9XG5cblx0XHR0aGlzLnByb2dyYW0gPSBudWxsO1xuXHR9XG59XG5cbmV4cG9ydCA9IFByb2dyYW1EYXRhOyJdfQ==