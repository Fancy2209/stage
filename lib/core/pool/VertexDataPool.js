var SubGeometryBase = require("awayjs-display/lib/base/SubGeometryBase");
var VertexData = require("awayjs-stagegl/lib/core/pool/VertexData");
/**
 *
 */
var VertexDataPool = (function () {
    function VertexDataPool() {
    }
    VertexDataPool.getItem = function (subGeometry, indexData, dataType) {
        if (subGeometry.concatenateArrays)
            dataType = SubGeometryBase.VERTEX_DATA;
        var subGeometryDictionary = (VertexDataPool._pool[subGeometry.id] || (VertexDataPool._pool[subGeometry.id] = new Object()));
        var subGeometryData = (subGeometryDictionary[dataType] || (subGeometryDictionary[dataType] = new Array()));
        var vertexData = subGeometryData[indexData.level] || (subGeometryData[indexData.level] = new VertexData(subGeometry, dataType));
        vertexData.updateData(indexData.originalIndices, indexData.indexMappings);
        return vertexData;
    };
    VertexDataPool.disposeItem = function (subGeometry, level, dataType) {
        var subGeometryDictionary = VertexDataPool._pool[subGeometry.id];
        var subGeometryData = subGeometryDictionary[dataType];
        subGeometryData[level].dispose();
        subGeometryData[level] = null;
    };
    VertexDataPool.prototype.disposeData = function (subGeometry) {
        var subGeometryDictionary = VertexDataPool._pool[subGeometry.id];
        for (var key in subGeometryDictionary) {
            var subGeometryData = subGeometryDictionary[key];
            var len = subGeometryData.length;
            for (var i = 0; i < len; i++) {
                subGeometryData[i].dispose();
                subGeometryData[i] = null;
            }
        }
        VertexDataPool._pool[subGeometry.id] = null;
    };
    VertexDataPool._pool = new Object();
    return VertexDataPool;
})();
module.exports = VertexDataPool;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1zdGFnZWdsL2xpYi9jb3JlL3Bvb2wvdmVydGV4ZGF0YXBvb2wudHMiXSwibmFtZXMiOlsiVmVydGV4RGF0YVBvb2wiLCJWZXJ0ZXhEYXRhUG9vbC5jb25zdHJ1Y3RvciIsIlZlcnRleERhdGFQb29sLmdldEl0ZW0iLCJWZXJ0ZXhEYXRhUG9vbC5kaXNwb3NlSXRlbSIsIlZlcnRleERhdGFQb29sLmRpc3Bvc2VEYXRhIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFPLGVBQWUsV0FBYyx5Q0FBeUMsQ0FBQyxDQUFDO0FBRy9FLElBQU8sVUFBVSxXQUFlLHlDQUF5QyxDQUFDLENBQUM7QUFFM0UsQUFHQTs7R0FERztJQUNHLGNBQWM7SUFJbkJBLFNBSktBLGNBQWNBO0lBTW5CQyxDQUFDQTtJQUVhRCxzQkFBT0EsR0FBckJBLFVBQXNCQSxXQUEyQkEsRUFBRUEsU0FBbUJBLEVBQUVBLFFBQWVBO1FBRXRGRSxFQUFFQSxDQUFDQSxDQUFDQSxXQUFXQSxDQUFDQSxpQkFBaUJBLENBQUNBO1lBQ2pDQSxRQUFRQSxHQUFHQSxlQUFlQSxDQUFDQSxXQUFXQSxDQUFDQTtRQUV4Q0EsSUFBSUEscUJBQXFCQSxHQUFtQkEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsSUFBSUEsTUFBTUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDNUlBLElBQUlBLGVBQWVBLEdBQXlDQSxDQUFDQSxxQkFBcUJBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsSUFBSUEsS0FBS0EsRUFBY0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFN0pBLElBQUlBLFVBQVVBLEdBQWNBLGVBQWVBLENBQUNBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLElBQUlBLFVBQVVBLENBQUNBLFdBQVdBLEVBQUVBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBO1FBQzNJQSxVQUFVQSxDQUFDQSxVQUFVQSxDQUFDQSxTQUFTQSxDQUFDQSxlQUFlQSxFQUFFQSxTQUFTQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQTtRQUUxRUEsTUFBTUEsQ0FBQ0EsVUFBVUEsQ0FBQ0E7SUFDbkJBLENBQUNBO0lBRWFGLDBCQUFXQSxHQUF6QkEsVUFBMEJBLFdBQTJCQSxFQUFFQSxLQUFZQSxFQUFFQSxRQUFlQTtRQUVuRkcsSUFBSUEscUJBQXFCQSxHQUFtQkEsY0FBY0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7UUFDakZBLElBQUlBLGVBQWVBLEdBQXlDQSxxQkFBcUJBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1FBRTVGQSxlQUFlQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtRQUNqQ0EsZUFBZUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDL0JBLENBQUNBO0lBRU1ILG9DQUFXQSxHQUFsQkEsVUFBbUJBLFdBQTJCQTtRQUU3Q0ksSUFBSUEscUJBQXFCQSxHQUFtQkEsY0FBY0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7UUFFakZBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLElBQUlBLHFCQUFxQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdkNBLElBQUlBLGVBQWVBLEdBQXlDQSxxQkFBcUJBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1lBRXZGQSxJQUFJQSxHQUFHQSxHQUFVQSxlQUFlQSxDQUFDQSxNQUFNQSxDQUFDQTtZQUN4Q0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBVUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsRUFBRUEsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0E7Z0JBQ3JDQSxlQUFlQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtnQkFDN0JBLGVBQWVBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO1lBQzNCQSxDQUFDQTtRQUNGQSxDQUFDQTtRQUVEQSxjQUFjQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQTtJQUM3Q0EsQ0FBQ0E7SUE1Q2NKLG9CQUFLQSxHQUFVQSxJQUFJQSxNQUFNQSxFQUFFQSxDQUFDQTtJQTZDNUNBLHFCQUFDQTtBQUFEQSxDQS9DQSxBQStDQ0EsSUFBQTtBQUVELEFBQXdCLGlCQUFmLGNBQWMsQ0FBQyIsImZpbGUiOiJjb3JlL3Bvb2wvVmVydGV4RGF0YVBvb2wuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFN1Ykdlb21ldHJ5QmFzZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvU3ViR2VvbWV0cnlCYXNlXCIpO1xuXG5pbXBvcnQgSW5kZXhEYXRhXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9jb3JlL3Bvb2wvSW5kZXhEYXRhXCIpO1xuaW1wb3J0IFZlcnRleERhdGFcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvcG9vbC9WZXJ0ZXhEYXRhXCIpO1xuXG4vKipcbiAqXG4gKi9cbmNsYXNzIFZlcnRleERhdGFQb29sXG57XG5cdHByaXZhdGUgc3RhdGljIF9wb29sOk9iamVjdCA9IG5ldyBPYmplY3QoKTtcblxuXHRjb25zdHJ1Y3RvcigpXG5cdHtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZ2V0SXRlbShzdWJHZW9tZXRyeTpTdWJHZW9tZXRyeUJhc2UsIGluZGV4RGF0YTpJbmRleERhdGEsIGRhdGFUeXBlOnN0cmluZyk6VmVydGV4RGF0YVxuXHR7XG5cdFx0aWYgKHN1Ykdlb21ldHJ5LmNvbmNhdGVuYXRlQXJyYXlzKVxuXHRcdFx0ZGF0YVR5cGUgPSBTdWJHZW9tZXRyeUJhc2UuVkVSVEVYX0RBVEE7XG5cblx0XHR2YXIgc3ViR2VvbWV0cnlEaWN0aW9uYXJ5Ok9iamVjdCA9IDxPYmplY3Q+IChWZXJ0ZXhEYXRhUG9vbC5fcG9vbFtzdWJHZW9tZXRyeS5pZF0gfHwgKFZlcnRleERhdGFQb29sLl9wb29sW3N1Ykdlb21ldHJ5LmlkXSA9IG5ldyBPYmplY3QoKSkpO1xuXHRcdHZhciBzdWJHZW9tZXRyeURhdGE6QXJyYXk8VmVydGV4RGF0YT4gPSA8QXJyYXk8VmVydGV4RGF0YT4+IChzdWJHZW9tZXRyeURpY3Rpb25hcnlbZGF0YVR5cGVdIHx8IChzdWJHZW9tZXRyeURpY3Rpb25hcnlbZGF0YVR5cGVdID0gbmV3IEFycmF5PFZlcnRleERhdGE+KCkpKTtcblxuXHRcdHZhciB2ZXJ0ZXhEYXRhOlZlcnRleERhdGEgPSBzdWJHZW9tZXRyeURhdGFbaW5kZXhEYXRhLmxldmVsXSB8fCAoc3ViR2VvbWV0cnlEYXRhW2luZGV4RGF0YS5sZXZlbF0gPSBuZXcgVmVydGV4RGF0YShzdWJHZW9tZXRyeSwgZGF0YVR5cGUpKTtcblx0XHR2ZXJ0ZXhEYXRhLnVwZGF0ZURhdGEoaW5kZXhEYXRhLm9yaWdpbmFsSW5kaWNlcywgaW5kZXhEYXRhLmluZGV4TWFwcGluZ3MpO1xuXG5cdFx0cmV0dXJuIHZlcnRleERhdGE7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGRpc3Bvc2VJdGVtKHN1Ykdlb21ldHJ5OlN1Ykdlb21ldHJ5QmFzZSwgbGV2ZWw6bnVtYmVyLCBkYXRhVHlwZTpzdHJpbmcpXG5cdHtcblx0XHR2YXIgc3ViR2VvbWV0cnlEaWN0aW9uYXJ5Ok9iamVjdCA9IDxPYmplY3Q+IFZlcnRleERhdGFQb29sLl9wb29sW3N1Ykdlb21ldHJ5LmlkXTtcblx0XHR2YXIgc3ViR2VvbWV0cnlEYXRhOkFycmF5PFZlcnRleERhdGE+ID0gPEFycmF5PFZlcnRleERhdGE+PiBzdWJHZW9tZXRyeURpY3Rpb25hcnlbZGF0YVR5cGVdO1xuXG5cdFx0c3ViR2VvbWV0cnlEYXRhW2xldmVsXS5kaXNwb3NlKCk7XG5cdFx0c3ViR2VvbWV0cnlEYXRhW2xldmVsXSA9IG51bGw7XG5cdH1cblxuXHRwdWJsaWMgZGlzcG9zZURhdGEoc3ViR2VvbWV0cnk6U3ViR2VvbWV0cnlCYXNlKVxuXHR7XG5cdFx0dmFyIHN1Ykdlb21ldHJ5RGljdGlvbmFyeTpPYmplY3QgPSA8T2JqZWN0PiBWZXJ0ZXhEYXRhUG9vbC5fcG9vbFtzdWJHZW9tZXRyeS5pZF07XG5cblx0XHRmb3IgKHZhciBrZXkgaW4gc3ViR2VvbWV0cnlEaWN0aW9uYXJ5KSB7XG5cdFx0XHR2YXIgc3ViR2VvbWV0cnlEYXRhOkFycmF5PFZlcnRleERhdGE+ID0gPEFycmF5PFZlcnRleERhdGE+PiBzdWJHZW9tZXRyeURpY3Rpb25hcnlba2V5XTtcblxuXHRcdFx0dmFyIGxlbjpudW1iZXIgPSBzdWJHZW9tZXRyeURhdGEubGVuZ3RoO1xuXHRcdFx0Zm9yICh2YXIgaTpudW1iZXIgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0c3ViR2VvbWV0cnlEYXRhW2ldLmRpc3Bvc2UoKTtcblx0XHRcdFx0c3ViR2VvbWV0cnlEYXRhW2ldID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRWZXJ0ZXhEYXRhUG9vbC5fcG9vbFtzdWJHZW9tZXRyeS5pZF0gPSBudWxsO1xuXHR9XG59XG5cbmV4cG9ydCA9IFZlcnRleERhdGFQb29sOyJdfQ==