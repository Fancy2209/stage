var swfobject = require("awayjs-stagegl/lib/swfobject");
var Sampler = require("awayjs-stagegl/lib/aglsl/Sampler");
var ContextGLClearMask = require("awayjs-stagegl/lib/base/ContextGLClearMask");
var ContextGLProgramType = require("awayjs-stagegl/lib/base/ContextGLProgramType");
var CubeTextureFlash = require("awayjs-stagegl/lib/base/CubeTextureFlash");
var IndexBufferFlash = require("awayjs-stagegl/lib/base/IndexBufferFlash");
var OpCodes = require("awayjs-stagegl/lib/base/OpCodes");
var ProgramFlash = require("awayjs-stagegl/lib/base/ProgramFlash");
var TextureFlash = require("awayjs-stagegl/lib/base/TextureFlash");
var VertexBufferFlash = require("awayjs-stagegl/lib/base/VertexBufferFlash");
var ContextStage3D = (function () {
    //TODO: get rid of hack that fixes including definition file
    function ContextStage3D(container, callback, include) {
        this._cmdStream = "";
        this._resources = new Array();
        var swfVersionStr = "11.0.0";
        // To use express install, set to playerProductInstall.swf, otherwise the empty string.
        var flashvars = {
            id: container.id
        };
        var params = {
            quality: "high",
            bgcolor: "#ffffff",
            allowscriptaccess: "sameDomain",
            allowfullscreen: "true",
            wmode: "direct"
        };
        this._errorCheckingEnabled = false;
        this._iDriverInfo = "Unknown";
        var attributes = {
            salign: "tl",
            id: container.id,
            name: container["name"] //TODO: needed?
        };
        this._oldCanvas = container.cloneNode(); // keep the old one to restore on dispose
        this._oldParent = container.parentNode;
        var context3dObj = this;
        ContextStage3D.contexts[container.id] = this;
        function callbackSWFObject(callbackInfo) {
            if (!callbackInfo.success)
                return;
            context3dObj._container = callbackInfo.ref;
            context3dObj._iCallback = callback;
        }
        swfobject.embedSWF("libs/molehill_js_flashbridge.swf", container.id, String(container.width), String(container.height), swfVersionStr, "", flashvars, params, attributes, callbackSWFObject);
    }
    Object.defineProperty(ContextStage3D.prototype, "container", {
        get: function () {
            return this._container;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextStage3D.prototype, "driverInfo", {
        get: function () {
            return this._iDriverInfo;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContextStage3D.prototype, "errorCheckingEnabled", {
        get: function () {
            return this._errorCheckingEnabled;
        },
        set: function (value) {
            if (this._errorCheckingEnabled == value)
                return;
            this._errorCheckingEnabled = value;
            this.addStream(String.fromCharCode(OpCodes.enableErrorChecking, value ? OpCodes.trueValue : OpCodes.falseValue));
            this.execute();
        },
        enumerable: true,
        configurable: true
    });
    ContextStage3D.prototype._iAddResource = function (resource) {
        this._resources.push(resource);
    };
    ContextStage3D.prototype._iRemoveResource = function (resource) {
        this._resources.splice(this._resources.indexOf(resource));
    };
    ContextStage3D.prototype.createTexture = function (width, height, format, optimizeForRenderToTexture, streamingLevels) {
        if (streamingLevels === void 0) { streamingLevels = 0; }
        //TODO:streaming
        return new TextureFlash(this, width, height, format, optimizeForRenderToTexture);
    };
    ContextStage3D.prototype.createCubeTexture = function (size, format, optimizeForRenderToTexture, streamingLevels) {
        if (streamingLevels === void 0) { streamingLevels = 0; }
        //TODO:streaming
        return new CubeTextureFlash(this, size, format, optimizeForRenderToTexture);
    };
    ContextStage3D.prototype.setTextureAt = function (sampler, texture) {
        if (texture) {
            this.addStream(String.fromCharCode(OpCodes.setTextureAt) + sampler + "," + texture.id + ",");
        }
        else {
            this.addStream(String.fromCharCode(OpCodes.clearTextureAt) + sampler.toString() + ",");
        }
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setSamplerStateAt = function (sampler, wrap, filter, mipfilter) {
        //nothing to do here
    };
    ContextStage3D.prototype.setStencilActions = function (triangleFace, compareMode, actionOnBothPass, actionOnDepthFail, actionOnDepthPassStencilFail, coordinateSystem) {
        if (triangleFace === void 0) { triangleFace = "frontAndBack"; }
        if (compareMode === void 0) { compareMode = "always"; }
        if (actionOnBothPass === void 0) { actionOnBothPass = "keep"; }
        if (actionOnDepthFail === void 0) { actionOnDepthFail = "keep"; }
        if (actionOnDepthPassStencilFail === void 0) { actionOnDepthPassStencilFail = "keep"; }
        if (coordinateSystem === void 0) { coordinateSystem = "leftHanded"; }
        this.addStream(String.fromCharCode(OpCodes.setStencilActions) + triangleFace + "$" + compareMode + "$" + actionOnBothPass + "$" + actionOnDepthFail + "$" + actionOnDepthPassStencilFail + "$");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setStencilReferenceValue = function (referenceValue, readMask, writeMask) {
        if (readMask === void 0) { readMask = 255; }
        if (writeMask === void 0) { writeMask = 255; }
        this.addStream(String.fromCharCode(OpCodes.setStencilReferenceValue, referenceValue + OpCodes.intMask, readMask + OpCodes.intMask, writeMask + OpCodes.intMask));
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setCulling = function (triangleFaceToCull, coordinateSystem) {
        if (coordinateSystem === void 0) { coordinateSystem = "leftHanded"; }
        //TODO implement coordinateSystem option
        this.addStream(String.fromCharCode(OpCodes.setCulling) + triangleFaceToCull + "$");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.drawTriangles = function (indexBuffer, firstIndex, numTriangles) {
        if (firstIndex === void 0) { firstIndex = 0; }
        if (numTriangles === void 0) { numTriangles = -1; }
        firstIndex = firstIndex || 0;
        if (!numTriangles || numTriangles < 0)
            numTriangles = indexBuffer.numIndices / 3;
        this.addStream(String.fromCharCode(OpCodes.drawTriangles, indexBuffer.id + OpCodes.intMask) + firstIndex + "," + numTriangles + ",");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setProgramConstantsFromMatrix = function (programType, firstRegister, matrix, transposedMatrix) {
        //this._gl.uniformMatrix4fv(this._gl.getUniformLocation(this._currentProgram.glProgram, this._uniformLocationNameDictionary[programType]), !transposedMatrix, new Float32Array(matrix.rawData));
        if (transposedMatrix === void 0) { transposedMatrix = false; }
        //TODO remove special case for WebGL matrix calls?
        var d = matrix.rawData;
        if (transposedMatrix) {
            this.setProgramConstantsFromArray(programType, firstRegister, [d[0], d[4], d[8], d[12]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 1, [d[1], d[5], d[9], d[13]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 2, [d[2], d[6], d[10], d[14]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 3, [d[3], d[7], d[11], d[15]], 1);
        }
        else {
            this.setProgramConstantsFromArray(programType, firstRegister, [d[0], d[1], d[2], d[3]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 1, [d[4], d[5], d[6], d[7]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 2, [d[8], d[9], d[10], d[11]], 1);
            this.setProgramConstantsFromArray(programType, firstRegister + 3, [d[12], d[13], d[14], d[15]], 1);
        }
    };
    ContextStage3D.prototype.setProgramConstantsFromArray = function (programType, firstRegister, data, numRegisters) {
        if (numRegisters === void 0) { numRegisters = -1; }
        var startIndex;
        var target = (programType == ContextGLProgramType.VERTEX) ? OpCodes.trueValue : OpCodes.falseValue;
        for (var i = 0; i < numRegisters; i++) {
            startIndex = i * 4;
            this.addStream(String.fromCharCode(OpCodes.setProgramConstant, target, (firstRegister + i) + OpCodes.intMask) + data[startIndex] + "," + data[startIndex + 1] + "," + data[startIndex + 2] + "," + data[startIndex + 3] + ",");
            if (ContextStage3D.debug)
                this.execute();
        }
    };
    ContextStage3D.prototype.setProgram = function (program) {
        this.addStream(String.fromCharCode(OpCodes.setProgram, program.id + OpCodes.intMask));
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.present = function () {
        this.addStream(String.fromCharCode(OpCodes.present));
        this.execute();
    };
    ContextStage3D.prototype.clear = function (red, green, blue, alpha, depth, stencil, mask) {
        if (red === void 0) { red = 0; }
        if (green === void 0) { green = 0; }
        if (blue === void 0) { blue = 0; }
        if (alpha === void 0) { alpha = 1; }
        if (depth === void 0) { depth = 1; }
        if (stencil === void 0) { stencil = 0; }
        if (mask === void 0) { mask = ContextGLClearMask.ALL; }
        this.addStream(String.fromCharCode(OpCodes.clear) + red + "," + green + "," + blue + "," + alpha + "," + depth + "," + stencil + "," + mask + ",");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.createProgram = function () {
        return new ProgramFlash(this);
    };
    ContextStage3D.prototype.createVertexBuffer = function (numVertices, data32PerVertex) {
        return new VertexBufferFlash(this, numVertices, data32PerVertex);
    };
    ContextStage3D.prototype.createIndexBuffer = function (numIndices) {
        return new IndexBufferFlash(this, numIndices);
    };
    ContextStage3D.prototype.configureBackBuffer = function (width, height, antiAlias, enableDepthAndStencil) {
        if (enableDepthAndStencil === void 0) { enableDepthAndStencil = true; }
        this._width = width;
        this._height = height;
        //TODO: add Anitalias setting
        this.addStream(String.fromCharCode(OpCodes.configureBackBuffer) + width + "," + height + ",");
    };
    ContextStage3D.prototype.drawToBitmapData = function (destination) {
        //TODO
    };
    ContextStage3D.prototype.setVertexBufferAt = function (index, buffer, bufferOffset, format) {
        if (bufferOffset === void 0) { bufferOffset = 0; }
        if (format === void 0) { format = null; }
        if (buffer) {
            this.addStream(String.fromCharCode(OpCodes.setVertexBufferAt, index + OpCodes.intMask) + buffer.id + "," + bufferOffset + "," + format + "$");
        }
        else {
            this.addStream(String.fromCharCode(OpCodes.clearVertexBufferAt, index + OpCodes.intMask));
        }
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setColorMask = function (red, green, blue, alpha) {
        this.addStream(String.fromCharCode(OpCodes.setColorMask, red ? OpCodes.trueValue : OpCodes.falseValue, green ? OpCodes.trueValue : OpCodes.falseValue, blue ? OpCodes.trueValue : OpCodes.falseValue, alpha ? OpCodes.trueValue : OpCodes.falseValue));
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setBlendFactors = function (sourceFactor, destinationFactor) {
        this.addStream(String.fromCharCode(OpCodes.setBlendFactors) + sourceFactor + "$" + destinationFactor + "$");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setRenderToTexture = function (target, enableDepthAndStencil, antiAlias, surfaceSelector) {
        if (enableDepthAndStencil === void 0) { enableDepthAndStencil = false; }
        if (antiAlias === void 0) { antiAlias = 0; }
        if (surfaceSelector === void 0) { surfaceSelector = 0; }
        if (target === null || target === undefined) {
            this.addStream(String.fromCharCode(OpCodes.clearRenderToTexture));
        }
        else {
            this.addStream(String.fromCharCode(OpCodes.setRenderToTexture, enableDepthAndStencil ? OpCodes.trueValue : OpCodes.falseValue) + target.id + "," + (antiAlias || 0) + ",");
        }
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setRenderToBackBuffer = function () {
        this.addStream(String.fromCharCode(OpCodes.clearRenderToTexture));
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setScissorRectangle = function (rectangle) {
        if (rectangle) {
            this.addStream(String.fromCharCode(OpCodes.setScissorRect) + rectangle.x + "," + rectangle.y + "," + rectangle.width + "," + rectangle.height + ",");
        }
        else {
            this.addStream(String.fromCharCode(OpCodes.clearScissorRect));
        }
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.setDepthTest = function (depthMask, passCompareMode) {
        this.addStream(String.fromCharCode(OpCodes.setDepthTest, depthMask ? OpCodes.trueValue : OpCodes.falseValue) + passCompareMode + "$");
        if (ContextStage3D.debug)
            this.execute();
    };
    ContextStage3D.prototype.dispose = function () {
        if (this._container == null)
            return;
        console.log("Context3D dispose, releasing " + this._resources.length + " resources.");
        while (this._resources.length)
            this._resources[0].dispose();
        if (this._container) {
            // encode command
            this.addStream(String.fromCharCode(OpCodes.disposeContext));
            this.execute();
            swfobject.removeSWF(this._oldCanvas.id);
            if (this._oldCanvas && this._oldParent) {
                this._oldParent.appendChild(this._oldCanvas);
                this._oldParent = null;
            }
            this._container = null;
        }
        this._oldCanvas = null;
    };
    ContextStage3D.prototype.addStream = function (stream) {
        this._cmdStream += stream;
    };
    ContextStage3D.prototype.execute = function () {
        if (ContextStage3D.logStream)
            console.log(this._cmdStream);
        var result = this._container["CallFunction"]("<invoke name=\"execStage3dOpStream\" returntype=\"javascript\"><arguments><string>" + this._cmdStream + "</string></arguments></invoke>");
        if (Number(result) <= -3)
            throw "Exec stream failed";
        this._cmdStream = "";
        return Number(result);
    };
    ContextStage3D.contexts = new Object();
    ContextStage3D.maxvertexconstants = 128;
    ContextStage3D.maxfragconstants = 28;
    ContextStage3D.maxtemp = 8;
    ContextStage3D.maxstreams = 8;
    ContextStage3D.maxtextures = 8;
    ContextStage3D.defaultsampler = new Sampler();
    ContextStage3D.debug = false;
    ContextStage3D.logStream = false;
    return ContextStage3D;
})();
/**
* global function for flash callback
*/
function mountain_js_context_available(id, driverInfo) {
    var ctx = ContextStage3D.contexts[id];
    if (ctx._iCallback) {
        ctx._iDriverInfo = driverInfo;
        // get out of the current JS stack frame and call back from flash player
        var timeOutId = window.setTimeout(function () {
            window.clearTimeout(timeOutId);
            try {
                ctx._iCallback(ctx);
            }
            catch (e) {
                console.log("Callback failed during flash initialization with '" + e.toString() + "'");
            }
        }, 1);
    }
}
module.exports = ContextStage3D;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL0NvbnRleHRTdGFnZTNELnRzIl0sIm5hbWVzIjpbIkNvbnRleHRTdGFnZTNEIiwiQ29udGV4dFN0YWdlM0QuY29uc3RydWN0b3IiLCJDb250ZXh0U3RhZ2UzRC5jb25zdHJ1Y3Rvci5jYWxsYmFja1NXRk9iamVjdCIsIkNvbnRleHRTdGFnZTNELmNvbnRhaW5lciIsIkNvbnRleHRTdGFnZTNELmRyaXZlckluZm8iLCJDb250ZXh0U3RhZ2UzRC5lcnJvckNoZWNraW5nRW5hYmxlZCIsIkNvbnRleHRTdGFnZTNELl9pQWRkUmVzb3VyY2UiLCJDb250ZXh0U3RhZ2UzRC5faVJlbW92ZVJlc291cmNlIiwiQ29udGV4dFN0YWdlM0QuY3JlYXRlVGV4dHVyZSIsIkNvbnRleHRTdGFnZTNELmNyZWF0ZUN1YmVUZXh0dXJlIiwiQ29udGV4dFN0YWdlM0Quc2V0VGV4dHVyZUF0IiwiQ29udGV4dFN0YWdlM0Quc2V0U2FtcGxlclN0YXRlQXQiLCJDb250ZXh0U3RhZ2UzRC5zZXRTdGVuY2lsQWN0aW9ucyIsIkNvbnRleHRTdGFnZTNELnNldFN0ZW5jaWxSZWZlcmVuY2VWYWx1ZSIsIkNvbnRleHRTdGFnZTNELnNldEN1bGxpbmciLCJDb250ZXh0U3RhZ2UzRC5kcmF3VHJpYW5nbGVzIiwiQ29udGV4dFN0YWdlM0Quc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21NYXRyaXgiLCJDb250ZXh0U3RhZ2UzRC5zZXRQcm9ncmFtQ29uc3RhbnRzRnJvbUFycmF5IiwiQ29udGV4dFN0YWdlM0Quc2V0UHJvZ3JhbSIsIkNvbnRleHRTdGFnZTNELnByZXNlbnQiLCJDb250ZXh0U3RhZ2UzRC5jbGVhciIsIkNvbnRleHRTdGFnZTNELmNyZWF0ZVByb2dyYW0iLCJDb250ZXh0U3RhZ2UzRC5jcmVhdGVWZXJ0ZXhCdWZmZXIiLCJDb250ZXh0U3RhZ2UzRC5jcmVhdGVJbmRleEJ1ZmZlciIsIkNvbnRleHRTdGFnZTNELmNvbmZpZ3VyZUJhY2tCdWZmZXIiLCJDb250ZXh0U3RhZ2UzRC5kcmF3VG9CaXRtYXBEYXRhIiwiQ29udGV4dFN0YWdlM0Quc2V0VmVydGV4QnVmZmVyQXQiLCJDb250ZXh0U3RhZ2UzRC5zZXRDb2xvck1hc2siLCJDb250ZXh0U3RhZ2UzRC5zZXRCbGVuZEZhY3RvcnMiLCJDb250ZXh0U3RhZ2UzRC5zZXRSZW5kZXJUb1RleHR1cmUiLCJDb250ZXh0U3RhZ2UzRC5zZXRSZW5kZXJUb0JhY2tCdWZmZXIiLCJDb250ZXh0U3RhZ2UzRC5zZXRTY2lzc29yUmVjdGFuZ2xlIiwiQ29udGV4dFN0YWdlM0Quc2V0RGVwdGhUZXN0IiwiQ29udGV4dFN0YWdlM0QuZGlzcG9zZSIsIkNvbnRleHRTdGFnZTNELmFkZFN0cmVhbSIsIkNvbnRleHRTdGFnZTNELmV4ZWN1dGUiLCJtb3VudGFpbl9qc19jb250ZXh0X2F2YWlsYWJsZSJdLCJtYXBwaW5ncyI6IkFBSUEsSUFBTyxTQUFTLFdBQWUsOEJBQThCLENBQUMsQ0FBQztBQUMvRCxJQUFPLE9BQU8sV0FBZ0Isa0NBQWtDLENBQUMsQ0FBQztBQUNsRSxJQUFPLGtCQUFrQixXQUFhLDRDQUE0QyxDQUFDLENBQUM7QUFDcEYsSUFBTyxvQkFBb0IsV0FBYSw4Q0FBOEMsQ0FBQyxDQUFDO0FBQ3hGLElBQU8sZ0JBQWdCLFdBQWMsMENBQTBDLENBQUMsQ0FBQztBQUVqRixJQUFPLGdCQUFnQixXQUFjLDBDQUEwQyxDQUFDLENBQUM7QUFDakYsSUFBTyxPQUFPLFdBQWdCLGlDQUFpQyxDQUFDLENBQUM7QUFDakUsSUFBTyxZQUFZLFdBQWUsc0NBQXNDLENBQUMsQ0FBQztBQUMxRSxJQUFPLFlBQVksV0FBZSxzQ0FBc0MsQ0FBQyxDQUFDO0FBRTFFLElBQU8saUJBQWlCLFdBQWEsMkNBQTJDLENBQUMsQ0FBQztBQUVsRixJQUFNLGNBQWM7SUFxRG5CQSw0REFBNERBO0lBQzVEQSxTQXRES0EsY0FBY0EsQ0FzRFBBLFNBQTJCQSxFQUFFQSxRQUFxQ0EsRUFBRUEsT0FBZ0JBO1FBdkN4RkMsZUFBVUEsR0FB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QUFDQSxDQUFDQSxnQkFBZ0JBLENBQUNBLENBQUNBLENBQUNBO1lBQ3RCQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQzlGQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ2xHQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ25HQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQ3BHQSxDQUFDQTtRQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUNQQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQzdGQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ2pHQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ25HQSxJQUFJQSxDQUFDQSw0QkFBNEJBLENBQUNBLFdBQVdBLEVBQUVBLGFBQWFBLEdBQUdBLENBQUNBLEVBQUVBLENBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUVBLEVBQUVBLENBQUNBLENBQUNBLENBQUNB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cEJBLEdBQUdBLENBQUNBLFlBQVlBLEdBQUdBLFVBQVVBLENBQUNBO1FBQzlCQSxBQUNBQSx3RUFEd0VBO1lBQ3BFQSxTQUFTQSxHQUFHQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQTtZQUVqQyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQy9CLElBQUEsQ0FBQztnQkFDQSxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLENBQUU7WUFBQSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNaLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0RBQW9ELEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQ3hGLENBQUM7UUFDRixDQUFDLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO0lBQ1BBLENBQUNBO0FBQ0ZBLENBQUNBO0FBckJELGlCQUFTLGNBQWMsQ0FBQyIsImZpbGUiOiJiYXNlL0NvbnRleHRTdGFnZTNELmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCaXRtYXBEYXRhXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9kYXRhL0JpdG1hcERhdGFcIik7XHJcbmltcG9ydCBNYXRyaXgzRFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL01hdHJpeDNEXCIpO1xyXG5pbXBvcnQgUmVjdGFuZ2xlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL1JlY3RhbmdsZVwiKTtcclxuXHJcbmltcG9ydCBzd2ZvYmplY3RcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL3N3Zm9iamVjdFwiKTtcclxuaW1wb3J0IFNhbXBsZXJcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYWdsc2wvU2FtcGxlclwiKTtcclxuaW1wb3J0IENvbnRleHRHTENsZWFyTWFza1x0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL0NvbnRleHRHTENsZWFyTWFza1wiKTtcclxuaW1wb3J0IENvbnRleHRHTFByb2dyYW1UeXBlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvQ29udGV4dEdMUHJvZ3JhbVR5cGVcIik7XHJcbmltcG9ydCBDdWJlVGV4dHVyZUZsYXNoXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9DdWJlVGV4dHVyZUZsYXNoXCIpO1xyXG5pbXBvcnQgSUNvbnRleHRHTFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvSUNvbnRleHRHTFwiKTtcclxuaW1wb3J0IEluZGV4QnVmZmVyRmxhc2hcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL0luZGV4QnVmZmVyRmxhc2hcIik7XHJcbmltcG9ydCBPcENvZGVzXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvT3BDb2Rlc1wiKTtcclxuaW1wb3J0IFByb2dyYW1GbGFzaFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9Qcm9ncmFtRmxhc2hcIik7XHJcbmltcG9ydCBUZXh0dXJlRmxhc2hcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvVGV4dHVyZUZsYXNoXCIpO1xyXG5pbXBvcnQgUmVzb3VyY2VCYXNlRmxhc2hcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9SZXNvdXJjZUJhc2VGbGFzaFwiKTtcclxuaW1wb3J0IFZlcnRleEJ1ZmZlckZsYXNoXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvVmVydGV4QnVmZmVyRmxhc2hcIik7XHJcblxyXG5jbGFzcyBDb250ZXh0U3RhZ2UzRCBpbXBsZW1lbnRzIElDb250ZXh0R0xcclxue1xyXG5cdHB1YmxpYyBzdGF0aWMgY29udGV4dHM6T2JqZWN0ID0gbmV3IE9iamVjdCgpO1xyXG5cdHB1YmxpYyBzdGF0aWMgbWF4dmVydGV4Y29uc3RhbnRzOm51bWJlciA9IDEyODtcclxuXHRwdWJsaWMgc3RhdGljIG1heGZyYWdjb25zdGFudHM6bnVtYmVyID0gMjg7XHJcblx0cHVibGljIHN0YXRpYyBtYXh0ZW1wOm51bWJlciA9IDg7XHJcblx0cHVibGljIHN0YXRpYyBtYXhzdHJlYW1zOm51bWJlciA9IDg7XHJcblx0cHVibGljIHN0YXRpYyBtYXh0ZXh0dXJlczpudW1iZXIgPSA4O1xyXG5cdHB1YmxpYyBzdGF0aWMgZGVmYXVsdHNhbXBsZXIgPSBuZXcgU2FtcGxlcigpO1xyXG5cclxuXHRwdWJsaWMgX2lEcml2ZXJJbmZvO1xyXG5cclxuXHRwcml2YXRlIF9jb250YWluZXI6SFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBfd2lkdGg6bnVtYmVyO1xyXG5cdHByaXZhdGUgX2hlaWdodDpudW1iZXI7XHJcblx0cHJpdmF0ZSBfY21kU3RyZWFtOnN0cmluZyA9IFwiXCI7XHJcblx0cHJpdmF0ZSBfZXJyb3JDaGVja2luZ0VuYWJsZWQ6Ym9vbGVhbjtcclxuXHRwcml2YXRlIF9yZXNvdXJjZXM6QXJyYXk8UmVzb3VyY2VCYXNlRmxhc2g+O1xyXG5cdHByaXZhdGUgX29sZENhbnZhczpIVE1MQ2FudmFzRWxlbWVudDtcclxuXHRwcml2YXRlIF9vbGRQYXJlbnQ6SFRNTEVsZW1lbnQ7XHJcblxyXG5cclxuXHRwdWJsaWMgc3RhdGljIGRlYnVnOmJvb2xlYW4gPSBmYWxzZTtcclxuXHRwdWJsaWMgc3RhdGljIGxvZ1N0cmVhbTpib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdHB1YmxpYyBfaUNhbGxiYWNrOihjb250ZXh0OklDb250ZXh0R0wpID0+IHZvaWQ7XHJcblxyXG5cdHB1YmxpYyBnZXQgY29udGFpbmVyKCk6SFRNTEVsZW1lbnRcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldCBkcml2ZXJJbmZvKClcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5faURyaXZlckluZm87XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0IGVycm9yQ2hlY2tpbmdFbmFibGVkKCk6Ym9vbGVhblxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9lcnJvckNoZWNraW5nRW5hYmxlZDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgZXJyb3JDaGVja2luZ0VuYWJsZWQodmFsdWU6Ym9vbGVhbilcclxuXHR7XHJcblx0XHRpZiAodGhpcy5fZXJyb3JDaGVja2luZ0VuYWJsZWQgPT0gdmFsdWUpXHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHR0aGlzLl9lcnJvckNoZWNraW5nRW5hYmxlZCA9IHZhbHVlO1xyXG5cclxuXHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5lbmFibGVFcnJvckNoZWNraW5nLCB2YWx1ZT8gT3BDb2Rlcy50cnVlVmFsdWUgOiBPcENvZGVzLmZhbHNlVmFsdWUpKTtcclxuXHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblx0Ly9UT0RPOiBnZXQgcmlkIG9mIGhhY2sgdGhhdCBmaXhlcyBpbmNsdWRpbmcgZGVmaW5pdGlvbiBmaWxlXHJcblx0Y29uc3RydWN0b3IoY29udGFpbmVyOkhUTUxDYW52YXNFbGVtZW50LCBjYWxsYmFjazooY29udGV4dDpJQ29udGV4dEdMKSA9PiB2b2lkLCBpbmNsdWRlPzpTYW1wbGVyKVxyXG5cdHtcclxuXHRcdHRoaXMuX3Jlc291cmNlcyA9IG5ldyBBcnJheTxSZXNvdXJjZUJhc2VGbGFzaD4oKTtcclxuXHJcblx0XHR2YXIgc3dmVmVyc2lvblN0ciA9IFwiMTEuMC4wXCI7XHJcblxyXG5cdFx0Ly8gVG8gdXNlIGV4cHJlc3MgaW5zdGFsbCwgc2V0IHRvIHBsYXllclByb2R1Y3RJbnN0YWxsLnN3Ziwgb3RoZXJ3aXNlIHRoZSBlbXB0eSBzdHJpbmcuXHJcblx0XHR2YXIgZmxhc2h2YXJzID0ge1xyXG5cdFx0XHRpZDpjb250YWluZXIuaWRcclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIHBhcmFtcyA9IHtcclxuXHRcdFx0cXVhbGl0eTpcImhpZ2hcIixcclxuXHRcdFx0Ymdjb2xvcjpcIiNmZmZmZmZcIixcclxuXHRcdFx0YWxsb3dzY3JpcHRhY2Nlc3M6XCJzYW1lRG9tYWluXCIsXHJcblx0XHRcdGFsbG93ZnVsbHNjcmVlbjpcInRydWVcIixcclxuXHRcdFx0d21vZGU6XCJkaXJlY3RcIlxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLl9lcnJvckNoZWNraW5nRW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5faURyaXZlckluZm8gPSBcIlVua25vd25cIjtcclxuXHJcblx0XHR2YXIgYXR0cmlidXRlcyA9IHtcclxuXHRcdFx0c2FsaWduOlwidGxcIixcclxuXHRcdFx0aWQ6Y29udGFpbmVyLmlkLFxyXG5cdFx0XHRuYW1lOmNvbnRhaW5lcltcIm5hbWVcIl0gLy9UT0RPOiBuZWVkZWQ/XHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuX29sZENhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD4gY29udGFpbmVyLmNsb25lTm9kZSgpOyAvLyBrZWVwIHRoZSBvbGQgb25lIHRvIHJlc3RvcmUgb24gZGlzcG9zZVxyXG5cdFx0dGhpcy5fb2xkUGFyZW50ID0gPEhUTUxFbGVtZW50PiBjb250YWluZXIucGFyZW50Tm9kZTtcclxuXHJcblx0XHR2YXIgY29udGV4dDNkT2JqID0gdGhpcztcclxuXHRcdENvbnRleHRTdGFnZTNELmNvbnRleHRzW2NvbnRhaW5lci5pZF0gPSB0aGlzO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNhbGxiYWNrU1dGT2JqZWN0KGNhbGxiYWNrSW5mbylcclxuXHRcdHtcclxuXHRcdFx0aWYgKCFjYWxsYmFja0luZm8uc3VjY2VzcylcclxuXHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRjb250ZXh0M2RPYmouX2NvbnRhaW5lciA9IGNhbGxiYWNrSW5mby5yZWY7XHJcblx0XHRcdGNvbnRleHQzZE9iai5faUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0XHR9XHJcblxyXG5cdFx0c3dmb2JqZWN0LmVtYmVkU1dGKFwibGlicy9tb2xlaGlsbF9qc19mbGFzaGJyaWRnZS5zd2ZcIiwgY29udGFpbmVyLmlkLCBTdHJpbmcoY29udGFpbmVyLndpZHRoKSwgU3RyaW5nKGNvbnRhaW5lci5oZWlnaHQpLCBzd2ZWZXJzaW9uU3RyLCBcIlwiLCBmbGFzaHZhcnMsIHBhcmFtcywgYXR0cmlidXRlcywgY2FsbGJhY2tTV0ZPYmplY3QpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIF9pQWRkUmVzb3VyY2UocmVzb3VyY2U6UmVzb3VyY2VCYXNlRmxhc2gpXHJcblx0e1xyXG5cdFx0dGhpcy5fcmVzb3VyY2VzLnB1c2gocmVzb3VyY2UpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIF9pUmVtb3ZlUmVzb3VyY2UocmVzb3VyY2U6UmVzb3VyY2VCYXNlRmxhc2gpXHJcblx0e1xyXG5cdFx0dGhpcy5fcmVzb3VyY2VzLnNwbGljZSh0aGlzLl9yZXNvdXJjZXMuaW5kZXhPZihyZXNvdXJjZSkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGNyZWF0ZVRleHR1cmUod2lkdGg6bnVtYmVyLCBoZWlnaHQ6bnVtYmVyLCBmb3JtYXQ6c3RyaW5nLCBvcHRpbWl6ZUZvclJlbmRlclRvVGV4dHVyZTpib29sZWFuLCBzdHJlYW1pbmdMZXZlbHM6bnVtYmVyID0gMCk6VGV4dHVyZUZsYXNoXHJcblx0e1xyXG5cdFx0Ly9UT0RPOnN0cmVhbWluZ1xyXG5cdFx0cmV0dXJuIG5ldyBUZXh0dXJlRmxhc2godGhpcywgd2lkdGgsIGhlaWdodCwgZm9ybWF0LCBvcHRpbWl6ZUZvclJlbmRlclRvVGV4dHVyZSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgY3JlYXRlQ3ViZVRleHR1cmUoc2l6ZTpudW1iZXIsIGZvcm1hdDpzdHJpbmcsIG9wdGltaXplRm9yUmVuZGVyVG9UZXh0dXJlOmJvb2xlYW4sIHN0cmVhbWluZ0xldmVsczpudW1iZXIgPSAwKTpDdWJlVGV4dHVyZUZsYXNoXHJcblx0e1xyXG5cdFx0Ly9UT0RPOnN0cmVhbWluZ1xyXG5cdFx0cmV0dXJuIG5ldyBDdWJlVGV4dHVyZUZsYXNoKHRoaXMsIHNpemUsIGZvcm1hdCwgb3B0aW1pemVGb3JSZW5kZXJUb1RleHR1cmUpO1xyXG5cdH1cclxuXHJcblxyXG5cdHB1YmxpYyBzZXRUZXh0dXJlQXQoc2FtcGxlcjpudW1iZXIsIHRleHR1cmU6UmVzb3VyY2VCYXNlRmxhc2gpXHJcblx0e1xyXG5cdFx0aWYgKHRleHR1cmUpIHtcclxuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldFRleHR1cmVBdCkgKyBzYW1wbGVyICsgXCIsXCIgKyB0ZXh0dXJlLmlkICsgXCIsXCIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLmNsZWFyVGV4dHVyZUF0KSArIHNhbXBsZXIudG9TdHJpbmcoKSArIFwiLFwiKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldFNhbXBsZXJTdGF0ZUF0KHNhbXBsZXI6bnVtYmVyLCB3cmFwOnN0cmluZywgZmlsdGVyOnN0cmluZywgbWlwZmlsdGVyOnN0cmluZyk6dm9pZFxyXG5cdHtcclxuXHRcdC8vbm90aGluZyB0byBkbyBoZXJlXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0U3RlbmNpbEFjdGlvbnModHJpYW5nbGVGYWNlOnN0cmluZyA9IFwiZnJvbnRBbmRCYWNrXCIsIGNvbXBhcmVNb2RlOnN0cmluZyA9IFwiYWx3YXlzXCIsIGFjdGlvbk9uQm90aFBhc3M6c3RyaW5nID0gXCJrZWVwXCIsIGFjdGlvbk9uRGVwdGhGYWlsOnN0cmluZyA9IFwia2VlcFwiLCBhY3Rpb25PbkRlcHRoUGFzc1N0ZW5jaWxGYWlsOnN0cmluZyA9IFwia2VlcFwiLCBjb29yZGluYXRlU3lzdGVtOnN0cmluZyA9IFwibGVmdEhhbmRlZFwiKVxyXG5cdHtcclxuXHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5zZXRTdGVuY2lsQWN0aW9ucykgKyB0cmlhbmdsZUZhY2UgKyBcIiRcIiArIGNvbXBhcmVNb2RlICsgXCIkXCIgKyBhY3Rpb25PbkJvdGhQYXNzICsgXCIkXCIgKyBhY3Rpb25PbkRlcHRoRmFpbCArIFwiJFwiICsgYWN0aW9uT25EZXB0aFBhc3NTdGVuY2lsRmFpbCArIFwiJFwiKTtcclxuXHJcblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldFN0ZW5jaWxSZWZlcmVuY2VWYWx1ZShyZWZlcmVuY2VWYWx1ZTpudW1iZXIsIHJlYWRNYXNrOm51bWJlciA9IDI1NSwgd3JpdGVNYXNrOm51bWJlciA9IDI1NSlcclxuXHR7XHJcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0U3RlbmNpbFJlZmVyZW5jZVZhbHVlLCByZWZlcmVuY2VWYWx1ZSArIE9wQ29kZXMuaW50TWFzaywgcmVhZE1hc2sgKyBPcENvZGVzLmludE1hc2ssIHdyaXRlTWFzayArIE9wQ29kZXMuaW50TWFzaykpO1xyXG5cclxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1ZylcclxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0Q3VsbGluZyh0cmlhbmdsZUZhY2VUb0N1bGw6c3RyaW5nLCBjb29yZGluYXRlU3lzdGVtOnN0cmluZyA9IFwibGVmdEhhbmRlZFwiKVxyXG5cdHtcclxuXHRcdC8vVE9ETyBpbXBsZW1lbnQgY29vcmRpbmF0ZVN5c3RlbSBvcHRpb25cclxuXHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5zZXRDdWxsaW5nKSArIHRyaWFuZ2xlRmFjZVRvQ3VsbCArIFwiJFwiKTtcclxuXHJcblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGRyYXdUcmlhbmdsZXMoaW5kZXhCdWZmZXI6SW5kZXhCdWZmZXJGbGFzaCwgZmlyc3RJbmRleDpudW1iZXIgPSAwLCBudW1UcmlhbmdsZXM6bnVtYmVyID0gLTEpXHJcblx0e1xyXG5cdFx0Zmlyc3RJbmRleCA9IGZpcnN0SW5kZXggfHwgMDtcclxuXHRcdGlmICghbnVtVHJpYW5nbGVzIHx8IG51bVRyaWFuZ2xlcyA8IDApXHJcblx0XHRcdG51bVRyaWFuZ2xlcyA9IGluZGV4QnVmZmVyLm51bUluZGljZXMvMztcclxuXHJcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuZHJhd1RyaWFuZ2xlcywgaW5kZXhCdWZmZXIuaWQgKyBPcENvZGVzLmludE1hc2spICsgZmlyc3RJbmRleCArIFwiLFwiICsgbnVtVHJpYW5nbGVzICsgXCIsXCIpO1xyXG5cclxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1ZylcclxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21NYXRyaXgocHJvZ3JhbVR5cGU6c3RyaW5nLCBmaXJzdFJlZ2lzdGVyOm51bWJlciwgbWF0cml4Ok1hdHJpeDNELCB0cmFuc3Bvc2VkTWF0cml4OmJvb2xlYW4gPSBmYWxzZSlcclxuXHR7XHJcblx0XHQvL3RoaXMuX2dsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5fZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuX2N1cnJlbnRQcm9ncmFtLmdsUHJvZ3JhbSwgdGhpcy5fdW5pZm9ybUxvY2F0aW9uTmFtZURpY3Rpb25hcnlbcHJvZ3JhbVR5cGVdKSwgIXRyYW5zcG9zZWRNYXRyaXgsIG5ldyBGbG9hdDMyQXJyYXkobWF0cml4LnJhd0RhdGEpKTtcclxuXHJcblx0XHQvL1RPRE8gcmVtb3ZlIHNwZWNpYWwgY2FzZSBmb3IgV2ViR0wgbWF0cml4IGNhbGxzP1xyXG5cdFx0dmFyIGQ6bnVtYmVyW10gPSBtYXRyaXgucmF3RGF0YTtcclxuXHRcdGlmICh0cmFuc3Bvc2VkTWF0cml4KSB7XHJcblx0XHRcdHRoaXMuc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21BcnJheShwcm9ncmFtVHlwZSwgZmlyc3RSZWdpc3RlciwgWyBkWzBdLCBkWzRdLCBkWzhdLCBkWzEyXSBdLCAxKTtcclxuXHRcdFx0dGhpcy5zZXRQcm9ncmFtQ29uc3RhbnRzRnJvbUFycmF5KHByb2dyYW1UeXBlLCBmaXJzdFJlZ2lzdGVyICsgMSwgWyBkWzFdLCBkWzVdLCBkWzldLCBkWzEzXSBdLCAxKTtcclxuXHRcdFx0dGhpcy5zZXRQcm9ncmFtQ29uc3RhbnRzRnJvbUFycmF5KHByb2dyYW1UeXBlLCBmaXJzdFJlZ2lzdGVyICsgMiwgWyBkWzJdLCBkWzZdLCBkWzEwXSwgZFsxNF0gXSwgMSk7XHJcblx0XHRcdHRoaXMuc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21BcnJheShwcm9ncmFtVHlwZSwgZmlyc3RSZWdpc3RlciArIDMsIFsgZFszXSwgZFs3XSwgZFsxMV0sIGRbMTVdIF0sIDEpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5zZXRQcm9ncmFtQ29uc3RhbnRzRnJvbUFycmF5KHByb2dyYW1UeXBlLCBmaXJzdFJlZ2lzdGVyLCBbIGRbMF0sIGRbMV0sIGRbMl0sIGRbM10gXSwgMSk7XHJcblx0XHRcdHRoaXMuc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21BcnJheShwcm9ncmFtVHlwZSwgZmlyc3RSZWdpc3RlciArIDEsIFsgZFs0XSwgZFs1XSwgZFs2XSwgZFs3XSBdLCAxKTtcclxuXHRcdFx0dGhpcy5zZXRQcm9ncmFtQ29uc3RhbnRzRnJvbUFycmF5KHByb2dyYW1UeXBlLCBmaXJzdFJlZ2lzdGVyICsgMiwgWyBkWzhdLCBkWzldLCBkWzEwXSwgZFsxMV0gXSwgMSk7XHJcblx0XHRcdHRoaXMuc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21BcnJheShwcm9ncmFtVHlwZSwgZmlyc3RSZWdpc3RlciArIDMsIFsgZFsxMl0sIGRbMTNdLCBkWzE0XSwgZFsxNV0gXSwgMSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21BcnJheShwcm9ncmFtVHlwZTpzdHJpbmcsIGZpcnN0UmVnaXN0ZXI6bnVtYmVyLCBkYXRhOm51bWJlcltdLCBudW1SZWdpc3RlcnM6bnVtYmVyID0gLTEpXHJcblx0e1xyXG5cdFx0dmFyIHN0YXJ0SW5kZXg6bnVtYmVyO1xyXG5cdFx0dmFyIHRhcmdldDpudW1iZXIgPSAocHJvZ3JhbVR5cGUgPT0gQ29udGV4dEdMUHJvZ3JhbVR5cGUuVkVSVEVYKT8gT3BDb2Rlcy50cnVlVmFsdWUgOiBPcENvZGVzLmZhbHNlVmFsdWU7XHJcblx0XHRmb3IgKHZhciBpOm51bWJlciA9IDA7IGkgPCBudW1SZWdpc3RlcnM7IGkrKykge1xyXG5cdFx0XHRzdGFydEluZGV4ID0gaSo0O1xyXG5cdFx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0UHJvZ3JhbUNvbnN0YW50LCB0YXJnZXQsIChmaXJzdFJlZ2lzdGVyICsgaSkgKyBPcENvZGVzLmludE1hc2spICsgZGF0YVtzdGFydEluZGV4XSArIFwiLFwiICsgZGF0YVtzdGFydEluZGV4ICsgMV0gKyBcIixcIiArIGRhdGFbc3RhcnRJbmRleCArIDJdICsgXCIsXCIgKyBkYXRhW3N0YXJ0SW5kZXggKyAzXSArIFwiLFwiKTtcclxuXHJcblx0XHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1ZylcclxuXHRcdFx0XHR0aGlzLmV4ZWN1dGUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRQcm9ncmFtKHByb2dyYW06UHJvZ3JhbUZsYXNoKVxyXG5cdHtcclxuXHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5zZXRQcm9ncmFtLCBwcm9ncmFtLmlkICsgT3BDb2Rlcy5pbnRNYXNrKSk7XHJcblxyXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmRlYnVnKVxyXG5cdFx0XHR0aGlzLmV4ZWN1dGUoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBwcmVzZW50KClcclxuXHR7XHJcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMucHJlc2VudCkpO1xyXG5cdFx0dGhpcy5leGVjdXRlKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgY2xlYXIocmVkOm51bWJlciA9IDAsIGdyZWVuOm51bWJlciA9IDAsIGJsdWU6bnVtYmVyID0gMCwgYWxwaGE6bnVtYmVyID0gMSwgZGVwdGg6bnVtYmVyID0gMSwgc3RlbmNpbDpudW1iZXIgPSAwLCBtYXNrOm51bWJlciA9IENvbnRleHRHTENsZWFyTWFzay5BTEwpXHJcblx0e1xyXG5cdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLmNsZWFyKSArIHJlZCArIFwiLFwiICsgZ3JlZW4gKyBcIixcIiArIGJsdWUgKyBcIixcIiArIGFscGhhICsgXCIsXCIgKyBkZXB0aCArIFwiLFwiICsgc3RlbmNpbCArIFwiLFwiICsgbWFzayArIFwiLFwiKTtcclxuXHJcblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGNyZWF0ZVByb2dyYW0oKTpQcm9ncmFtRmxhc2hcclxuXHR7XHJcblx0XHRyZXR1cm4gbmV3IFByb2dyYW1GbGFzaCh0aGlzKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBjcmVhdGVWZXJ0ZXhCdWZmZXIobnVtVmVydGljZXM6bnVtYmVyLCBkYXRhMzJQZXJWZXJ0ZXg6bnVtYmVyKTpWZXJ0ZXhCdWZmZXJGbGFzaFxyXG5cdHtcclxuXHRcdHJldHVybiBuZXcgVmVydGV4QnVmZmVyRmxhc2godGhpcywgbnVtVmVydGljZXMsIGRhdGEzMlBlclZlcnRleCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgY3JlYXRlSW5kZXhCdWZmZXIobnVtSW5kaWNlczpudW1iZXIpOkluZGV4QnVmZmVyRmxhc2hcclxuXHR7XHJcblx0XHRyZXR1cm4gbmV3IEluZGV4QnVmZmVyRmxhc2godGhpcywgbnVtSW5kaWNlcyk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgY29uZmlndXJlQmFja0J1ZmZlcih3aWR0aDpudW1iZXIsIGhlaWdodDpudW1iZXIsIGFudGlBbGlhczpudW1iZXIsIGVuYWJsZURlcHRoQW5kU3RlbmNpbDpib29sZWFuID0gdHJ1ZSlcclxuXHR7XHJcblx0XHR0aGlzLl93aWR0aCA9IHdpZHRoO1xyXG5cdFx0dGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuXHRcdC8vVE9ETzogYWRkIEFuaXRhbGlhcyBzZXR0aW5nXHJcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuY29uZmlndXJlQmFja0J1ZmZlcikgKyB3aWR0aCArIFwiLFwiICsgaGVpZ2h0ICsgXCIsXCIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGRyYXdUb0JpdG1hcERhdGEoZGVzdGluYXRpb246Qml0bWFwRGF0YSlcclxuXHR7XHJcblx0XHQvL1RPRE9cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRWZXJ0ZXhCdWZmZXJBdChpbmRleDpudW1iZXIsIGJ1ZmZlcjpWZXJ0ZXhCdWZmZXJGbGFzaCwgYnVmZmVyT2Zmc2V0Om51bWJlciA9IDAsIGZvcm1hdDpzdHJpbmcgPSBudWxsKVxyXG5cdHtcclxuXHRcdGlmIChidWZmZXIpIHtcclxuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldFZlcnRleEJ1ZmZlckF0LCBpbmRleCArIE9wQ29kZXMuaW50TWFzaykgKyBidWZmZXIuaWQgKyBcIixcIiArIGJ1ZmZlck9mZnNldCArIFwiLFwiICsgZm9ybWF0ICsgXCIkXCIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLmNsZWFyVmVydGV4QnVmZmVyQXQsIGluZGV4ICsgT3BDb2Rlcy5pbnRNYXNrKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmRlYnVnKVxyXG5cdFx0XHR0aGlzLmV4ZWN1dGUoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXRDb2xvck1hc2socmVkOmJvb2xlYW4sIGdyZWVuOmJvb2xlYW4sIGJsdWU6Ym9vbGVhbiwgYWxwaGE6Ym9vbGVhbilcclxuXHR7XHJcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0Q29sb3JNYXNrLCByZWQ/IE9wQ29kZXMudHJ1ZVZhbHVlIDogT3BDb2Rlcy5mYWxzZVZhbHVlLCBncmVlbj8gT3BDb2Rlcy50cnVlVmFsdWUgOiBPcENvZGVzLmZhbHNlVmFsdWUsIGJsdWU/IE9wQ29kZXMudHJ1ZVZhbHVlIDogT3BDb2Rlcy5mYWxzZVZhbHVlLCBhbHBoYT8gT3BDb2Rlcy50cnVlVmFsdWUgOiBPcENvZGVzLmZhbHNlVmFsdWUpKTtcclxuXHJcblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldEJsZW5kRmFjdG9ycyhzb3VyY2VGYWN0b3I6c3RyaW5nLCBkZXN0aW5hdGlvbkZhY3RvcjpzdHJpbmcpXHJcblx0e1xyXG5cdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldEJsZW5kRmFjdG9ycykgKyBzb3VyY2VGYWN0b3IgKyBcIiRcIiArIGRlc3RpbmF0aW9uRmFjdG9yICsgXCIkXCIpO1xyXG5cclxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1ZylcclxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0UmVuZGVyVG9UZXh0dXJlKHRhcmdldDpSZXNvdXJjZUJhc2VGbGFzaCwgZW5hYmxlRGVwdGhBbmRTdGVuY2lsOmJvb2xlYW4gPSBmYWxzZSwgYW50aUFsaWFzOm51bWJlciA9IDAsIHN1cmZhY2VTZWxlY3RvcjpudW1iZXIgPSAwKVxyXG5cdHtcclxuXHRcdGlmICh0YXJnZXQgPT09IG51bGwgfHwgdGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLmNsZWFyUmVuZGVyVG9UZXh0dXJlKSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0UmVuZGVyVG9UZXh0dXJlLCBlbmFibGVEZXB0aEFuZFN0ZW5jaWw/IE9wQ29kZXMudHJ1ZVZhbHVlIDogT3BDb2Rlcy5mYWxzZVZhbHVlKSArIHRhcmdldC5pZCArIFwiLFwiICsgKGFudGlBbGlhcyB8fCAwKSArIFwiLFwiKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblxyXG5cdHB1YmxpYyBzZXRSZW5kZXJUb0JhY2tCdWZmZXIoKVxyXG5cdHtcclxuXHRcdHRoaXMuYWRkU3RyZWFtKFN0cmluZy5mcm9tQ2hhckNvZGUoT3BDb2Rlcy5jbGVhclJlbmRlclRvVGV4dHVyZSkpO1xyXG5cclxuXHRcdGlmIChDb250ZXh0U3RhZ2UzRC5kZWJ1ZylcclxuXHRcdFx0dGhpcy5leGVjdXRlKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0U2Npc3NvclJlY3RhbmdsZShyZWN0YW5nbGU6UmVjdGFuZ2xlKVxyXG5cdHtcclxuXHRcdGlmIChyZWN0YW5nbGUpIHtcclxuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLnNldFNjaXNzb3JSZWN0KSArIHJlY3RhbmdsZS54ICsgXCIsXCIgKyByZWN0YW5nbGUueSArIFwiLFwiICsgcmVjdGFuZ2xlLndpZHRoICsgXCIsXCIgKyByZWN0YW5nbGUuaGVpZ2h0ICsgXCIsXCIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLmNsZWFyU2Npc3NvclJlY3QpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldERlcHRoVGVzdChkZXB0aE1hc2s6Ym9vbGVhbiwgcGFzc0NvbXBhcmVNb2RlOnN0cmluZylcclxuXHR7XHJcblx0XHR0aGlzLmFkZFN0cmVhbShTdHJpbmcuZnJvbUNoYXJDb2RlKE9wQ29kZXMuc2V0RGVwdGhUZXN0LCBkZXB0aE1hc2s/IE9wQ29kZXMudHJ1ZVZhbHVlIDogT3BDb2Rlcy5mYWxzZVZhbHVlKSArIHBhc3NDb21wYXJlTW9kZSArIFwiJFwiKTtcclxuXHJcblx0XHRpZiAoQ29udGV4dFN0YWdlM0QuZGVidWcpXHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGRpc3Bvc2UoKVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLl9jb250YWluZXIgPT0gbnVsbClcclxuXHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiQ29udGV4dDNEIGRpc3Bvc2UsIHJlbGVhc2luZyBcIiArIHRoaXMuX3Jlc291cmNlcy5sZW5ndGggKyBcIiByZXNvdXJjZXMuXCIpO1xyXG5cclxuXHRcdHdoaWxlICh0aGlzLl9yZXNvdXJjZXMubGVuZ3RoKVxyXG5cdFx0XHR0aGlzLl9yZXNvdXJjZXNbMF0uZGlzcG9zZSgpO1xyXG5cclxuXHRcdGlmICh0aGlzLl9jb250YWluZXIpIHtcclxuXHRcdFx0Ly8gZW5jb2RlIGNvbW1hbmRcclxuXHRcdFx0dGhpcy5hZGRTdHJlYW0oU3RyaW5nLmZyb21DaGFyQ29kZShPcENvZGVzLmRpc3Bvc2VDb250ZXh0KSk7XHJcblx0XHRcdHRoaXMuZXhlY3V0ZSgpO1xyXG5cdFx0XHRzd2ZvYmplY3QucmVtb3ZlU1dGKHRoaXMuX29sZENhbnZhcy5pZCk7XHJcblx0XHRcdGlmICh0aGlzLl9vbGRDYW52YXMgJiYgdGhpcy5fb2xkUGFyZW50KSB7XHJcblx0XHRcdFx0dGhpcy5fb2xkUGFyZW50LmFwcGVuZENoaWxkKHRoaXMuX29sZENhbnZhcyk7XHJcblx0XHRcdFx0dGhpcy5fb2xkUGFyZW50ID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9jb250YWluZXIgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29sZENhbnZhcyA9IG51bGw7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYWRkU3RyZWFtKHN0cmVhbTpzdHJpbmcpXHJcblx0e1xyXG5cdFx0dGhpcy5fY21kU3RyZWFtICs9IHN0cmVhbTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBleGVjdXRlKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0aWYgKENvbnRleHRTdGFnZTNELmxvZ1N0cmVhbSlcclxuXHRcdFx0Y29uc29sZS5sb2codGhpcy5fY21kU3RyZWFtKTtcclxuXHJcblx0XHR2YXIgcmVzdWx0Om51bWJlciA9IHRoaXMuX2NvbnRhaW5lcltcIkNhbGxGdW5jdGlvblwiXShcIjxpbnZva2UgbmFtZT1cXFwiZXhlY1N0YWdlM2RPcFN0cmVhbVxcXCIgcmV0dXJudHlwZT1cXFwiamF2YXNjcmlwdFxcXCI+PGFyZ3VtZW50cz48c3RyaW5nPlwiICsgdGhpcy5fY21kU3RyZWFtICsgXCI8L3N0cmluZz48L2FyZ3VtZW50cz48L2ludm9rZT5cIik7XHJcblxyXG5cdFx0aWYgKE51bWJlcihyZXN1bHQpIDw9IC0zKVxyXG5cdFx0XHR0aHJvdyBcIkV4ZWMgc3RyZWFtIGZhaWxlZFwiO1xyXG5cclxuXHRcdHRoaXMuX2NtZFN0cmVhbSA9IFwiXCI7XHJcblxyXG5cdFx0cmV0dXJuIE51bWJlcihyZXN1bHQpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0ID0gQ29udGV4dFN0YWdlM0Q7XHJcblxyXG4vKipcclxuKiBnbG9iYWwgZnVuY3Rpb24gZm9yIGZsYXNoIGNhbGxiYWNrXHJcbiovXHJcbmZ1bmN0aW9uIG1vdW50YWluX2pzX2NvbnRleHRfYXZhaWxhYmxlKGlkLCBkcml2ZXJJbmZvKVxyXG57XHJcblx0dmFyIGN0eDpDb250ZXh0U3RhZ2UzRCA9IENvbnRleHRTdGFnZTNELmNvbnRleHRzW2lkXTtcclxuXHRpZiAoY3R4Ll9pQ2FsbGJhY2spIHtcclxuXHRcdGN0eC5faURyaXZlckluZm8gPSBkcml2ZXJJbmZvO1xyXG5cdFx0Ly8gZ2V0IG91dCBvZiB0aGUgY3VycmVudCBKUyBzdGFjayBmcmFtZSBhbmQgY2FsbCBiYWNrIGZyb20gZmxhc2ggcGxheWVyXHJcblx0XHR2YXIgdGltZU91dElkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKClcclxuXHRcdHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aW1lT3V0SWQpO1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGN0eC5faUNhbGxiYWNrKGN0eCk7XHJcblx0XHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkNhbGxiYWNrIGZhaWxlZCBkdXJpbmcgZmxhc2ggaW5pdGlhbGl6YXRpb24gd2l0aCAnXCIgKyBlLnRvU3RyaW5nKCkgKyBcIidcIik7XHJcblx0XHRcdH1cclxuXHRcdH0sIDEpO1xyXG5cdH1cclxufVxyXG4iXX0=