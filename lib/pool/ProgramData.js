/**
 *
 * @class away.pool.ProgramDataBase
 */
var ProgramData = (function () {
    function ProgramData(pool, context, vertexString, fragmentString) {
        this.usages = 0;
        this._pool = pool;
        this.stage = context;
        this.vertexString = vertexString;
        this.fragmentString = fragmentString;
        this.stage.registerProgram(this);
    }
    /**
     *
     */
    ProgramData.prototype.dispose = function () {
        this.usages--;
        if (!this.usages) {
            this._pool.disposeItem(this.vertexString + this.fragmentString);
            this.stage.unRegisterProgram(this);
            if (this.program)
                this.program.dispose();
        }
        this.program = null;
    };
    ProgramData.PROGRAMDATA_ID_COUNT = 0;
    return ProgramData;
})();
module.exports = ProgramData;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1zdGFnZWdsL2xpYi9wb29sL1Byb2dyYW1EYXRhLnRzIl0sIm5hbWVzIjpbIlByb2dyYW1EYXRhIiwiUHJvZ3JhbURhdGEuY29uc3RydWN0b3IiLCJQcm9ncmFtRGF0YS5kaXNwb3NlIl0sIm1hcHBpbmdzIjoiQUFJQSxBQUlBOzs7R0FERztJQUNHLFdBQVc7SUFrQmhCQSxTQWxCS0EsV0FBV0EsQ0FrQkpBLElBQW9CQSxFQUFFQSxPQUFhQSxFQUFFQSxZQUFtQkEsRUFBRUEsY0FBcUJBO1FBTnBGQyxXQUFNQSxHQUFVQSxDQUFDQSxDQUFDQTtRQVF4QkEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDbEJBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLE9BQU9BLENBQUNBO1FBQ3JCQSxJQUFJQSxDQUFDQSxZQUFZQSxHQUFHQSxZQUFZQSxDQUFDQTtRQUNqQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsY0FBY0EsQ0FBQ0E7UUFDckNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO0lBQ2xDQSxDQUFDQTtJQUVERDs7T0FFR0E7SUFDSUEsNkJBQU9BLEdBQWRBO1FBRUNFLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBO1FBRWRBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ2xCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQTtZQUVoRUEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUVuQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7Z0JBQ2hCQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtRQUN6QkEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDckJBLENBQUNBO0lBMUNhRixnQ0FBb0JBLEdBQVVBLENBQUNBLENBQUNBO0lBMkMvQ0Esa0JBQUNBO0FBQURBLENBN0NBLEFBNkNDQSxJQUFBO0FBRUQsQUFBcUIsaUJBQVosV0FBVyxDQUFDIiwiZmlsZSI6InBvb2wvUHJvZ3JhbURhdGEuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2dyYW1EYXRhUG9vbFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL3Bvb2wvUHJvZ3JhbURhdGFQb29sXCIpO1xyXG5pbXBvcnQgSVByb2dyYW1cdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9JUHJvZ3JhbVwiKTtcclxuaW1wb3J0IFN0YWdlXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvU3RhZ2VcIik7XHJcblxyXG4vKipcclxuICpcclxuICogQGNsYXNzIGF3YXkucG9vbC5Qcm9ncmFtRGF0YUJhc2VcclxuICovXHJcbmNsYXNzIFByb2dyYW1EYXRhXHJcbntcclxuXHRwdWJsaWMgc3RhdGljIFBST0dSQU1EQVRBX0lEX0NPVU5UOm51bWJlciA9IDA7XHJcblxyXG5cdHByaXZhdGUgX3Bvb2w6UHJvZ3JhbURhdGFQb29sO1xyXG5cclxuXHRwdWJsaWMgdmVydGV4U3RyaW5nOnN0cmluZztcclxuXHJcblx0cHVibGljIGZyYWdtZW50U3RyaW5nOnN0cmluZztcclxuXHJcblx0cHVibGljIHN0YWdlOlN0YWdlO1xyXG5cclxuXHRwdWJsaWMgdXNhZ2VzOm51bWJlciA9IDA7XHJcblxyXG5cdHB1YmxpYyBwcm9ncmFtOklQcm9ncmFtO1xyXG5cclxuXHRwdWJsaWMgaWQ6bnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihwb29sOlByb2dyYW1EYXRhUG9vbCwgY29udGV4dDpTdGFnZSwgdmVydGV4U3RyaW5nOnN0cmluZywgZnJhZ21lbnRTdHJpbmc6c3RyaW5nKVxyXG5cdHtcclxuXHRcdHRoaXMuX3Bvb2wgPSBwb29sO1xyXG5cdFx0dGhpcy5zdGFnZSA9IGNvbnRleHQ7XHJcblx0XHR0aGlzLnZlcnRleFN0cmluZyA9IHZlcnRleFN0cmluZztcclxuXHRcdHRoaXMuZnJhZ21lbnRTdHJpbmcgPSBmcmFnbWVudFN0cmluZztcclxuXHRcdHRoaXMuc3RhZ2UucmVnaXN0ZXJQcm9ncmFtKHRoaXMpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICpcclxuXHQgKi9cclxuXHRwdWJsaWMgZGlzcG9zZSgpXHJcblx0e1xyXG5cdFx0dGhpcy51c2FnZXMtLTtcclxuXHJcblx0XHRpZiAoIXRoaXMudXNhZ2VzKSB7XHJcblx0XHRcdHRoaXMuX3Bvb2wuZGlzcG9zZUl0ZW0odGhpcy52ZXJ0ZXhTdHJpbmcgKyB0aGlzLmZyYWdtZW50U3RyaW5nKTtcclxuXHJcblx0XHRcdHRoaXMuc3RhZ2UudW5SZWdpc3RlclByb2dyYW0odGhpcyk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5wcm9ncmFtKVxyXG5cdFx0XHRcdHRoaXMucHJvZ3JhbS5kaXNwb3NlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5wcm9ncmFtID0gbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCA9IFByb2dyYW1EYXRhOyJdfQ==