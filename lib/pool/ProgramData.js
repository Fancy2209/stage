/**
 *
 * @class away.pool.ProgramDataBase
 */
var ProgramData = (function () {
    function ProgramData(pool, context, key) {
        this.usages = 0;
        this._pool = pool;
        this.context = context;
        this._key = key;
        this.context.registerProgram(this);
    }
    /**
     *
     */
    ProgramData.prototype.dispose = function () {
        this.usages--;
        if (!this.usages) {
            this._pool.disposeItem(this._key);
            this.context.unRegisterProgram(this);
            if (this.program)
                this.program.dispose();
        }
        this.program = null;
    };
    ProgramData.PROGRAMDATA_ID_COUNT = 0;
    return ProgramData;
})();
module.exports = ProgramData;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1zdGFnZWdsL2xpYi9wb29sL3Byb2dyYW1kYXRhLnRzIl0sIm5hbWVzIjpbIlByb2dyYW1EYXRhIiwiUHJvZ3JhbURhdGEuY29uc3RydWN0b3IiLCJQcm9ncmFtRGF0YS5kaXNwb3NlIl0sIm1hcHBpbmdzIjoiQUFJQSxBQUlBOzs7R0FERztJQUNHLFdBQVc7SUFlaEJBLFNBZktBLFdBQVdBLENBZUpBLElBQW9CQSxFQUFFQSxPQUFxQkEsRUFBRUEsR0FBVUE7UUFONURDLFdBQU1BLEdBQVVBLENBQUNBLENBQUNBO1FBUXhCQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUNsQkEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsT0FBT0EsQ0FBQ0E7UUFDdkJBLElBQUlBLENBQUNBLElBQUlBLEdBQUdBLEdBQUdBLENBQUNBO1FBQ2hCQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxlQUFlQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUNwQ0EsQ0FBQ0E7SUFFREQ7O09BRUdBO0lBQ0lBLDZCQUFPQSxHQUFkQTtRQUVDRSxJQUFJQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQTtRQUVkQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNsQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFFbENBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLGlCQUFpQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFFckNBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBO2dCQUNoQkEsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsRUFBRUEsQ0FBQ0E7UUFDekJBLENBQUNBO1FBRURBLElBQUlBLENBQUNBLE9BQU9BLEdBQUdBLElBQUlBLENBQUNBO0lBQ3JCQSxDQUFDQTtJQXRDYUYsZ0NBQW9CQSxHQUFVQSxDQUFDQSxDQUFDQTtJQXVDL0NBLGtCQUFDQTtBQUFEQSxDQXpDQSxBQXlDQ0EsSUFBQTtBQUVELEFBQXFCLGlCQUFaLFdBQVcsQ0FBQyIsImZpbGUiOiJwb29sL1Byb2dyYW1EYXRhLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9ncmFtRGF0YVBvb2xcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9wb29sL1Byb2dyYW1EYXRhUG9vbFwiKTtcbmltcG9ydCBDb250ZXh0R0xCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9Db250ZXh0R0xCYXNlXCIpO1xuaW1wb3J0IElQcm9ncmFtXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvSVByb2dyYW1cIik7XG5cbi8qKlxuICpcbiAqIEBjbGFzcyBhd2F5LnBvb2wuUHJvZ3JhbURhdGFCYXNlXG4gKi9cbmNsYXNzIFByb2dyYW1EYXRhXG57XG5cdHB1YmxpYyBzdGF0aWMgUFJPR1JBTURBVEFfSURfQ09VTlQ6bnVtYmVyID0gMDtcblxuXHRwcml2YXRlIF9wb29sOlByb2dyYW1EYXRhUG9vbDtcblx0cHJpdmF0ZSBfa2V5OnN0cmluZztcblxuXHRwdWJsaWMgY29udGV4dDpDb250ZXh0R0xCYXNlO1xuXG5cdHB1YmxpYyB1c2FnZXM6bnVtYmVyID0gMDtcblxuXHRwdWJsaWMgcHJvZ3JhbTpJUHJvZ3JhbTtcblxuXHRwdWJsaWMgaWQ6bnVtYmVyO1xuXG5cdGNvbnN0cnVjdG9yKHBvb2w6UHJvZ3JhbURhdGFQb29sLCBjb250ZXh0OkNvbnRleHRHTEJhc2UsIGtleTpzdHJpbmcpXG5cdHtcblx0XHR0aGlzLl9wb29sID0gcG9vbDtcblx0XHR0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXHRcdHRoaXMuX2tleSA9IGtleTtcblx0XHR0aGlzLmNvbnRleHQucmVnaXN0ZXJQcm9ncmFtKHRoaXMpO1xuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRwdWJsaWMgZGlzcG9zZSgpXG5cdHtcblx0XHR0aGlzLnVzYWdlcy0tO1xuXG5cdFx0aWYgKCF0aGlzLnVzYWdlcykge1xuXHRcdFx0dGhpcy5fcG9vbC5kaXNwb3NlSXRlbSh0aGlzLl9rZXkpO1xuXG5cdFx0XHR0aGlzLmNvbnRleHQudW5SZWdpc3RlclByb2dyYW0odGhpcyk7XG5cblx0XHRcdGlmICh0aGlzLnByb2dyYW0pXG5cdFx0XHRcdHRoaXMucHJvZ3JhbS5kaXNwb3NlKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5wcm9ncmFtID0gbnVsbDtcblx0fVxufVxuXG5leHBvcnQgPSBQcm9ncmFtRGF0YTsiXX0=