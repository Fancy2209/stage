/**
 *
 * @class away.pool.ProgramDataBase
 */
var ProgramData = (function () {
    function ProgramData(pool, context, key) {
        this.usages = 0;
        this._pool = pool;
        this.stage = context;
        this._key = key;
        this.stage.registerProgram(this);
    }
    /**
     *
     */
    ProgramData.prototype.dispose = function () {
        this.usages--;
        if (!this.usages) {
            this._pool.disposeItem(this._key);
            this.stage.unRegisterProgram(this);
            if (this.program)
                this.program.dispose();
        }
        this.program = null;
    };
    ProgramData.PROGRAMDATA_ID_COUNT = 0;
    return ProgramData;
})();
module.exports = ProgramData;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1zdGFnZWdsL2xpYi9wb29sL3Byb2dyYW1kYXRhLnRzIl0sIm5hbWVzIjpbIlByb2dyYW1EYXRhIiwiUHJvZ3JhbURhdGEuY29uc3RydWN0b3IiLCJQcm9ncmFtRGF0YS5kaXNwb3NlIl0sIm1hcHBpbmdzIjoiQUFJQSxBQUlBOzs7R0FERztJQUNHLFdBQVc7SUFlaEJBLFNBZktBLFdBQVdBLENBZUpBLElBQW9CQSxFQUFFQSxPQUFhQSxFQUFFQSxHQUFVQTtRQU5wREMsV0FBTUEsR0FBVUEsQ0FBQ0EsQ0FBQ0E7UUFReEJBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO1FBQ2xCQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxPQUFPQSxDQUFDQTtRQUNyQkEsSUFBSUEsQ0FBQ0EsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0E7UUFDaEJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO0lBQ2xDQSxDQUFDQTtJQUVERDs7T0FFR0E7SUFDSUEsNkJBQU9BLEdBQWRBO1FBRUNFLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBO1FBRWRBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ2xCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUVsQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUVuQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7Z0JBQ2hCQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtRQUN6QkEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDckJBLENBQUNBO0lBdENhRixnQ0FBb0JBLEdBQVVBLENBQUNBLENBQUNBO0lBdUMvQ0Esa0JBQUNBO0FBQURBLENBekNBLEFBeUNDQSxJQUFBO0FBRUQsQUFBcUIsaUJBQVosV0FBVyxDQUFDIiwiZmlsZSI6InBvb2wvUHJvZ3JhbURhdGEuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2dyYW1EYXRhUG9vbFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL3Bvb2wvUHJvZ3JhbURhdGFQb29sXCIpO1xuaW1wb3J0IElQcm9ncmFtXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvSVByb2dyYW1cIik7XG5pbXBvcnQgU3RhZ2VcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9TdGFnZVwiKTtcblxuLyoqXG4gKlxuICogQGNsYXNzIGF3YXkucG9vbC5Qcm9ncmFtRGF0YUJhc2VcbiAqL1xuY2xhc3MgUHJvZ3JhbURhdGFcbntcblx0cHVibGljIHN0YXRpYyBQUk9HUkFNREFUQV9JRF9DT1VOVDpudW1iZXIgPSAwO1xuXG5cdHByaXZhdGUgX3Bvb2w6UHJvZ3JhbURhdGFQb29sO1xuXHRwcml2YXRlIF9rZXk6c3RyaW5nO1xuXG5cdHB1YmxpYyBzdGFnZTpTdGFnZTtcblxuXHRwdWJsaWMgdXNhZ2VzOm51bWJlciA9IDA7XG5cblx0cHVibGljIHByb2dyYW06SVByb2dyYW07XG5cblx0cHVibGljIGlkOm51bWJlcjtcblxuXHRjb25zdHJ1Y3Rvcihwb29sOlByb2dyYW1EYXRhUG9vbCwgY29udGV4dDpTdGFnZSwga2V5OnN0cmluZylcblx0e1xuXHRcdHRoaXMuX3Bvb2wgPSBwb29sO1xuXHRcdHRoaXMuc3RhZ2UgPSBjb250ZXh0O1xuXHRcdHRoaXMuX2tleSA9IGtleTtcblx0XHR0aGlzLnN0YWdlLnJlZ2lzdGVyUHJvZ3JhbSh0aGlzKTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0cHVibGljIGRpc3Bvc2UoKVxuXHR7XG5cdFx0dGhpcy51c2FnZXMtLTtcblxuXHRcdGlmICghdGhpcy51c2FnZXMpIHtcblx0XHRcdHRoaXMuX3Bvb2wuZGlzcG9zZUl0ZW0odGhpcy5fa2V5KTtcblxuXHRcdFx0dGhpcy5zdGFnZS51blJlZ2lzdGVyUHJvZ3JhbSh0aGlzKTtcblxuXHRcdFx0aWYgKHRoaXMucHJvZ3JhbSlcblx0XHRcdFx0dGhpcy5wcm9ncmFtLmRpc3Bvc2UoKTtcblx0XHR9XG5cblx0XHR0aGlzLnByb2dyYW0gPSBudWxsO1xuXHR9XG59XG5cbmV4cG9ydCA9IFByb2dyYW1EYXRhOyJdfQ==