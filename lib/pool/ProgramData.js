/**
 *
 * @class away.pool.ProgramDataBase
 */
var ProgramData = (function () {
    function ProgramData(pool, context, vertexString, fragmentString) {
        this.usages = 0;
        this._pool = pool;
        this.stage = context;
        this.vertexString = vertexString;
        this.fragmentString = fragmentString;
        this.stage.registerProgram(this);
    }
    /**
     *
     */
    ProgramData.prototype.dispose = function () {
        this.usages--;
        if (!this.usages) {
            this._pool.disposeItem(this.vertexString + this.fragmentString);
            this.stage.unRegisterProgram(this);
            if (this.program)
                this.program.dispose();
        }
        this.program = null;
    };
    ProgramData.PROGRAMDATA_ID_COUNT = 0;
    return ProgramData;
})();
module.exports = ProgramData;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1zdGFnZWdsL2xpYi9wb29sL3Byb2dyYW1kYXRhLnRzIl0sIm5hbWVzIjpbIlByb2dyYW1EYXRhIiwiUHJvZ3JhbURhdGEuY29uc3RydWN0b3IiLCJQcm9ncmFtRGF0YS5kaXNwb3NlIl0sIm1hcHBpbmdzIjoiQUFJQSxBQUlBOzs7R0FERztJQUNHLFdBQVc7SUFrQmhCQSxTQWxCS0EsV0FBV0EsQ0FrQkpBLElBQW9CQSxFQUFFQSxPQUFhQSxFQUFFQSxZQUFtQkEsRUFBRUEsY0FBcUJBO1FBTnBGQyxXQUFNQSxHQUFVQSxDQUFDQSxDQUFDQTtRQVF4QkEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDbEJBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLE9BQU9BLENBQUNBO1FBQ3JCQSxJQUFJQSxDQUFDQSxZQUFZQSxHQUFHQSxZQUFZQSxDQUFDQTtRQUNqQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsY0FBY0EsQ0FBQ0E7UUFDckNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO0lBQ2xDQSxDQUFDQTtJQUVERDs7T0FFR0E7SUFDSUEsNkJBQU9BLEdBQWRBO1FBRUNFLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBO1FBRWRBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ2xCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQTtZQUVoRUEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtZQUVuQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7Z0JBQ2hCQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtRQUN6QkEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0EsT0FBT0EsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDckJBLENBQUNBO0lBMUNhRixnQ0FBb0JBLEdBQVVBLENBQUNBLENBQUNBO0lBMkMvQ0Esa0JBQUNBO0FBQURBLENBN0NBLEFBNkNDQSxJQUFBO0FBRUQsQUFBcUIsaUJBQVosV0FBVyxDQUFDIiwiZmlsZSI6InBvb2wvUHJvZ3JhbURhdGEuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2dyYW1EYXRhUG9vbFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL3Bvb2wvUHJvZ3JhbURhdGFQb29sXCIpO1xuaW1wb3J0IElQcm9ncmFtXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvSVByb2dyYW1cIik7XG5pbXBvcnQgU3RhZ2VcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9TdGFnZVwiKTtcblxuLyoqXG4gKlxuICogQGNsYXNzIGF3YXkucG9vbC5Qcm9ncmFtRGF0YUJhc2VcbiAqL1xuY2xhc3MgUHJvZ3JhbURhdGFcbntcblx0cHVibGljIHN0YXRpYyBQUk9HUkFNREFUQV9JRF9DT1VOVDpudW1iZXIgPSAwO1xuXG5cdHByaXZhdGUgX3Bvb2w6UHJvZ3JhbURhdGFQb29sO1xuXG5cdHB1YmxpYyB2ZXJ0ZXhTdHJpbmc6c3RyaW5nO1xuXG5cdHB1YmxpYyBmcmFnbWVudFN0cmluZzpzdHJpbmc7XG5cblx0cHVibGljIHN0YWdlOlN0YWdlO1xuXG5cdHB1YmxpYyB1c2FnZXM6bnVtYmVyID0gMDtcblxuXHRwdWJsaWMgcHJvZ3JhbTpJUHJvZ3JhbTtcblxuXHRwdWJsaWMgaWQ6bnVtYmVyO1xuXG5cdGNvbnN0cnVjdG9yKHBvb2w6UHJvZ3JhbURhdGFQb29sLCBjb250ZXh0OlN0YWdlLCB2ZXJ0ZXhTdHJpbmc6c3RyaW5nLCBmcmFnbWVudFN0cmluZzpzdHJpbmcpXG5cdHtcblx0XHR0aGlzLl9wb29sID0gcG9vbDtcblx0XHR0aGlzLnN0YWdlID0gY29udGV4dDtcblx0XHR0aGlzLnZlcnRleFN0cmluZyA9IHZlcnRleFN0cmluZztcblx0XHR0aGlzLmZyYWdtZW50U3RyaW5nID0gZnJhZ21lbnRTdHJpbmc7XG5cdFx0dGhpcy5zdGFnZS5yZWdpc3RlclByb2dyYW0odGhpcyk7XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdHB1YmxpYyBkaXNwb3NlKClcblx0e1xuXHRcdHRoaXMudXNhZ2VzLS07XG5cblx0XHRpZiAoIXRoaXMudXNhZ2VzKSB7XG5cdFx0XHR0aGlzLl9wb29sLmRpc3Bvc2VJdGVtKHRoaXMudmVydGV4U3RyaW5nICsgdGhpcy5mcmFnbWVudFN0cmluZyk7XG5cblx0XHRcdHRoaXMuc3RhZ2UudW5SZWdpc3RlclByb2dyYW0odGhpcyk7XG5cblx0XHRcdGlmICh0aGlzLnByb2dyYW0pXG5cdFx0XHRcdHRoaXMucHJvZ3JhbS5kaXNwb3NlKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5wcm9ncmFtID0gbnVsbDtcblx0fVxufVxuXG5leHBvcnQgPSBQcm9ncmFtRGF0YTsiXX0=